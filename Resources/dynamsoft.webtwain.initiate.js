/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2014, Dynamsoft Corporation 
* Author: Dynamsoft Support Team
* Date: Oct 14 2014
* Version: 10.0.1.1010
*/
var KISSY=function(b){function e(f){var i={},j;for(j in c){(function(g,k){g[k]=function(l){return h.log(l,k,f)}})(i,j)}return i}var h,d=0,c={debug:10,info:20,warn:30,error:40};h={__BUILD_TIME:"20131209235320",Env:{host:this},Config:{debug:"",fns:{}},version:"1.41",config:function(p,j){var l,i,o=this,f,n=h.Config,k=n.fns;h.isObject(p)?h.each(p,function(m,g){(f=k[g])?f.call(o,m):n[g]=m}):(l=k[p],j===b?i=l?l.call(o):n[p]:l?i=l.call(o,j):n[p]=j);return i},log:function(){return b},getLogger:function(f){return e(f)},error:function(){},guid:function(f){return(f||"")+d++},Logger:{}};h.Logger.Level={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};return h}();(function(x,r){function s(){}function p(P,L,Q,O,J,M){if(!L||!P){return P}var N,C,A,H;L[v]=P;M.push(L);A=x.keys(L);H=A.length;for(N=0;N<H;N++){if(C=A[N],C!==v){var K=P,c=L,G=Q,B=O,y=J,g=M;if(G||!(C in K)||y){var i=K[C],l=c[C];if(i===l){i===r&&(K[C]=i)}else{if(B&&(l=B.call(c,C,l)),y&&l&&(x.isArray(l)||x.isPlainObject(l))){l[v]?K[C]=l[v]:(c=i&&(x.isArray(i)||x.isPlainObject(i))?i:x.isArray(l)?[]:{},K[C]=c,p(c,l,G,B,n,g))}else{if(l!==r&&(G||!(C in K))){K[C]=l}}}}}}return P}function o(b,c){return"constructor"===b?r:c}var v="__MIX_CIRCULAR",q=this,n=!0,w=Object,u=w.create,j=!{toString:1}.propertyIsEnumerable("toString"),t="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toString,toLocaleString,valueOf".split(",");(function(e,f){for(var c in f){e[c]=f[c]}})(x,{stamp:function(i,g,f){var f=f||"__~ks_stamped",h=i[f];if(!h&&!g){try{h=i[f]=x.guid(f)}catch(k){h=r}}return h},keys:w.keys||function(f){var g=[],e,h;for(e in f){f.hasOwnProperty(e)&&g.push(e)}if(j){for(h=t.length-1;0<=h;h--){e=t[h],f.hasOwnProperty(e)&&g.push(e)}}return g},mix:function(A,g,z,c,l){"object"===typeof z&&(c=z.whitelist,l=z.deep,z=z.overwrite);if(c&&"function"!==typeof c){var k=c,c=function(f,e){return x.inArray(f,k)?e:r}}z===r&&(z=n);var y=[],i=0;for(p(A,g,z,c,l,y);g=y[i++];){delete g[v]}return A},merge:function(h){var h=x.makeArray(arguments),f={},g,i=h.length;for(g=0;g<i;g++){x.mix(f,h[g])}return f},augment:function(y,A){var l=x.makeArray(arguments),z=l.length-2,g=1,i,k,C=l[z],B=l[z+1];l[1]=A;x.isArray(B)||(C=B,B=r,z++);"boolean"!==typeof C&&(C=r,z++);for(;g<z;g++){k=l[g];if(i=k.prototype){k=x.mix({},i,!0,o)}x.mix(y.prototype,k,C,B)}return y},extend:function(f,g,h,i){var d=g.prototype;d.constructor=g;u?g=u(d):(s.prototype=d,g=new s);g.constructor=f;f.prototype=x.mix(g,f.prototype);f.superclass=d;h&&x.mix(g,h);i&&x.mix(f,i);return f},namespace:function(){var z=x.makeArray(arguments),i=z.length,y=null,A,h,l,k=z[i-1]===n&&i--;for(A=0;A<i;A++){l=(""+z[A]).split(".");y=k?q:this;for(h=q[l[0]]===y?1:0;h<l.length;++h){y=y[l[h]]=y[l[h]]||{}}}return y}})})(KISSY);(function(r,n){var o=Array.prototype,j=o.indexOf,e=o.lastIndexOf,p=o.filter,m=o.every,d=o.some,q=o.map;r.mix(r,{each:function(i,f,h){if(i){var l,g,k=0;l=i&&i.length;g=l===n||"function"===r.type(i);h=h||null;if(g){for(g=r.keys(i);k<g.length&&!(l=g[k],!1===f.call(h,i[l],l,i));k++){}}else{for(g=i[0];k<l&&!1!==f.call(h,g,k,i);g=i[++k]){}}}return i},indexOf:j?function(f,c){return j.call(c,f)}:function(g,f){for(var h=0,i=f.length;h<i;++h){if(f[h]===g){return h}}return -1},lastIndexOf:e?function(f,c){return e.call(c,f)}:function(f,c){for(var g=c.length-1;0<=g&&c[g]!==f;g--){}return g},unique:function(f,l){var i=f.slice();l&&i.reverse();for(var h=0,g,k;h<i.length;){for(k=i[h];(g=r.lastIndexOf(k,i))!==h;){i.splice(g,1)}h+=1}l&&i.reverse();return i},inArray:function(f,g){return -1<r.indexOf(f,g)},filter:p?function(f,c,g){return p.call(f,c,g||this)}:function(f,i,h){var g=[];r.each(f,function(k,c,l){i.call(h||this,k,c,l)&&g.push(k)});return g},map:q?function(b,g,f){return q.call(b,g,f||this)}:function(h,g,l){for(var t=h.length,i=Array(t),s=0;s<t;s++){var k="string"===typeof h?h.charAt(s):h[s];if(k||s in h){i[s]=g.call(l||this,k,s,h)}}return i},reduce:function(h,g,l){var s=h.length;if("function"!==typeof g){throw new TypeError("callback is not function!")}if(0===s&&2===arguments.length){throw new TypeError("arguments invalid")}var i=0,k;if(3<=arguments.length){k=l}else{do{if(i in h){k=h[i++];break}i+=1;if(i>=s){throw new TypeError}}while(1)}for(;i<s;){i in h&&(k=g.call(n,k,h[i],i,h)),i++}return k},every:m?function(f,c,g){return m.call(f,c,g||this)}:function(g,f,i){for(var k=g&&g.length||0,h=0;h<k;h++){if(h in g&&!f.call(i,g[h],h,g)){return !1}}return !0},some:d?function(f,c,g){return d.call(f,c,g||this)}:function(g,f,i){for(var k=g&&g.length||0,h=0;h<k;h++){if(h in g&&f.call(i,g[h],h,g)){return !0}}return !1},makeArray:function(g){if(null==g){return[]}if(r.isArray(g)){return g}var k=typeof g.length,i=typeof g;if("number"!==k||g.alert||"string"===i||"function"===i&&!("item" in g&&"number"===k)){return[g]}for(var k=[],i=0,h=g.length;i<h;i++){k[i]=g[i]}return k}})})(KISSY);(function(v,q){function r(d){var c=typeof d;return null==d||"object"!==c&&"function"!==c}function o(){if(u){return u}var b=t;v.each(p,function(c){b+=c+"|"});b=b.slice(0,-1);return u=RegExp(b,"g")}function n(){if(s){return s}var c=t;v.each(j,function(b){c+=b+"|"});c+="&#(\\d{1,5});";return s=RegExp(c,"g")}var t="",p={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},j={},u,s,e=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;(function(){for(var b in p){j[p[b]]=b}})();v.mix(v,{urlEncode:function(b){return encodeURIComponent(""+b)},urlDecode:function(b){return decodeURIComponent(b.replace(/\+/g," "))},fromUnicode:function(b){return b.replace(/\\u([a-f\d]{4})/ig,function(d,c){return String.fromCharCode(parseInt(c,16))})},escapeHtml:function(b){return(b+"").replace(o(),function(c){return j[c]})},escapeRegExp:function(b){return b.replace(e,"\\$&")},unEscapeHtml:function(b){return b.replace(n(),function(d,c){return p[d]||String.fromCharCode(+c)})},param:function(z,y,l,f){y=y||"&";l=l||"=";f===q&&(f=!0);var x=[],C,g,w,B,A,c=v.urlEncode;for(C in z){if(A=z[C],C=c(C),r(A)){x.push(C),A!==q&&x.push(l,c(A+t)),x.push(y)}else{if(v.isArray(A)&&A.length){g=0;for(B=A.length;g<B;++g){w=A[g],r(w)&&(x.push(C,f?c("[]"):t),w!==q&&x.push(l,c(w+t)),x.push(y))}}}}x.pop();return x.join(t)},unparam:function(B,z,A){if("string"!==typeof B||!(B=v.trim(B))){return{}}for(var A=A||"=",y={},x,g=v.urlDecode,B=B.split(z||"&"),l=0,w=B.length;l<w;++l){x=B[l].indexOf(A);if(-1===x){z=g(B[l]),x=q}else{z=g(B[l].substring(0,x));x=B[l].substring(x+1);try{x=g(x)}catch(C){"decodeURIComponent error : "+x,C}v.endsWith(z,"[]")&&(z=z.substring(0,z.length-2))}z in y?v.isArray(y[z])?y[z].push(x):y[z]=[y[z],x]:y[z]=x}return y}});v.escapeHTML=v.escapeHtml;v.unEscapeHTML=v.unEscapeHtml})(KISSY);(function(b){function c(f,m,i){function n(){}var j=[].slice,e=j.call(arguments,3),d=function(){var g=j.call(arguments);return m.apply(this instanceof n?this:i||this,f?g.concat(e):e.concat(g))};n.prototype=m.prototype;d.prototype=new n;return d}b.mix(b,{noop:function(){},bind:c(0,c,null,0),rbind:c(0,c,null,1),later:function(o,n,j,q,m){var n=n||0,i=o,e=b.makeArray(m),p;"string"===typeof o&&(i=q[o]);i||"method undefined";o=function(){i.apply(q,e)};p=j?setInterval(o,n):setTimeout(o,n);return{id:p,interval:j,cancel:function(){this.interval?clearInterval(p):clearTimeout(p)}}},throttle:function(h,e,d){e=e||150;if(-1===e){return function(){h.apply(d||this,arguments)}}var i=b.now();return function(){var f=b.now();f-i>e&&(i=f,h.apply(d||this,arguments))}},buffer:function(j,i,d){function l(){l.stop();e=b.later(j,i,0,d||this,arguments)}i=i||150;if(-1===i){return function(){j.apply(d||this,arguments)}}var e=null;l.stop=function(){e&&(e.cancel(),e=0)};return l}})})(KISSY);(function(d,n){function o(c,s,q){var r=c,h,i,t,f;if(!c){return r}if(c[m]){return q[c[m]].destination}if("object"===typeof c){f=c.constructor;if(d.inArray(f,[Boolean,String,Number,Date,RegExp])){r=new f(c.valueOf())}else{if(h=d.isArray(c)){r=s?d.filter(c,s):c.concat()}else{if(i=d.isPlainObject(c)){r={}}}}c[m]=f=d.guid("c");q[f]={destination:r,input:c}}if(h){for(c=0;c<r.length;c++){r[c]=o(r[c],s,q)}}else{if(i){for(t in c){if(t!==m&&(!s||s.call(c,c[t],t,c)!==p)){r[t]=o(c[t],s,q)}}}}return r}function j(f,l,q,k){if(f[b]===l&&l[b]===f){return e}f[b]=l;l[b]=f;var i=function(h,c){return null!==h&&h!==n&&h[c]!==n},g;for(g in l){!i(f,g)&&i(l,g)&&q.push("expected has key "+g+'", but missing from actual.')}for(g in f){!i(l,g)&&i(f,g)&&q.push('expected missing key "'+g+'", but present in actual.')}for(g in l){g!==b&&(d.equals(f[g],l[g],q,k)||k.push('"'+g+'" was "'+(l[g]?l[g].toString():l[g])+'" in expected, but was "'+(f[g]?f[g].toString():f[g])+'" in actual.'))}d.isArray(f)&&d.isArray(l)&&f.length!==l.length&&k.push("arrays were not the same length");delete f[b];delete l[b];return 0===q.length&&0===k.length}var e=!0,p=!1,m="__~ks_cloned",b="__~ks_compared";d.mix(d,{equals:function(f,h,i,g){i=i||[];g=g||[];return f===h?e:f===n||null===f||h===n||null===h?null==f&&null==h:f instanceof Date&&h instanceof Date?f.getTime()===h.getTime():"string"===typeof f&&"string"===typeof h||"number"===typeof f&&"number"===typeof h?f===h:"object"===typeof f&&"object"===typeof h?j(f,h,i,g):f===h},clone:function(f,h){var i={},g=o(f,h,i);d.each(i,function(k){k=k.input;if(k[m]){try{delete k[m]}catch(c){k[m]=n}}});i=null;return g},now:Date.now||function(){return +new Date}})})(KISSY);(function(b,e){var h=/^[\s\xa0]+|[\s\xa0]+$/g,d=String.prototype.trim,c=/\\?\{([^{}]+)\}/g;b.mix(b,{trim:d?function(f){return null==f?"":d.call(f)}:function(f){return null==f?"":(f+"").replace(h,"")},substitute:function(g,i,j){return"string"!==typeof g||!i?g:g.replace(j||c,function(f,k){return"\\"===f.charAt(0)?f.slice(1):i[k]===e?"":i[k]})},ucfirst:function(f){f+="";return f.charAt(0).toUpperCase()+f.substring(1)},startsWith:function(f,g){return 0===f.lastIndexOf(g,0)},endsWith:function(g,i){var j=g.length-i.length;return 0<=j&&g.indexOf(i,j)===j}})})(KISSY);(function(b,e){var h={},d=Object.prototype,c=d.toString;b.mix(b,{type:function(f){return null==f?""+f:h[c.call(f)]||"object"},isNull:function(f){return null===f},isUndefined:function(f){return f===e},isEmptyObject:function(f){for(var g in f){if(g!==e){return !1}}return !0},isPlainObject:function(k){if(!k||"object"!==b.type(k)||k.nodeType||k.window==k){return !1}var i,j;try{if((j=k.constructor)&&!d.hasOwnProperty.call(k,"constructor")&&!d.hasOwnProperty.call(j.prototype,"isPrototypeOf")){return !1}}catch(g){return !1}for(i in k){}return i===e||d.hasOwnProperty.call(k,i)}});b.each("Boolean,Number,String,Function,Date,RegExp,Object,Array".split(","),function(g,f){h["[object "+g+"]"]=f=g.toLowerCase();b["is"+g]=function(i){return b.type(i)===f}});b.isArray=Array.isArray||b.isArray})(KISSY);(function(b){function l(){for(var f=0,c;c=m[f++];){try{c()}catch(g){g.stack||g,"error",setTimeout(function(){throw g},0)}}1<f&&(m=[]);e=0}var m=[],e=0;b.setImmediate=function(c){m.push(c);e||(e=1,d())};var d;if("function"===typeof setImmediate){d=function(){setImmediate(l)}}else{if("undefined"!==typeof process&&"function"===typeof process.nextTick){d=function(){process.nextTick(l)}}else{if("undefined"!==typeof MessageChannel){var n=new MessageChannel;n.port1.onmessage=function(){d=j;n.port1.onmessage=l;l()};var j=function(){n.port2.postMessage(0)};d=function(){setTimeout(l,0);j()}}else{d=function(){setTimeout(l,0)}}}}})(KISSY);(function(b){function d(i,m){for(var k=0,j=i.length-1,h=[],l;0<=j;j--){l=i[j],"."!==l&&(".."===l?k++:k?k--:h[h.length]=l)}if(m){for(;k--;k){h[h.length]=".."}}return h=h.reverse()}var e=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/,c=b.Path={resolve:function(){var l="",m,k=arguments,j,g=0;for(m=k.length-1;0<=m&&!g;m--){j=k[m],"string"===typeof j&&j&&(l=j+"/"+l,g="/"===j.charAt(0))}l=d(b.filter(l.split("/"),function(f){return !!f}),!g).join("/");return(g?"/":"")+l||"."},normalize:function(i){var j="/"===i.charAt(0),g="/"===i.slice(-1),i=d(b.filter(i.split("/"),function(f){return !!f}),!j).join("/");!i&&!j&&(i=".");i&&g&&(i+="/");return(j?"/":"")+i},join:function(){var g=b.makeArray(arguments);return c.normalize(b.filter(g,function(f){return f&&"string"===typeof f}).join("/"))},relative:function(n,p){var n=c.normalize(n),p=c.normalize(p),k=b.filter(n.split("/"),function(f){return !!f}),j=[],i,o,h=b.filter(p.split("/"),function(f){return !!f});o=Math.min(k.length,h.length);for(i=0;i<o&&k[i]===h[i];i++){}for(o=i;i<k.length;){j.push(".."),i++}j=j.concat(h.slice(o));return j=j.join("/")},basename:function(f,i){var h;h=(f.match(e)||[])[3]||"";i&&h&&h.slice(-1*i.length)===i&&(h=h.slice(0,-1*i.length));return h},dirname:function(f){var g=f.match(e)||[],f=g[1]||"",g=g[2]||"";if(!f&&!g){return"."}g&&(g=g.substring(0,g.length-1));return f+g},extname:function(f){return(f.match(e)||[])[4]||""}}})(KISSY);(function(z,t){function u(c){c._queryMap||(c._queryMap=z.unparam(c._query))}function q(b){this._query=b||""}function p(d,c){return encodeURI(d).replace(c,function(b){b=b.charCodeAt(0).toString(16);return"%"+(1===b.length?"0"+b:b)})}function x(c){if(c instanceof x){return c.clone()}var e=this;z.mix(e,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});c=x.getComponents(c);z.each(c,function(d,g){d=d||"";if("query"===g){e.query=new q(d)}else{try{d=z.urlDecode(d)}catch(f){f+"urlDecode error : "+d}e[g]=d}});return e}var s=/[#\/\?@]/g,o=/[#\?]/g,y=/[#@]/g,w=/#/g,n=RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),v=z.Path,j={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7};q.prototype={constructor:q,clone:function(){return new q(this.toString())},reset:function(b){this._query=b||"";this._queryMap=null;return this},count:function(){var e=0,f,g;u(this);f=this._queryMap;for(g in f){z.isArray(f[g])?e+=f[g].length:e++}return e},has:function(c){var e;u(this);e=this._queryMap;return c?c in e:!z.isEmptyObject(e)},get:function(d){var c;u(this);c=this._queryMap;return d?c[d]:c},keys:function(){u(this);return z.keys(this._queryMap)},set:function(e,f){var g;u(this);g=this._queryMap;"string"===typeof e?this._queryMap[e]=f:(e instanceof q&&(e=e.get()),z.each(e,function(d,c){g[c]=d}));return this},remove:function(b){u(this);b?delete this._queryMap[b]:this._queryMap={};return this},add:function(f,e){var g,h;if("string"===typeof f){u(this),g=this._queryMap,h=g[f],h=h===t?e:[].concat(h).concat(e),g[f]=h}else{for(g in f instanceof q&&(f=f.get()),f){this.add(g,f[g])}}return this},toString:function(c){u(this);return z.param(this._queryMap,t,t,c)}};x.prototype={constructor:x,clone:function(){var c=new x,e=this;z.each(j,function(b,d){c[d]=e[d]});c.query=c.query.clone();return c},resolve:function(c){"string"===typeof c&&(c=new x(c));var i=0,h,e=this.clone();z.each("scheme,userInfo,hostname,port,path,query,fragment".split(","),function(b){if(b==="path"){if(i){e[b]=c[b]}else{if(b=c.path){i=1;if(!z.startsWith(b,"/")){if(e.hostname&&!e.path){b="/"+b}else{if(e.path){h=e.path.lastIndexOf("/");h!==-1&&(b=e.path.slice(0,h+1)+b)}}}e.path=v.normalize(b)}}}else{if(b==="query"){if(i||c.query.toString()){e.query=c.query.clone();i=1}}else{if(i||c[b]){e[b]=c[b];i=1}}}});return e},getScheme:function(){return this.scheme},setScheme:function(b){this.scheme=b;return this},getHostname:function(){return this.hostname},setHostname:function(b){this.hostname=b;return this},setUserInfo:function(b){this.userInfo=b;return this},getUserInfo:function(){return this.userInfo},setPort:function(b){this.port=b;return this},getPort:function(){return this.port},setPath:function(b){this.path=b;return this},getPath:function(){return this.path},setQuery:function(b){"string"===typeof b&&(z.startsWith(b,"?")&&(b=b.slice(1)),b=new q(p(b,y)));this.query=b;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(c){z.startsWith(c,"#")&&(c=c.slice(1));this.fragment=c;return this},isSameOriginAs:function(b){return this.hostname.toLowerCase()===b.hostname.toLowerCase()&&this.scheme.toLowerCase()===b.scheme.toLowerCase()&&this.port.toLowerCase()===b.port.toLowerCase()},toString:function(d){var i=[],h,e;if(h=this.scheme){i.push(p(h,s)),i.push(":")}if(h=this.hostname){i.push("//");if(e=this.userInfo){i.push(p(e,s)),i.push("@")}i.push(encodeURIComponent(h));if(e=this.port){i.push(":"),i.push(e)}}if(e=this.path){h&&!z.startsWith(e,"/")&&(e="/"+e),e=v.normalize(e),i.push(p(e,o))}if(d=this.query.toString.call(this.query,d)){i.push("?"),i.push(d)}if(d=this.fragment){i.push("#"),i.push(p(d,w))}return i.join("")}};x.Query=q;x.getComponents=function(e){var f=(e||"").match(n)||[],g={};z.each(j,function(d,c){g[c]=f[d]});return g};z.Uri=x})(KISSY);(function(x,r){function s(d){var c=0;return parseFloat(d.replace(/\./g,function(){return 0===c++?".":""}))}function p(e,c){var f;c.trident=0.1;if((f=e.match(/Trident\/([\d.]*)/))&&f[1]){c.trident=s(f[1])}c.core="trident"}function o(e){var c,f;return(c=e.match(/MSIE ([^;]*)|Trident.*; rv(?:\s|:)?([0-9.]+)/))&&(f=c[1]||c[2])?s(f):0}function v(A){var z,l="",y="",k,i=[6,9],g,C=n&&n.createElement("div"),B=[],f={webkit:r,trident:r,gecko:r,presto:r,chrome:r,safari:r,firefox:r,ie:r,ieMode:r,opera:r,mobile:r,core:r,shell:r,phantomjs:r,os:r,ipad:r,iphone:r,ipod:r,ios:r,android:r,nodejs:r};C&&C.getElementsByTagName&&(C.innerHTML="<!--[if IE {{version}}]><s></s><![endif]-->".replace("{{version}}",""),B=C.getElementsByTagName("s"));if(0<B.length){p(A,f);k=i[0];for(i=i[1];k<=i;k++){if(C.innerHTML="<!--[if IE {{version}}]><s></s><![endif]-->".replace("{{version}}",k),0<B.length){f[y="ie"]=k;break}}if(!f.ie&&(g=o(A))){f[y="ie"]=g}}else{if((k=A.match(/AppleWebKit\/([\d.]*)/))&&k[1]){f[l="webkit"]=s(k[1]);if((k=A.match(/OPR\/(\d+\.\d+)/))&&k[1]){f[y="opera"]=s(k[1])}else{if((k=A.match(/Chrome\/([\d.]*)/))&&k[1]){f[y="chrome"]=s(k[1])}else{if((k=A.match(/\/([\d.]*) Safari/))&&k[1]){f[y="safari"]=s(k[1])}}}if(/ Mobile\//.test(A)&&A.match(/iPad|iPod|iPhone/)){f.mobile="apple";if((k=A.match(/OS ([^\s]*)/))&&k[1]){f.ios=s(k[1].replace("_","."))}z="ios";if((k=A.match(/iPad|iPod|iPhone/))&&k[0]){f[k[0].toLowerCase()]=f.ios}}else{if(/ Android/i.test(A)){if(/Mobile/.test(A)&&(z=f.mobile="android"),(k=A.match(/Android ([^\s]*);/))&&k[1]){f.android=s(k[1])}}else{if(k=A.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/)){f.mobile=k[0].toLowerCase()}}}if((k=A.match(/PhantomJS\/([^\s]*)/))&&k[1]){f.phantomjs=s(k[1])}}else{if((k=A.match(/Presto\/([\d.]*)/))&&k[1]){if(f[l="presto"]=s(k[1]),(k=A.match(/Opera\/([\d.]*)/))&&k[1]){f[y="opera"]=s(k[1]);if((k=A.match(/Opera\/.* Version\/([\d.]*)/))&&k[1]){f[y]=s(k[1])}if((k=A.match(/Opera Mini[^;]*/))&&k){f.mobile=k[0].toLowerCase()}else{if((k=A.match(/Opera Mobi[^;]*/))&&k){f.mobile=k[0]}}}}else{if(g=o(A)){f[y="ie"]=g,p(A,f)}else{if(k=A.match(/Gecko/)){f[l="gecko"]=0.1;if((k=A.match(/rv:([\d.]*)/))&&k[1]){f[l]=s(k[1]),/Mobile|Tablet/.test(A)&&(f.mobile="firefox")}if((k=A.match(/Firefox\/([\d.]*)/))&&k[1]){f[y="firefox"]=s(k[1])}}}}}}z||(/windows|win32/i.test(A)?z="windows":/macintosh|mac_powerpc/i.test(A)?z="macintosh":/linux/i.test(A)?z="linux":/rhino/i.test(A)&&(z="rhino"));f.os=z;f.core=f.core||l;f.shell=y;f.ieMode=f.ie&&n.documentMode||f.ie;return f}var q=x.Env.host,n=q.document,q=q.navigator,w=KISSY.UA=v(q&&q.userAgent||"");if("object"===typeof process){var u,j;if((u=process.versions)&&(j=u.node)){w.os=process.platform,w.nodejs=s(j)}}w.getDescriptorFromUserAgent=v;u="webkit,trident,gecko,presto,chrome,safari,firefox,ie,opera".split(",");j=n&&n.documentElement;var t="";j&&(x.each(u,function(b){var c=w[b];c&&(t+=" ks-"+b+(parseInt(c)+""),t+=" ks-"+b)}),x.trim(t)&&(j.className=x.trim(j.className+t)))})(KISSY);(function(L,F){var G=L.Env.host,D=L.UA,B=["","Webkit","Moz","O","ms"],J=G.document||{},E,A,K,I,z,H,u,C=J.documentElement,y,w=!0,t=!1,x="ontouchstart" in J&&!D.phantomjs,p=D.ieMode;C&&(C.querySelector&&8!==p&&(t=!0),y=C.style,L.each(B,function(b){var e=b?b+"Transition":"transition",d=b?b+"Transform":"transform";z===F&&e in y&&(z=b,K=e);H===F&&d in y&&(H=b,I=d)}),w="classList" in C,D=G.navigator||{},E="msPointerEnabled" in D,A="pointerEnabled" in D,I&&(J=J.createElement("p"),C.insertBefore(J,C.firstChild),J.style[I]="translate3d(1px,1px,1px)",D=G.getComputedStyle(J),D=D.getPropertyValue(I)||D[I],C.removeChild(J),u=D!==F&&0<D.length&&"none"!==D));L.Features={isMsPointerSupported:function(){return E},isPointerSupported:function(){return A},isTouchEventSupported:function(){return x},isTouchGestureSupported:function(){return x||A||E},isDeviceMotionSupported:function(){return !!G.DeviceMotionEvent},isHashChangeSupported:function(){return"onhashchange" in G&&(!p||p>7)},isTransitionSupported:function(){return z!==F},isTransformSupported:function(){return H!==F},isTransform3dSupported:function(){return u},isClassListSupported:function(){return w},isQuerySelectorSupported:function(){return !L.config("dom/selector")&&t},isIELessThan:function(b){return !!(p&&p<b)},getTransitionPrefix:function(){return z},getTransformPrefix:function(){return H},getTransitionProperty:function(){return K},getTransformProperty:function(){return I}}})(KISSY);(function(b){(b.Loader={}).Status={ERROR:-1,INIT:0,LOADING:1,LOADED:2,READY_TO_ATTACH:3,ATTACHING:4,ATTACHED:5}})(KISSY);(function(L){function F(f){if("string"===typeof f){return G(f)}for(var e=[],g=0,h=f.length;g<h;g++){e[g]=G(f[g])}return e}function G(c){"/"===c.charAt(c.length-1)&&(c+="index");L.endsWith(c,".js")&&(c=c.slice(0,-3));return c}function D(f,h){var i=h.indexOf("!");if(-1!==i){var g=h.substring(0,i),h=h.substring(i+1);L.use(g,{sync:!0,success:function(b,d){d.alias&&(h=d.alias(f,h,g))}})}return h}function B(d){var c;(c=d.match(/^\s*["']([^'"\s]+)["']\s*$/))||"can not find required mod in require call: "+d;return c[1]}var J=L.Loader,E=L.Path,A=L.Env.host,K=L.startsWith,I=J.Status,z=I.ATTACHED,H=I.READY_TO_ATTACH,u=I.LOADED,C=I.ATTACHING,y=I.ERROR,w=J.Utils={},t=A.document;L.mix(w,{docHead:function(){return t.getElementsByTagName("head")[0]||t.documentElement},normalDepModuleName:function(b,g){var h=0,f;if(!g){return g}if("string"===typeof g){return K(g,"../")||K(g,"./")?E.resolve(E.dirname(b),g):E.normalize(g)}for(f=g.length;h<f;h++){g[h]=w.normalDepModuleName(b,g[h])}return g},createModulesInfo:function(c,e){L.each(e,function(b){w.createModuleInfo(c,b)})},createModuleInfo:function(c,k,j){var k=G(k),i=c.Env.mods,f=i[k];return f?f:i[k]=f=new J.Module(L.mix({name:k,runtime:c},j))},getModules:function(j,q){var r=[j],o,n,l,k,i=j.Env.mods;L.each(q,function(b){o=i[b];!o||"css"!==o.getType()?(n=w.unalias(j,b),(l=L.reduce(n,function(d,c){k=i[c];return d&&k&&k.status>=C},!0))?r.push(i[n[0]].exports):r.push(null)):r.push(void 0)});return r},attachModsRecursively:function(f,e){var g,h=f.length;for(g=0;g<h;g++){w.attachModRecursively(f[g],e)}},checkModsLoadRecursively:function(s,r,o,q,n){var o=o||[],n=n||{},l,k=1,j=s.length,i=o.length;for(l=0;l<j;l++){k=k&&w.checkModLoadRecursively(s[l],r,o,q,n),o.length=i}return !!k},checkModLoadRecursively:function(i,e,m,n,l){var k,j=e.Env.mods[i];if(i in l){return l[i]}if(!j){return l[i]=!1}k=j.status;return k===y?(n.push(j),l[i]=!1):k>=H?l[i]=!0:k!==u?l[i]=!1:w.checkModsLoadRecursively(j.getNormalizedRequires(),e,m,n,l)?(j.status=H,l[i]=!0):l[i]=!1},attachModRecursively:function(e,c){var f=c.Env.mods[e];f.status>=C||(f.status=C,f.cjs||w.attachModsRecursively(f.getNormalizedRequires(),c),w.attachMod(c,f))},attachMod:function(f,h){var i=h.factory;if("function"===typeof i){var g;h.requires&&h.requires.length&&(g=L.bind(h.require,h));i=i.apply(h,h.cjs?[f,g,h.exports,h]:w.getModules(f,h.getRequiresWithAlias()));void 0!==i&&(h.exports=i)}else{h.exports=i}h.status=z},getModNamesAsArray:function(b){"string"===typeof b&&(b=b.replace(/\s+/g,"").split(","));return b},normalizeModNames:function(e,c,f){return w.unalias(e,w.normalizeModNamesWithAlias(e,c,f))},unalias:function(s,r){for(var o=[].concat(r),q,n,l,k=0,g,i=s.Env.mods;!k;){k=1;for(q=o.length-1;0<=q;q--){if((n=i[o[q]])&&"alias" in n){k=0;l=n.alias;"string"===typeof l&&(l=[l]);for(g=l.length-1;0<=g;g--){l[g]||l.splice(g,1)}o.splice.apply(o,[q,1].concat(F(l)))}}}return o},normalizeModNamesWithAlias:function(h,g,k){var l=[],j,i;if(g){j=0;for(i=g.length;j<i;j++){g[j]&&l.push(D(h,F(g[j])))}}k&&(l=w.normalDepModuleName(k,l));return l},registerModule:function(f,l,m,k){var l=G(l),j=f.Env.mods,i=j[l];i&&void 0!==i.factory?(l+" is defined more than once","warn"):(w.createModuleInfo(f,l),i=j[l],L.mix(i,{name:l,status:u,factory:m}),L.mix(i,k))},getHash:function(e){var c=5381,f;for(f=e.length;-1<--f;){c=(c<<5)+c+e.charCodeAt(f)}return c+""},getRequiresFromFn:function(d){var c=[];d.toString().replace(x,"").replace(p,function(b,e){c.push(B(e))});return c}});var x=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,p=/[^.'"]\s*require\s*\(([^)]+)\)/g})(KISSY);(function(d){function n(c,f){return f in c?c[f]:c.runtime.Config[f]}function o(c){d.mix(this,c)}function j(c){this.exports={};this.status=e.Status.INIT;this.factory=this.name=void 0;this.cjs=1;d.mix(this,c);this.waitedCallbacks=[]}var e=d.Loader,p=d.Path,m=e.Utils;o.prototype={constructor:o,reset:function(c){d.mix(this,c)},getTag:function(){return n(this,"tag")},getName:function(){return this.name},getBase:function(){return n(this,"base")},getPrefixUriForCombo:function(){var c=this.name;return this.getBase()+(c&&!this.isIgnorePackageNameInUri()?c+"/":"")},getPackageUri:function(){this.packageUri||(this.packageUri=new d.Uri(this.getPrefixUriForCombo()));return this.packageUri},getBaseUri:function(){return n(this,"baseUri")},isDebug:function(){return n(this,"debug")},isIgnorePackageNameInUri:function(){return n(this,"ignorePackageNameInUri")},getCharset:function(){return n(this,"charset")},isCombine:function(){return n(this,"combine")},getGroup:function(){return n(this,"group")}};e.Package=o;j.prototype={kissy:1,constructor:j,use:function(c,f){c=m.getModNamesAsArray(c);return KISSY.use(m.normalDepModuleName(this.name,c),f)},resolve:function(c){return this.getFullPathUri().resolve(c)},resolveByName:function(c){return m.normalDepModuleName(this.name,c)},require:function(c){return d.require(c,this.name)},wait:function(c){this.waitedCallbacks.push(c)},notifyAll:function(){for(var f,h=this.waitedCallbacks.length,i=0;i<h;i++){f=this.waitedCallbacks[i];try{f(this)}catch(g){g.stack||g,"error",setTimeout(function(){throw g},0)}}this.waitedCallbacks=[]},getType:function(){var c=this.type;c||(this.type=c=".css"===p.extname(this.name).toLowerCase()?"css":"js");return c},getFullPathUri:function(){var c,i,g,h;if(!this.fullPathUri){if(this.fullpath){i=new d.Uri(this.fullpath)}else{i=this.getPackage();c=i.getBaseUri();h=this.getPath();if(i.isIgnorePackageNameInUri()&&(g=i.name)){h=p.relative(g,h)}i=c.resolve(h);if(c=this.getTag()){c+="."+this.getType(),i.query.set("t",c)}}this.fullPathUri=i}return this.fullPathUri},getFullPath:function(){var c;this.fullpath||(c=this.getFullPathUri(),this.fullpath=c.toString());return this.fullpath},getPath:function(){var c;if(!(c=this.path)){c=this.name;var h="."+this.getType(),g="-min";c=p.join(p.dirname(c),p.basename(c,h));this.getPackage().isDebug()&&(g="");c=this.path=c+g+h}return c},getName:function(){return this.name},getPackage:function(){var f;if(!(f=this.packageInfo)){var h=this.name;f=this.runtime.config("packages");var h=h+"/",i="",g;for(g in f){d.startsWith(h,g+"/")&&g.length>i.length&&(i=g)}f=this.packageInfo=f[i]||b}return f},getTag:function(){return this.tag||this.getPackage().getTag()},getCharset:function(){return this.charset||this.getPackage().getCharset()},getRequiresWithAlias:function(){var c=this.requiresWithAlias,f=this.requires;if(!f||0===f.length){return f||[]}c||(this.requiresWithAlias=c=m.normalizeModNamesWithAlias(this.runtime,f,this.name));return c},getRequiredMods:function(){var c=this.runtime;return d.map(this.getNormalizedRequires(),function(f){return m.createModuleInfo(c,f)})},getNormalizedRequires:function(){var f,h=this.normalizedRequiresStatus,i=this.status,g=this.requires;if(!g||0===g.length){return g||[]}if((f=this.normalizedRequires)&&h===i){return f}this.normalizedRequiresStatus=i;return this.normalizedRequires=m.normalizeModNames(this.runtime,g,this.name)}};e.Module=j;var b=new o({name:"",runtime:d})})(KISSY);(function(d){function n(g,k){var l=0;if(e.webkit){g.sheet&&("webkit css poll loaded: "+k,l=1)}else{if(g.sheet){try{g.sheet.cssRules&&("same domain css poll loaded: "+k,l=1)}catch(i){var h=i.name;"css poll exception: "+h+" "+i.code+" "+k;"NS_ERROR_DOM_SECURITY_ERR"===h&&("css poll exception: "+h+"loaded : "+k,l=1)}}}return l}function o(){for(var f in b){var g=b[f],h=g.node;n(h,f)&&(g.callback&&g.callback.call(h),delete b[f])}d.isEmptyObject(b)?("clear css poll timer",m=0):m=setTimeout(o,j)}var j=30,e=d.UA,p=d.Loader.Utils,m=0,b={};p.pollCss=function(f,g){var h;h=b[f.href]={};h.node=f;h.callback=g;m||("start css poll timer",o())};p.isCssLoaded=n})(KISSY);(function(b){var l=b.Env.host.document,m=b.Loader.Utils,e=b.Path,d={},n,j=b.UA;b.getScript=function(k,w,u){function i(){var o=g.readyState;if(!o||"loaded"===o||"complete"===o){g.onreadystatechange=g.onload=null,x(0)}}var t=w,c=0,p,h,f,y;b.startsWith(e.extname(k).toLowerCase(),".css")&&(c=1);b.isPlainObject(t)&&(w=t.success,p=t.error,h=t.timeout,u=t.charset,f=t.attrs);t=d[k]=d[k]||[];t.push([w,p]);if(1<t.length){return t.node}var g=l.createElement(c?"link":"script");f&&b.each(f,function(q,o){g.setAttribute(o,q)});u&&(g.charset=u);c?(g.href=k,g.rel="stylesheet"):(g.src=k,g.async=!0);t.node=g;var x=function(o){var q;if(y){y.cancel();y=void 0}b.each(d[k],function(r){(q=r[o])&&q.call(g)});delete d[k]},w="onload" in g,u=b.Config.forceCssPoll||j.webkit&&536>j.webkit;c&&u&&w&&(w=!1);w?(g.onload=i,g.onerror=function(){g.onerror=null;x(1)}):c?m.pollCss(g,function(){x(0)}):g.onreadystatechange=i;h&&(y=b.later(function(){x(1)},1000*h));n||(n=m.docHead());c?n.appendChild(g):n.insertBefore(g,n.firstChild);return g}})(KISSY);(function(r,n){function o(c){c=c.replace(/\\/g,"/");"/"!==c.charAt(c.length-1)&&(c+="/");m?c=m.resolve(c):(r.startsWith(c,"file:")||(c="file:"+c),c=new r.Uri(c));return c}var j=r.Loader,e=j.Utils,p=r.Env.host.location,m,d,q=r.Config.fns;if(!r.UA.nodejs&&p&&(d=p.href)){m=new r.Uri(d)}r.Config.loadModsFn=function(f,g){r.getScript(f.fullpath,g)};q.packages=function(f){var k,i=this.Config,g=i.packages=i.packages||{};return f?(r.each(f,function(c,l){k=c.name||l;var h=o(c.base||c.path);c.name=k;c.base=h.toString();c.baseUri=h;c.runtime=r;delete c.path;g[k]?g[k].reset(c):g[k]=new j.Package(c)}),n):!1===f?(i.packages={},n):g};q.modules=function(f){var g=this;f&&r.each(f,function(c,i){var h=e.createModuleInfo(g,i,c);h.status===j.Status.INIT&&r.mix(h,c)})};q.base=function(f){var c=this.Config;if(!f){return c.base}f=o(f);c.base=f.toString();c.baseUri=f;return n}})(KISSY);(function(L,F){function G(g,r,q,o,l){var n=r&&r.length,d=[],h=[];L.each(r,function(f){var b,e={timeout:l,success:function(){h.push(f);b&&t&&("standard browser get mod name after load : "+b.name,I.registerModule(g,b.name,t.factory,t.config),t=F);--n||q(h,d)},error:function(){d.push(f);--n||q(h,d)},charset:o};f.combine||(b=f.mods[0],"css"===b.getType()?b=F:E&&(x=b.name,p=L.now(),e.attrs={"data-mod-name":b.name}));L.Config.loadModsFn(f,e)})}function D(c,e){L.mix(this,{runtime:c,waitingModules:e})}function B(e,d){if(!e&&"function"===typeof d&&1<d.length){var f=I.getRequiresFromFn(d);f.length&&(e=e||{},e.requires=f)}else{e&&e.requires&&!e.cjs&&(e.cjs=0)}return e}function J(f,e){for(var f=f.split(/\//),e=e.split(/\//),g=Math.min(f.length,e.length),h=0;h<g&&f[h]===e[h];h++){}return f.slice(0,h).join("/")+"/"}var E=10>L.UA.ieMode,A=L.Loader,K=A.Status,I=A.Utils,z=I.getHash,H=K.LOADING,u=K.LOADED,C=K.READY_TO_ATTACH,y=K.ERROR,w=L.now();D.groupTag=w;var t,x,p;D.add=function(g,o,n,l,h){if(3===h&&L.isArray(o)){var k=o,o=n,n={requires:k,cjs:1}}if("function"===typeof g||1===h){if(n=o,o=g,n=B(n,o),E){for(var g=L.Env.host.document.getElementsByTagName("script"),d,h=g.length-1;0<=h;h--){if(k=g[h],"interactive"===k.readyState){d=k;break}}d?d=d.getAttribute("data-mod-name"):("can not find interactive script,time diff : "+(L.now()-p),"old_ie get mod name from cache : "+x,d=x);I.registerModule(l,d,o,n);x=null;p=0}else{t={factory:o,config:n}}}else{E?(x=null,p=0):t=F,n=B(n,o),I.registerModule(l,g,o,n)}};L.augment(D,{use:function(d){var g=L.Config.timeout,f=this.runtime,d=L.keys(this.calculate(d));I.createModulesInfo(f,d);d=this.getComboUrls(d);L.each(d.css,function(c){G(f,c,function(e,h){L.each(e,function(i){L.each(i.mods,function(j){I.registerModule(f,j.name,L.noop);j.notifyAll()})});L.each(h,function(i){L.each(i.mods,function(b){b.name+" is not loaded! can not find module in path : "+i.fullpath;"error";b.status=y;b.notifyAll()})})},c.charset,g)});L.each(d.js,function(c){G(f,c,function(){L.each(c,function(e){L.each(e.mods,function(b){b.factory||(b.name+" is not loaded! can not find module in path : "+e.fullpath,"error",b.status=y);b.notifyAll()})})},c.charset,g)})},calculate:function(s,r,q){var o,n,l,d,j=this.waitingModules,e=this.runtime,q=q||{},r=r||{};for(o=0;o<s.length;o++){n=s[o],r[n]||(r[n]=1,l=I.createModuleInfo(e,n),d=l.status,d>=C||(d!==u&&!j.contains(n)&&(d!==H&&(l.status=H,q[n]=1),l.wait(function(b){j.remove(b.name);j.notifyAll()}),j.add(n)),this.calculate(l.getNormalizedRequires(),r,q)))}return q},getComboMods:function(W,U){for(var T={},S,R=this.runtime,M=0,Q=W.length,P,O,N,d,q,X,c,Z,Y;M<Q;++M){P=W[M];P=I.createModuleInfo(R,P);N=P.getType();Y=P.getFullPath();O=P.getPackage();c=O.name;q=O.getCharset();d=O.getTag();Z=O.getGroup();X=O.getPrefixUriForCombo();S=O.getPackageUri();var V=c;(P.canBeCombined=O.isCombine()&&L.startsWith(Y,X))&&Z?(V=Z+"_"+q+"_"+w,(O=U[V])?O.isSameOriginAs(S)?O.setPath(J(O.getPath(),S.getPath())):(V=c,U[c]=S):U[V]=S.clone()):U[c]=S;S=T[N]=T[N]||{};(N=S[V])?1===N.tags.length&&N.tags[0]===d||N.tags.push(d):(N=S[V]=[],N.charset=q,N.tags=[d]);N.push(P)}return T},getComboUrls:function(ag){var af=this.runtime.Config,ae=af.comboPrefix,ad=af.comboSep,ac=af.comboMaxFileNum,af=af.comboMaxUrlLength,ab={},ag=this.getComboMods(ag,ab),aa={},Z;for(Z in ag){aa[Z]={};for(var X in ag[Z]){var Y=[],W=[],V=ag[Z][X],T=V.tags,U=(T=1<T.length?z(T.join("")):T[0])?"?t="+encodeURIComponent(T)+"."+Z:"",T=U.length,M=ab[X].toString(),P=M.length,N=M+ae,R=aa[Z][X]=[],M=N.length;R.charset=V.charset;R.mods=[];for(var m=function(){R.push({combine:1,fullpath:N+Y.join(ad)+U,mods:W})},Q=0;Q<V.length;Q++){var S=V[Q];R.mods.push(S);var O=S.getFullPath();if(S.canBeCombined){if(O=O.slice(P).replace(/\?.*$/,""),Y.push(O),W.push(S),Y.length>ac||M+Y.join(ad).length+T>af){Y.pop(),W.pop(),m(),Y=[],W=[],Q--}}else{R.push({combine:0,fullpath:O,mods:[S]})}}Y.length&&m()}}return aa}});A.ComboLoader=D})(KISSY);(function(d,n){function o(c){d.mix(this,{fn:c,waitMods:{}})}var j=d.Loader,e=d.Env,p=j.Utils,m=d.setImmediate,b=j.ComboLoader;o.prototype={constructor:o,notifyAll:function(){var c=this.fn;c&&d.isEmptyObject(this.waitMods)&&(this.fn=null,c())},add:function(c){this.waitMods[c]=1},remove:function(c){delete this.waitMods[c]},contains:function(c){return this.waitMods[c]}};j.WaitingModules=o;d.mix(d,{add:function(g,i,h){b.add(g,i,h,d,arguments.length)},use:function(v,u){function r(){++c;var q=[],i=d.now(),k;k=p.checkModsLoadRecursively(t,d,n,q);c+" check duration "+(d.now()-i);k?(p.attachModsRecursively(t,d),u&&(g?w():m(w))):q.length?l&&(g?l.apply(d,q):m(function(){l.apply(d,q)})):(c+" reload "+v,f.fn=r,h.use(t))}var t,h,l,g,c=0,w,f=new o(r);d.isPlainObject(u)&&(g=u.sync,l=u.error,u=u.success);w=function(){u.apply(d,p.getModules(d,v))};v=p.getModNamesAsArray(v);v=p.normalizeModNamesWithAlias(d,v);t=p.unalias(d,v);h=new b(d,f);g?f.notifyAll():m(function(){f.notifyAll()});return d},require:function(c,h){if(c){var g=p.unalias(d,p.normalizeModNamesWithAlias(d,[c],h));p.attachModsRecursively(g,d);return p.getModules(d,g)[1]}}});e.mods={}})(KISSY);(function(t){function o(h){var k=h.src||"";if(!k.match(q)){return 0}var h=(h=h.getAttribute("data-config"))?(new Function("return "+h))():{},c=h.comboPrefix||n,b=h.comboSep||e,l,d=k.indexOf(c);-1===d?l=k.replace(s,"$1"):(l=k.substring(0,d),"/"!==l.charAt(l.length-1)&&(l+="/"),c=k.substring(d+c.length).split(b),t.each(c,function(f){if(f.match(q)){return l+=f.replace(s,"$1"),!1}}));"tag" in h||(c=k.lastIndexOf("?"),-1!==c&&(k=k.substring(c+1),h.tag=j.getHash(r+k)));h.base=h.base||l;return h}function p(){var f=m.getElementsByTagName("script"),d,g;for(d=f.length-1;0<=d;d--){if(g=o(f[d])){return g}}"must load kissy by file name in browser environment: seed.js or seed-min.js";"error";return null}var m=t.Env.host&&t.Env.host.document,j=t.Loader.Utils,r="20131209235315",n="??",e=",",s=/^(.*)(seed|kissy)(?:-min)?\.js[^/]*/i,q=/(seed|kissy)(?:-min)?\.js/i;t.config({comboPrefix:n,comboSep:e,charset:"utf-8",lang:"zh-cn",tag:r});t.UA.nodejs?t.config({charset:"utf-8",base:__dirname.replace(/\\/g,"/").replace(/\/$/,"")+"/"}):m&&m.getElementsByTagName&&t.config(t.mix({comboMaxUrlLength:2000,comboMaxFileNum:40},p()))})(KISSY);KISSY.add("i18n",{alias:function(b,c){return c+"/i18n/"+b.Config.lang}});(function(a,g){function f(){if(!b){c&&!k.nodejs&&q(i,j,f);b=1;for(var e=0;e<d.length;e++){try{d[e](a)}catch(g){g.stack||g,"error",setTimeout(function(){throw g},0)}}}}var i=a.Env.host,k=a.UA,c=i.document,h=c&&c.documentElement,l=i.location,b=0,d=[],m=/^#?([\w-]+)$/,e=/\S/,r=!(!c||!c.addEventListener),j="load",n=r?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},q=r?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)};a.mix(a,{isWindow:function(a){return null!=a&&a==a.window},parseXML:function(a){if(a.documentElement){return a}var b;try{i.DOMParser?b=(new DOMParser).parseFromString(a,"text/xml"):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a))}catch(c){"parseXML error :",c,b=g}(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)&&"Invalid XML: "+a;return b},globalEval:function(a){a&&e.test(a)&&(i.execScript?i.execScript(a):i.eval.call(i,a))},ready:function(c){if(b){try{c(a)}catch(e){e.stack||e,"error",setTimeout(function(){throw e},0)}}else{d.push(c)}return this},available:function(b,d){var b=(b+"").match(m)[1],e=1,f=a.later(function(){if(500<++e){f.cancel()}else{var a=c.getElementById(b);a&&(d(a),f.cancel())}},40,!0)}});if(l&&-1!==(l.search||"").indexOf("ks-debug")){a.Config.debug=!0}(function(){if(!c||"complete"===c.readyState){f()}else{if(n(i,j,f),r){var a=function(){q(c,"DOMContentLoaded",a);f()};n(c,"DOMContentLoaded",a)}else{var b=function(){"complete"===c.readyState&&(q(c,"readystatechange",b),f())};n(c,"readystatechange",b);var d,e=h&&h.doScroll;try{d=null===i.frameElement}catch(g){d=!1}if(e&&d){var k=function(){try{e("left"),f()}catch(a){setTimeout(k,40)}};k()}}}})();if(k.ie){try{c.execCommand("BackgroundImageCache",!1,!0)}catch(s){}}})(KISSY,void 0);(function(b){b.config({modules:{core:{alias:"dom,event,io,anim,base,node,json,ua,cookie".split(",")},ajax:{alias:"io"},"rich-base":{alias:"base"}}});if("undefined"!==typeof location){var c=b.startsWith(location.href,"https")?"https://s.tbcdn.cn/s/kissy/":"http://a.tbcdn.cn/s/kissy/";b.config({packages:{gallery:{base:c},mobile:{base:c}}})}})(KISSY);(function(b,c,d){b({"anim/transition?":{alias:KISSY.Features.isTransitionSupported()?"anim/transition":""}});b({anim:{requires:["anim/base","anim/timer","anim/transition?"]}});b({"anim/base":{requires:["dom","promise"]}});b({"anim/timer":{requires:["dom","anim/base"]}});b({"anim/transition":{requires:["dom","event/dom","anim/base"]}});b({attribute:{requires:["event/custom"]}});b({base:{requires:["attribute"]}});b({button:{requires:["node","component/control"]}});b({color:{requires:["attribute"]}});b({combobox:{requires:["node","component/control","menu","attribute","io"]}});b({"component/container":{requires:["component/control","component/manager"]}});b({"component/control":{requires:["node","base","promise","component/manager","xtemplate/runtime"]}});b({"component/extension/align":{requires:["node"]}});b({"component/extension/content-render":{requires:["component/extension/content-xtpl"]}});b({"component/extension/delegate-children":{requires:["node","component/manager"]}});b({"component/plugin/drag":{requires:["dd"]}});b({"component/plugin/resize":{requires:["resizable"]}});b({"date/format":{requires:["date/gregorian","i18n!date"]}});b({"date/gregorian":{requires:["i18n!date"]}});b({"date/picker":{requires:["node","date/gregorian","i18n!date/picker","component/control","date/format"]}});b({"date/popup-picker":{requires:["date/picker/picker-xtpl","date/picker","component/extension/shim","component/extension/align"]}});b({dd:{requires:["node","base"]}});b({"dd/plugin/constrain":{requires:["node","base"]}});b({"dd/plugin/proxy":{requires:["node","dd","base"]}});b({"dd/plugin/scroll":{requires:["node","dd","base"]}});b({"dom/basic":{alias:["dom/base",c.isIELessThan(9)?"dom/ie":"",c.isClassListSupported()?"":"dom/class-list"]},dom:{alias:["dom/basic",!c.isQuerySelectorSupported()?"dom/selector":""]}});b({"dom/class-list":{requires:["dom/base"]}});b({"dom/ie":{requires:["dom/base"]}});b({"dom/selector":{requires:["dom/basic"]}});b({editor:{requires:["node","html-parser","component/control"]}});b({event:{requires:["event/dom","event/custom"]}});b({"event/custom":{requires:["event/base"]}});b({"event/dom":{alias:["event/dom/base",c.isTouchGestureSupported()?"event/dom/touch":"",c.isDeviceMotionSupported()?"event/dom/shake":"",c.isHashChangeSupported()?"":"event/dom/hashchange",c.isIELessThan(9)?"event/dom/ie":"",d.ie?"":"event/dom/focusin"]}});b({"event/dom/base":{requires:["event/base","dom"]}});b({"event/dom/focusin":{requires:["event/dom/base"]}});b({"event/dom/hashchange":{requires:["event/dom/base","dom"]}});b({"event/dom/ie":{requires:["event/dom/base","dom"]}});b({"event/dom/shake":{requires:["event/dom/base"]}});b({"event/dom/touch":{requires:["event/dom/base","dom"]}});b({"filter-menu":{requires:["menu","component/extension/content-xtpl","component/extension/content-render"]}});b({io:{requires:["dom","event/custom","promise","event/dom"]}});b({kison:{requires:["base"]}});b({menu:{requires:"node,component/container,component/extension/delegate-children,component/control,component/extension/content-render,component/extension/content-xtpl,component/extension/align,component/extension/shim".split(",")}});b({menubutton:{requires:["node","button","component/extension/content-xtpl","component/extension/content-render","menu"]}});b({mvc:{requires:["io","json","attribute","node"]}});b({node:{requires:["dom","event/dom","anim"]}});b({overlay:{requires:"component/container,component/extension/shim,component/extension/align,node,component/extension/content-xtpl,component/extension/content-render".split(",")}});b({resizable:{requires:["node","base","dd"]}});b({"resizable/plugin/proxy":{requires:["node","base"]}});b({"scroll-view":{alias:c.isTouchGestureSupported()?"scroll-view/drag":"scroll-view/base"}});b({"scroll-view/base":{requires:["node","anim","component/container","component/extension/content-render"]}});b({"scroll-view/drag":{requires:["scroll-view/base","node","anim"]}});b({"scroll-view/plugin/pull-to-refresh":{requires:["base"]}});b({"scroll-view/plugin/scrollbar":{requires:["base","node","component/control"]}});b({separator:{requires:["component/control"]}});b({"split-button":{requires:["component/container","button","menubutton"]}});b({stylesheet:{requires:["dom"]}});b({swf:{requires:["dom","json","attribute"]}});b({tabs:{requires:["component/container","toolbar","button"]}});b({toolbar:{requires:["component/container","component/extension/delegate-children","node"]}});b({tree:{requires:["node","component/container","component/extension/content-xtpl","component/extension/content-render","component/extension/delegate-children"]}});b({xtemplate:{requires:["xtemplate/runtime","xtemplate/compiler"]}});b({"xtemplate/compiler":{requires:["xtemplate/runtime"]}});b({"xtemplate/nodejs":{requires:["xtemplate"]}});b({"xtemplate/runtime":{requires:["path"]}})})(function(b){KISSY.config("modules",b)},KISSY.Features,KISSY.UA);(function(d){d.add("ua",function(){return d.UA});d.add("uri",function(){return d.Uri});d.add("path",function(){return d.Path});var n=d.UA,o=d.Env.host,j=(n.nodejs&&"object"===typeof global?global:o).JSON;9>n.ieMode&&(j=null);if(j){d.add("json",function(){return d.JSON=j}),d.parseJson=function(c){return j.parse(c)}}else{var e=/^[\],:{}\s]*$/,p=/(?:^|:|,)(?:\s*\[)+/g,m=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,b=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;d.parseJson=function(c){return null===c?c:"string"===typeof c&&(c=d.trim(c))&&e.test(c.replace(m,"@").replace(b,"]").replace(p,""))?(new Function("return "+c))():d.error("Invalid Json: "+c)}}d.UA.nodejs&&(d.KISSY=d,module.exports=d)})(KISSY);KISSY.add("io/form-serializer",["dom"],function(o,n){function j(c){return c.replace(l,"\r\n")}var e=n("dom"),m=/^(?:select|textarea)/i,l=/\r?\n/g,b,p=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i;return b={serialize:function(f,d){return o.param(b.getFormData(f),void 0,void 0,d||!1)},getFormData:function(c){var d=[],f={};o.each(e.query(c),function(g){g=g.elements?o.makeArray(g.elements):[g];d.push.apply(d,g)});d=o.filter(d,function(g){return g.name&&!g.disabled&&(g.checked||m.test(g.nodeName)||p.test(g.type))});o.each(d,function(h){var i=e.val(h),g;null!==i&&(i=o.isArray(i)?o.map(i,j):j(i),(g=f[h.name])?(g&&!o.isArray(g)&&(g=f[h.name]=[g]),g.push.apply(g,o.makeArray(i))):f[h.name]=i)});return f}}});KISSY.add("io/base",["event/custom","promise"],function(x,v){function s(d){var f=d.context;delete d.context;d=x.mix(x.clone(r),d,{deep:!0});d.context=f||d;var c,e=d.type,g=d.dataType,f=d.uri=b.resolve(d.url);d.uri.setQuery("");"crossDomain" in d||(d.crossDomain=!d.uri.isSameOriginAs(b));e=d.type=e.toUpperCase();d.hasContent=!w.test(e);if(d.processData&&(c=d.data)&&"string"!==typeof c){d.data=x.param(c,void 0,void 0,d.serializeArray)}g=d.dataType=x.trim(g||"*").split(y);!("cache" in d)&&x.inArray(g[0],["script","jsonp"])&&(d.cache=!1);d.hasContent||(d.data&&f.query.add(x.unparam(d.data)),!1===d.cache&&f.query.set("_ksTS",x.now()+"_"+x.guid()));return d}function q(D){var E=this;if(!(E instanceof q)){return new q(D)}t.call(E);D=s(D);x.mix(E,{responseData:null,config:D||{},timeoutTimer:null,responseText:null,responseXML:null,responseHeadersString:"",responseHeaders:null,requestHeaders:{},readyState:0,state:0,statusText:null,status:0,transport:null});t.Defer(E);var C;q.fire("start",{ajaxConfig:D,io:E});C=new (o[D.dataType[0]]||o["*"])(E);E.transport=C;D.contentType&&E.setRequestHeader("Content-Type",D.contentType);var k=D.dataType[0],B,i=D.timeout,h=D.context,m=D.headers,A=D.accepts;E.setRequestHeader("Accept",k&&A[k]?A[k]+("*"===k?"":", */*; q=0.01"):A["*"]);for(B in m){E.setRequestHeader(B,m[B])}if(D.beforeSend&&!1===D.beforeSend.call(h,E,D)){return E}E.readyState=1;q.fire("send",{ajaxConfig:D,io:E});D.async&&0<i&&(E.timeoutTimer=setTimeout(function(){E.abort("timeout")},1000*i));try{E.state=1,C.send()}catch(d){2>E.state?(d.stack||d,"error",setTimeout(function(){throw d},0),E._ioReady(-1,d.message)):d}return E}var u=v("event/custom"),t=v("promise"),z=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,y=/\s+/,p=function(c){return c},w=/^(?:GET|HEAD)$/,b=new x.Uri((x.Env.host.location||{}).href),z=b&&z.test(b.getScheme()),o={},r={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0,serializeArray:!0,processData:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},converters:{text:{json:x.parseJson,html:p,text:p,xml:x.parseXML}},headers:{},responseType: false,contents:{xml:/xml/,html:/html/,json:/json/,blob:/image/}};r.converters.html=r.converters.text;x.mix(q,u.Target);x.mix(q,{isLocal:z,setupConfig:function(c){x.mix(r,c,{deep:!0})},setupTransport:function(c,d){o[c]=d},getTransport:function(c){return o[c]},getConfig:function(){return r}});return q});KISSY.add("io/xhr-transport-base",["./base"],function(t,r){function o(d,e){try{return new (e||p).XMLHttpRequest}catch(c){}}function m(c){var d;c.ifModified&&(d=c.uri,!1===c.cache&&(d=d.clone(),d.query.remove("_ksTS")),d=d.toString());return d}var q=r("./base"),p=t.Env.host,v=7<t.UA.ieMode&&p.XDomainRequest,u={proto:{}},j={},s={};q.__lastModifiedCached=j;q.__eTagCached=s;u.nativeXhr=p.ActiveXObject?function(e,f){var d;if(!b&&e&&v){d=new v}else{if(!(d=!q.isLocal&&o(e,f))){v:{try{d=new (f||p).ActiveXObject("Microsoft.XMLHTTP");break v}catch(g){}d=void 0}}}return d}:o;u.XDomainRequest_=v;var b=u.supportCORS="withCredentials" in u.nativeXhr();t.mix(u.proto,{sendInternal:function(){var l=this,B=l.io,C=B.config,k=l.nativeXhr,y=C.files,z=y?"post":C.type,A=C.async,n,H=B.mimeType,d=B.requestHeaders||{},B=B._getUrlForSend(),G=m(C),e,F;if(G){if(e=j[G]){d["If-Modified-Since"]=e}if(e=s[G]){d["If-None-Match"]=e}}(n=C.username)?k.open(z,B,A,n,C.password):k.open(z,B,A);z=C.xhrFields||{};"withCredentials" in z&&(b||delete z.withCredentials);for(F in z){try{k[F]=z[F]}catch(D){D}}H&&k.overrideMimeType&&k.overrideMimeType(H);!1===d["X-Requested-With"]&&delete d["X-Requested-With"];if("undefined"!==typeof k.setRequestHeader){for(F in d){k.setRequestHeader(F,d[F])}}var E=C.hasContent&&C.data||null;y&&(H=E,d={},H&&(d=t.unparam(H)),d=t.mix(d,y),E=new FormData,t.each(d,function(f,c){t.isArray(f)?t.each(f,function(g){E.append(c+(C.serializeArray?"[]":""),g)}):E.append(c,f)}));if(C.responseType){k.responseType=C.responseType;}k.send(E);!A||4===k.readyState?l._callback():v&&k instanceof v?(k.onload=function(){k.readyState=4;k.status=200;l._callback()},k.onerror=function(){k.readyState=4;k.status=500;l._callback()}):k.onreadystatechange=function(){l._callback()}},abort:function(){this._callback(0,1)},_callback:function(l,C){var E=this.nativeXhr,g=this.io,A,k,B,z,J,R,d=g.config;try{if(C||4===E.readyState){if(v&&E instanceof v?(E.onerror=t.noop,E.onload=t.noop):E.onreadystatechange=t.noop,C){4!==E.readyState&&E.abort()}else{A=m(d);var I=E.status;v&&E instanceof v||(g.responseHeadersString=E.getAllResponseHeaders());A&&(k=E.getResponseHeader("Last-Modified"),B=E.getResponseHeader("ETag"),k&&(j[A]=k),B&&(s[B]=B));if((R=E.response)&&E.responseType&&E.responseType==='blob'){g.responseData=R}else{if((J=E.responseXML)&&J.documentElement){g.responseXML=J}var e=g.responseText=E.responseText;if(d.files&&e){var H,F;if(-1!==(H=e.indexOf("<body>"))){F=e.lastIndexOf("</body>"),-1===F&&(F=e.length),e=e.slice(H+6,F)}g.responseText=t.unEscapeHtml(e)}}try{z=E.statusText}catch(G){"xhr statusText error: ",G,z=""}!I&&q.isLocal&&!d.crossDomain?I=g.responseText?200:404:1223===I&&(I=204);g._ioReady(I,z)}}}catch(D){D.stack||D,"error",setTimeout(function(){throw D},0),E.onreadystatechange=t.noop,C||g._ioReady(-1,D)}}});return u});KISSY.add("io/xdr-flash-transport",["./base","dom"],function(t,r){function o(e,f,c){b||(b=!0,e='<object id="'+u+'" type="application/x-shockwave-flash" data="'+e+'" width="0" height="0"><param name="movie" value="'+e+'" /><param name="FlashVars" value="yid='+f+"&uid="+c+'&host=KISSY.IO" /><param name="allowScriptAccess" value="always" /></object>',f=s.createElement("div"),p.prepend(f,s.body||s.documentElement),f.innerHTML=e)}function m(c){"use XdrFlashTransport for: "+c.config.url;this.io=c}var q=r("./base"),p=r("dom"),v={},u="io_swf",j,s=t.Env.host.document,b=!1;t.augment(m,{send:function(){var g=this,f=g.io,d=f.config;o((d.xdr||{}).src||t.Config.base+"io/assets/io.swf",1,1);j?(g._uid=t.guid(),v[g._uid]=g,j.send(f._getUrlForSend(),{id:g._uid,uid:g._uid,method:d.type,data:d.hasContent&&d.data||{}})):setTimeout(function(){g.send()},200)},abort:function(){j.abort(this._uid)},_xdrResponse:function(y,x){var f,w=x.id,i,k=x.c,n=this.io;if(k&&(i=k.responseText)){n.responseText=decodeURI(i)}switch(y){case"success":f={status:200,statusText:"success"};delete v[w];break;case"abort":delete v[w];break;case"timeout":case"transport error":case"failure":delete v[w],f={status:"status" in k?k.status:500,statusText:k.statusText||y}}f&&n._ioReady(f.status,f.statusText)}});q.applyTo=function(f,h,d){var f=h.split(".").slice(1),g=q;t.each(f,function(c){g=g[c]});g.apply(null,d)};q.xdrReady=function(){j=s.getElementById(u)};q.xdrResponse=function(g,f){var d=v[f.uid];d&&d._xdrResponse(g,f)};return m});KISSY.add("io/sub-domain-transport",["event/dom","dom","./xhr-transport-base"],function(p,o){function j(d){var f=d.config;this.io=d;f.crossDomain=!1;"use SubDomainTransport for: "+f.url}function e(){var c=this.io.config.uri.getHostname(),c=b[c];c.ready=1;n.detach(c.iframe,"load",e,this);this.send()}var n=o("event/dom"),m=o("dom"),r=o("./xhr-transport-base"),q=p.Env.host.document,b={};p.augment(j,r.proto,{send:function(){var g=this.io.config,h=g.uri,d=h.getHostname(),f;f=b[d];var c="/sub_domain_proxy.html";g.xdr&&g.xdr.subDomain&&g.xdr.subDomain.proxy&&(c=g.xdr.subDomain.proxy);f&&f.ready?(this.nativeXhr=r.nativeXhr(0,f.iframe.contentWindow))?this.sendInternal():"document.domain not set correctly!":(f?g=f.iframe:(f=b[d]={},g=f.iframe=q.createElement("iframe"),m.css(g,{position:"absolute",left:"-9999px",top:"-9999px"}),m.prepend(g,q.body||q.documentElement),f=new p.Uri,f.setScheme(h.getScheme()),f.setPort(h.getPort()),f.setHostname(d),f.setPath(c),g.src=f.toString()),n.on(g,"load",e,this))}});return j});KISSY.add("io/xhr-transport",["./base","./xhr-transport-base","./xdr-flash-transport","./sub-domain-transport"],function(p,o){function j(g){var i=g.config,d=i.crossDomain,f=i.xdr||{},c=f.subDomain=f.subDomain||{};this.io=g;if(d&&!n.supportCORS){var h=i.uri.getHostname();if(q.domain&&p.endsWith(h,q.domain)&&!1!==c.proxy){return new r(g)}if("flash"===""+f.use||!b){return new m(g)}}g=this.nativeXhr=n.nativeXhr(d);"crossDomain: "+d+", use "+(b&&g instanceof b?"XDomainRequest":"XhrTransport")+" for: "+i.url;return this}var e=o("./base"),n=o("./xhr-transport-base"),m=o("./xdr-flash-transport"),r=o("./sub-domain-transport"),q=p.Env.host.document,b=n.XDomainRequest_;p.augment(j,n.proto,{send:function(){this.sendInternal()}});e.setupTransport("*",j);return e});KISSY.add("io/script-transport",["./base"],function(g,e){function c(i){var f=i.config;if(!f.crossDomain){return new (b.getTransport("*"))(i)}this.io=i;"use ScriptTransport for: "+f.url;return this}var b=e("./base");b.setupConfig({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{text:{script:function(d){g.globalEval(d);return d}}}});g.augment(c,{send:function(){var i=this,f=i.io,d=f.config;i.script=g.getScript(f._getUrlForSend(),{charset:d.scriptCharset,success:function(){i._callback("success")},error:function(){i._callback("error")}})},_callback:function(j,i){var f=this.io;this.script&&(this.script=void 0,i||("error"!==j?f._ioReady(200,"success"):"error"===j&&f._ioReady(500,"script error")))},abort:function(){this._callback(0,1)}});b.setupTransport("script",c);return b});KISSY.add("io/jsonp",["./base"],function(g,e){var c=e("./base"),b=g.Env.host;c.setupConfig({jsonp:"callback",jsonpCallback:function(){return g.guid("jsonp")}});c.on("start",function(j){var i=j.io,f=i.config,j=f.dataType;if("jsonp"===j[0]){delete f.contentType;var o,d=f.jsonpCallback,k="function"===typeof d?d():d,m=b[k];f.uri.query.set(f.jsonp,k);b[k]=function(h){1<arguments.length&&(h=g.makeArray(arguments));o=[h]};i.fin(function(){b[k]=m;if(void 0===m){try{delete b[k]}catch(h){}}else{o&&m(o[0])}});i=f.converters;i.script=i.script||{};i.script.json=function(){o||" not call jsonpCallback: "+k;return o[0]};j.length=2;j[0]="script";j[1]="json"}});return c});KISSY.add("io/form",["./base","dom","./form-serializer"],function(n,m){var e=m("./base"),c=m("dom"),l=m("./form-serializer"),j=Array.prototype.slice,b=n.Env.host.FormData;e.on("start",function(t){var k,s,t=t.io.config;if(s=t.form){k=c.get(s);s=t.data;for(var g=!1,h={},p=c.query("input",k),u=0,d=p.length;u<d;u++){var r=p[u];if("file"===r.type.toLowerCase()){g=!0;if(!b){break}var q=j.call(r.files,0);h[c.attr(r,"name")]=1<q.length?q:q[0]||null}}g&&b&&(t.files=t.files||{},n.mix(t.files,h),delete t.contentType);!g||b?(k=l.getFormData(k),t.hasContent?(k=n.param(k,void 0,void 0,t.serializeArray),t.data=s?t.data+("&"+k):k):t.uri.query.add(k)):(s=t.dataType,t=s[0],"*"===t&&(t="text"),s.length=2,s[0]="iframe",s[1]=t)}});return e});KISSY.add("io/iframe-transport",["dom","./base","event/dom"],function(r,p){function m(d){var g=r.guid("io-iframe"),f=n.getEmptyIframeSrc(),d=d.iframe=n.create("<iframe "+(f?' src="'+f+'" ':"")+' id="'+g+'" name="'+g+'" style="position:absolute;left:-9999px;top:-9999px;"/>');n.prepend(d,b.body||b.documentElement);return d}function j(h,y,x){var d=[],v,w,u,l;r.each(h,function(c,e){v=r.isArray(c);w=r.makeArray(c);for(u=0;u<w.length;u++){l=b.createElement("input"),l.type="hidden",l.name=e+(v&&x?"[]":""),l.value=w[u],n.append(l,y),d.push(l)}});return d}function o(c){this.io=c;"use IframeTransport for: "+c.config.url}var n=p("dom"),t=p("./base"),s=p("event/dom"),b=r.Env.host.document,q=r.clone(t.getConfig().converters.text);q.json=function(c){return r.parseJson(r.unEscapeHtml(c))};t.setupConfig({converters:{iframe:q,text:{iframe:function(c){return c}},xml:{iframe:function(c){return c}}}});r.augment(o,{send:function(){function w(){s.on(k,"load error",u._callback,u);x.submit()}var u=this,h=u.io,v=h.config,i,k,c,d=v.data,x=n.get(v.form);u.attrs={target:n.attr(x,"target")||"",action:n.attr(x,"action")||"",encoding:n.attr(x,"encoding"),enctype:n.attr(x,"enctype"),method:n.attr(x,"method")};u.form=x;k=m(h);n.attr(x,{target:k.id,action:h._getUrlForSend(),method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data"});d&&(c=r.unparam(d));c&&(i=j(c,x,v.serializeArray));u.fields=i;6===r.UA.ie?setTimeout(w,0):w()},_callback:function(h){var w=this,d=w.form,c=w.io,h=h.type,u,v=c.iframe;if(v){if("abort"===h&&6===r.UA.ie?setTimeout(function(){n.attr(d,w.attrs)},0):n.attr(d,w.attrs),n.remove(this.fields),s.detach(v),setTimeout(function(){n.remove(v)},30),c.iframe=null,"load"===h){try{if((u=v.contentWindow.document)&&u.body){c.responseText=n.html(u.body),r.startsWith(c.responseText,"<?xml")&&(c.responseText=void 0)}c.responseXML=u&&u.XMLDocument?u.XMLDocument:u;u?c._ioReady(200,"success"):c._ioReady(500,"parser error")}catch(k){c._ioReady(500,"parser error")}}else{"error"===h&&c._ioReady(500,"error")}}},abort:function(){this._callback({type:"abort"})}});t.setupTransport("iframe",o);return t});KISSY.add("io/methods",["promise","./base"],function(m,l){function c(x){var v=x.responseText,s=x.responseXML,u=x.config,q=u.converters,t,o,w=u.contents,p=u.dataType;if(u.responseType==='blob' && x.responseData){return}for(u=x.mimeType||x.getResponseHeader("Content-Type");"*"===p[0];){p.shift()}if(!p.length){for(t in w){if(w[t].test(u)){p[0]!==t&&p.unshift(t);break}}}p[0]=p[0]||"text";if(v||s){for(t=0;t<p.length;t++){if("text"===p[t]&&void 0!==v){o=v;break}else{if("xml"===p[t]&&void 0!==s){o=s;break}}}if(!o){var n={text:v,xml:s};m.each(["text","xml"],function(g){var f=p[0];if(q[g]&&q[g][f]&&n[g]){return p.unshift(g),o="text"===g?v:s,!1}})}}w=p[0];for(u=1;u<p.length;u++){t=p[u];var d=q[w]&&q[w][t];if(!d){throw"no covert for "+w+" => "+t}o=d(o);w=t}x.responseData=o}var b=l("promise"),j=l("./base"),e=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg;m.extend(j,b,{setRequestHeader:function(d,f){this.requestHeaders[d]=f;return this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getResponseHeader:function(f){var h,g,f=f.toLowerCase();if(2===this.state){if(!(g=this.responseHeaders)){for(g=this.responseHeaders={};h=e.exec(this.responseHeadersString);){g[h[1].toLowerCase()]=h[2]}}h=g[f]}return void 0===h?null:h},overrideMimeType:function(d){this.state||(this.mimeType=d);return this},abort:function(d){d=d||"abort";this.transport&&this.transport.abort(d);this._ioReady(0,d);return this},getNativeXhr:function(){var d=this.transport;return d?d.nativeXhr:null},_ioReady:function(w,u){if(2!==this.state){this.state=2;this.readyState=4;var s;if(200<=w&&300>w||304===w){if(304===w){u="not modified",s=!0}else{try{c(this),u="success",s=!0}catch(q){q.stack||q,"error",setTimeout(function(){throw q},0),u="parser error"}}}else{0>w&&(w=0)}this.status=w;this.statusText=u;var p=this.defer,o=this.config,n;if(n=this.timeoutTimer){clearTimeout(n),this.timeoutTimer=0}n=s?"success":"error";var v,i=[this.responseData,u,this],t=o.context,g={ajaxConfig:o,io:this};(v=o[n])&&v.apply(t,i);(v=o.complete)&&v.apply(t,i);j.fire(n,g);j.fire("complete",g);p[s?"resolve":"reject"](i)}},_getUrlForSend:function(){var d=this.config,g=d.uri,f=m.Uri.getComponents(d.url).query||"";return g.toString.call(g,d.serializeArray)+(f?(g.query.has()?"&":"?")+f:f)}})});KISSY.add("io","io/form-serializer,io/base,io/xhr-transport,io/script-transport,io/jsonp,io/form,io/iframe-transport,io/methods".split(","),function(j,h){function c(l,g,m,i,k){if(typeof g==="function"){i=m;m=g;g=void 0}return e({type:k||"get",url:l,data:g,success:m,dataType:i})}var b=h("io/form-serializer"),e=h("io/base");h("io/xhr-transport");h("io/script-transport");h("io/jsonp");h("io/form");h("io/iframe-transport");h("io/methods");j.mix(e,{serialize:b.serialize,get:c,post:function(k,g,l,i){if(typeof g==="function"){i=l;l=g;g=void 0}return c(k,g,l,i,"post")},jsonp:function(g,f,i){if(typeof f==="function"){i=f;f=void 0}return c(g,f,i,"jsonp")},getScript:j.getScript,getJSON:function(g,f,i){if(typeof f==="function"){i=f;f=void 0}return c(g,f,i,"json")},upload:function(l,g,m,i,k){if(typeof m==="function"){k=i;i=m;m=void 0}return e({url:l,type:"post",dataType:k,form:g,data:m,success:i})}});j.mix(j,{Ajax:e,IO:e,ajax:e,io:e,jsonp:e.jsonp});return e});KISSY.add("dom/base/api",[],function(f){var d=f.Env.host||{},j=d.document,g=f.UA,c={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},i={isCustomDomain:function(e){var e=e||d,e=i.get(e),h=e.document.domain,e=e.location.hostname;return h!==e&&h!=="["+e+"]"},getEmptyIframeSrc:function(e){e=e||d;e=i.get(e);return g.ie&&i.isCustomDomain(e)?"javascript:void(function(){"+encodeURIComponent('document.open();document.domain="'+e.document.domain+'";document.close();')+"}())":""},NodeType:c,getWindow:function(b){if(!b){return d}b=i.get(b);if(f.isWindow(b)){return b}var e=b;e.nodeType!==c.DOCUMENT_NODE&&(e=b.ownerDocument);return e.defaultView||e.parentWindow},getDocument:function(b){if(!b){return j}b=i.get(b);return f.isWindow(b)?b.document:b.nodeType===c.DOCUMENT_NODE?b:b.ownerDocument},isDomNodeList:function(e){return e&&!e.nodeType&&e.item&&!e.setTimeout},nodeName:function(e){var h=i.get(e),e=h.nodeName.toLowerCase();g.ie&&(h=h.scopeName)&&"HTML"!==h&&(e=h.toLowerCase()+":"+e);return e},_RE_NUM_NO_PX:RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i")};f.mix(i,c);return i});KISSY.add("dom/base/attr",["./api"],function(I,D){function C(b){return null==b?"":b+""}function A(e,f){var f=H[f]||f,c=x[f];return c&&c.get?c.get(e,f):e[f]}var O=D("./api"),L=I.Env.host.document,E=O.NodeType,L=L&&L.documentElement,J=O.nodeName,P=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,G=/^(?:button|input|object|select|textarea)$/i,F=/^a(?:rea)?$/i,N=/:|^on/,M=/\r/g,K={},y={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1,scrollTop:1,scrollLeft:1},v={tabindex:{get:function(b){var c=b.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):G.test(b.nodeName)||F.test(b.nodeName)&&b.href?0:void 0}}},H={hidefocus:"hideFocus",tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},o={get:function(b,c){return O.prop(b,c)?c.toLowerCase():void 0},set:function(b,e,c){!1===e?O.removeAttr(b,c):(e=H[c]||c,e in b&&(b[e]=!0),b.setAttribute(c,c.toLowerCase()));return c}},x={},B={},u={select:{get:function(b){var g=b.selectedIndex,e=b.options,h;if(0>g){return null}if("select-one"===""+b.type){return O.val(e[g])}b=[];g=0;for(h=e.length;g<h;++g){e[g].selected&&b.push(O.val(e[g]))}return b},set:function(b,e){var c=I.makeArray(e);I.each(b.options,function(d){d.selected=I.inArray(O.val(d),c)});c.length||(b.selectedIndex=-1);return c}}};I.each(["radio","checkbox"],function(b){u[b]={get:function(c){return null===c.getAttribute("value")?"on":c.value},set:function(c,e){if(I.isArray(e)){return c.checked=I.inArray(O.val(c),e),1}}}});v.style={get:function(b){return b.style.cssText}};I.mix(O,{_valHooks:u,_propFix:H,_attrHooks:v,_propHooks:x,_attrNodeHook:B,_attrFix:K,prop:function(b,k,i){var l=O.query(b),h,j;if(I.isPlainObject(k)){I.each(k,function(c,e){O.prop(l,e,c)})}else{if(k=H[k]||k,j=x[k],void 0!==i){for(b=l.length-1;0<=b;b--){h=l[b],j&&j.set?j.set(h,i,k):h[k]=i}}else{if(l.length){return A(l[0],k)}}}},hasProp:function(b,k){var j=O.query(b),l,e=j.length,h;for(l=0;l<e;l++){if(h=j[l],void 0!==A(h,k)){return !0}}return !1},removeProp:function(b,k){var k=H[k]||k,i=O.query(b),l,h;for(l=i.length-1;0<=l;l--){h=i[l];try{h[k]=void 0,delete h[k]}catch(j){}}},attr:function(m,g,l,f){var b=O.query(m),h=b[0];if(I.isPlainObject(g)){var f=l,c;for(c in g){O.attr(b,c,g[c],f)}}else{if(f&&y[g]){return O[g](m,l)}g=g.toLowerCase();if(f&&y[g]){return O[g](m,l)}g=K[g]||g;m=P.test(g)?o:N.test(g)?B:v[g];if(void 0===l){if(h&&h.nodeType===E.ELEMENT_NODE){"form"===J(h)&&(m=B);if(m&&m.get){return m.get(h,g)}l=h.getAttribute(g);return""===l&&(g=h.getAttributeNode(g),!g||!g.specified)?void 0:null===l?void 0:l}}else{for(f=b.length-1;0<=f;f--){if((h=b[f])&&h.nodeType===E.ELEMENT_NODE){"form"===J(h)&&(m=B),m&&m.set?m.set(h,l,g):h.setAttribute(g,""+l)}}}}},removeAttr:function(k,l){var l=l.toLowerCase(),l=K[l]||l,j=O.query(k),i,b,f;for(f=j.length-1;0<=f;f--){if(b=j[f],b.nodeType===E.ELEMENT_NODE&&(b.removeAttribute(l),P.test(l)&&(i=H[l]||l) in b)){b[i]=!1}}},hasAttr:L&&!L.hasAttribute?function(h,b){var b=b.toLowerCase(),g=O.query(h),j,e;for(j=0;j<g.length;j++){if(e=g[j],(e=e.getAttributeNode(b))&&e.specified){return !0}}return !1}:function(h,b){var g=O.query(h),j,e=g.length;for(j=0;j<e;j++){if(g[j].hasAttribute(b)){return !0}}return !1},val:function(b,j){var l,g,k,h,d;if(void 0===j){if(k=O.get(b)){if((l=u[J(k)]||u[k.type])&&"get" in l&&void 0!==(g=l.get(k,"value"))){return g}g=k.value;return"string"===typeof g?g.replace(M,""):null==g?"":g}}else{g=O.query(b);for(h=g.length-1;0<=h;h--){k=g[h];if(1!==k.nodeType){break}d=j;null==d?d="":"number"===typeof d?d+="":I.isArray(d)&&(d=I.map(d,C));l=u[J(k)]||u[k.type];if(!l||!("set" in l)||void 0===l.set(k,d,"value")){k.value=d}}}},text:function(k,b){var l,h,g,j;if(void 0===b){return l=O.get(k),O._getText(l)}h=O.query(k);for(g=h.length-1;0<=g;g--){if(l=h[g],j=l.nodeType,j===E.ELEMENT_NODE){O.cleanData(l.getElementsByTagName("*")),"textContent" in l?l.textContent=b:l.innerText=b}else{if(j===E.TEXT_NODE||j===E.CDATA_SECTION_NODE){l.nodeValue=b}}}},_getText:function(b){return b.textContent}});return O});KISSY.add("dom/base/class",["./api"],function(j,f){function d(g){for(var g=j.trim(g||""),g=g.split(r),l=[],n,m=g.length,h=0;h<m;h++){(n=g[h])&&l.push(n)}return l}function c(b){return function(h,t){var s,n,q,m=h.classList,l=i.call(arguments,2);s=0;for(n=t.length;s<n;s++){(q=t[s])&&m[b].apply(m,[q].concat(l))}}}function p(b){return function(e,l){var h=d(l),g=i.call(arguments,2);o.query(e).each(function(m){m.nodeType===k.ELEMENT_NODE&&o[b].apply(o,[m,h].concat(g))})}}var o=f("./api"),i=[].slice,k=o.NodeType,r=/[\.\s]\s*\.?/;j.mix(o,{_hasClass:function(h,g){var q,n,l,m=h.classList;if(m.length){q=0;for(n=g.length;q<n;q++){if((l=g[q])&&!m.contains(l)){return !1}}return !0}return !1},_addClass:c("add"),_removeClass:c("remove"),_toggleClass:c("toggle"),hasClass:function(g,e){var h=o.get(g);return h&&h.nodeType===k.ELEMENT_NODE&&o._hasClass(h,d(e))},replaceClass:function(g,e,h){o.removeClass(g,e);o.addClass(g,h)},addClass:p("_addClass"),removeClass:p("_removeClass"),toggleClass:p("_toggleClass")});return o});KISSY.add("dom/base/create",["./api"],function(U,P){function O(b){b=b&&b!==S?b.createElement(Y):W;b===W&&(b.innerHTML="");return b}function M(b,e){var f=O(e);f.innerHTML="m<div>"+b+"</div>";return f.lastChild}function aa(b,g){if(g){if(J&&g.canHaveChildren&&"removeNode" in b){if(b.firstChild){b:{try{b.innerHTML="";break b}catch(h){}for(var e;e=b.lastChild;){aa(e,b)}}}b.removeNode(!1)}else{g.removeChild(b)}}}function X(b,g,h){var e=g.nodeType;if(e===R.DOCUMENT_FRAGMENT_NODE){g=g.childNodes;h=h.childNodes;for(e=0;g[e];){h[e]&&X(b,g[e],h[e]),e++}}else{if(e===R.ELEMENT_NODE){g=g.getElementsByTagName("*");h=h.getElementsByTagName("*");for(e=0;g[e];){h[e]&&b(g[e],h[e]),e++}}}}function Q(i,j){var g=U.require("event/dom"),e,h;if(j.nodeType!==R.ELEMENT_NODE||ab.hasData(i)){e=ab.data(i);for(h in e){ab.data(j,h,e[h])}g&&g.clone(i,j)}}function V(b){var g=null,h,e;if(b&&(b.push||b.item)&&b[0]){g=b[0].ownerDocument;g=g.createDocumentFragment();b=U.makeArray(b);h=0;for(e=b.length;h<e;h++){g.appendChild(b[h])}}else{"Unable to convert "+b+" to fragment."}return g}var ab=P("./api"),S=U.Env.host.document,R=ab.NodeType,Z=U.UA.ieMode,Y="div",W=S&&S.createElement(Y),K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,T=/^\s+/,o=/\s+$/,J=!!(Z&&9>Z),N=J,C=/<|&#?\w+;/,A=S&&"outerHTML" in S.documentElement,I=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;U.mix(ab,{create:function(k,i,l,j){var h=null;if(!k){return h}if(k.nodeType){return ab.clone(k)}if("string"!==typeof k){return h}void 0===j&&(j=!0);j&&(k=U.trim(k));var j=ab._creators,n,d,l=l||S,m,g=Y;if(C.test(k)){if(m=I.exec(k)){h=l.createElement(m[1])}else{k=k.replace(K,"<$1></$2>");if((m=G.exec(k))&&(n=m[1])){g=n.toLowerCase()}n=(j[g]||M)(k,l);N&&(d=k.match(T))&&n.insertBefore(l.createTextNode(d[0]),n.firstChild);N&&/\S/.test(k)&&(d=k.match(o))&&n.appendChild(l.createTextNode(d[0]));d=n.childNodes;1===d.length?h=d[0].parentNode.removeChild(d[0]):d.length?h=V(d):k+" : create node error"}}else{h=l.createTextNode(k)}k=h;U.isPlainObject(i)&&(k.nodeType===R.ELEMENT_NODE?ab.attr(k,i,!0):k.nodeType===R.DOCUMENT_FRAGMENT_NODE&&ab.attr(k.childNodes,i,!0));return k},_fixCloneAttributes:function(b,e){"textarea"===ab.nodeName(b)&&(e.defaultValue=b.defaultValue,e.value=b.value)},_creators:{div:M},_defaultCreator:M,html:function(p,q,l){var p=ab.query(p),i=p[0],n=!1,m,k;if(!i){return null}if(void 0===q){return i.nodeType===R.ELEMENT_NODE?i.innerHTML:i.nodeType===R.DOCUMENT_FRAGMENT_NODE?(l=O(i.ownerDocument),l.appendChild(i),l.innerHTML):null}q+="";if(!q.match(/<(?:script|style|link)/i)&&(!N||!q.match(T))&&!v[(q.match(G)||["",""])[1].toLowerCase()]){try{for(m=p.length-1;0<=m;m--){k=p[m],k.nodeType===R.ELEMENT_NODE&&(ab.cleanData(k.getElementsByTagName("*")),k.innerHTML=q)}n=!0}catch(j){}}n||(q=ab.create(q,0,i.ownerDocument,0),ab.empty(p),ab.append(q,p,l))},outerHtml:function(i,j,g){var i=ab.query(i),e=i.length,h=i[0];if(!h){return null}if(void 0===j){if(A&&h.nodeType!==ab.DOCUMENT_FRAGMENT_NODE){return h.outerHTML}j=O(h.ownerDocument);j.appendChild(ab.clone(h,!0));return j.innerHTML}j+="";if(!j.match(/<(?:script|style|link)/i)&&A){for(g=e-1;0<=g;g--){h=i[g],h.nodeType===R.ELEMENT_NODE&&(ab.cleanData(h,1),h.outerHTML=j)}}else{j=ab.create(j,0,h.ownerDocument,0),ab.insertBefore(j,i,g),ab.remove(i)}},remove:function(m,n){var j,k=ab.query(m),l,b=U.require("event/dom"),h;for(h=k.length-1;0<=h;h--){j=k[h],!n&&j.nodeType===R.ELEMENT_NODE&&(l=U.makeArray(j.getElementsByTagName("*")),l.push(j),ab.removeData(l),b&&b.detach(l)),aa(j,j.parentNode)}},clone:function(m,n,k,e){"object"===typeof n&&(e=n.deepWithDataAndEvent,k=n.withDataAndEvent,n=n.deep);var m=ab.get(m),l,h=ab._fixCloneAttributes,j;if(!m){return null}j=m.nodeType;l=m.cloneNode(n);if(j===R.ELEMENT_NODE||j===R.DOCUMENT_FRAGMENT_NODE){h&&j===R.ELEMENT_NODE&&h(m,l),n&&h&&X(h,m,l)}k&&(Q(m,l),n&&e&&X(Q,m,l));return l},empty:function(e){var e=ab.query(e),g,b;for(b=e.length-1;0<=b;b--){g=e[b],ab.remove(g.childNodes)}},_nodeListToFragment:V});ab.outerHTML=ab.outerHtml;var L=ab._creators,E=ab.create,v={area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"},u;for(u in v){(function(b){L[u]=function(d,e){return E("<"+b+">"+d+"</"+b+">",void 0,e)}})(v[u])}v.option=v.optgroup=function(c,b){return E('<select multiple="multiple">'+c+"</select>",void 0,b)};return ab});KISSY.add("dom/base/data",["./api"],function(r,f){var d=f("./api"),c=r.Env.host,u="_ks_data_"+r.now(),t={},i={},s={applet:1,object:1,embed:1},v={hasData:function(b,e){if(b){if(void 0!==e){if(e in b){return !0}}else{if(!r.isEmptyObject(b)){return !0}}}return !1}},p={hasData:function(e,b){return e==c?p.hasData(i,b):v.hasData(e[u],b)},data:function(b,j,g){if(b==c){return p.data(i,j,g)}var h=b[u];if(void 0!==g){h=b[u]=b[u]||{},h[j]=g}else{return void 0!==j?h&&h[j]:h=b[u]=b[u]||{}}},removeData:function(b,j){if(b==c){return p.removeData(i,j)}var g=b[u];if(void 0!==j){delete g[j],r.isEmptyObject(g)&&p.removeData(b)}else{try{delete b[u]}catch(h){b[u]=void 0}}}},o={hasData:function(g,e){var b=g[u];return !b?!1:v.hasData(t[b],e)},data:function(b,h,g){if(!s[b.nodeName.toLowerCase()]){var e=b[u];if(!e){if(void 0!==h&&void 0===g){return}e=b[u]=r.guid()}b=t[e];if(void 0!==g){b=t[e]=t[e]||{},b[h]=g}else{return void 0!==h?b&&b[h]:b=t[e]=t[e]||{}}}},removeData:function(b,l){var k=b[u],h;if(k){if(h=t[k],void 0!==l){delete h[l],r.isEmptyObject(h)&&o.removeData(b)}else{delete t[k];try{delete b[u]}catch(e){b[u]=void 0}b.removeAttribute&&b.removeAttribute(u)}}}};r.mix(d,{__EXPANDO:u,hasData:function(h,l){for(var j=!1,g=d.query(h),k=0;k<g.length&&!(j=g[k],j=j.nodeType?o.hasData(j,l):p.hasData(j,l));k++){}return j},data:function(h,l,j){var h=d.query(h),g=h[0];if(r.isPlainObject(l)){for(var k in l){d.data(h,k,l[k])}}else{if(void 0===j){if(g){return g.nodeType?o.data(g,l):p.data(g,l)}}else{for(k=h.length-1;0<=k;k--){g=h[k],g.nodeType?o.data(g,l,j):p.data(g,l,j)}}}},removeData:function(h,l){var j=d.query(h),g,k;for(k=j.length-1;0<=k;k--){g=j[k],g.nodeType?o.removeData(g,l):p.removeData(g,l)}},cleanData:function(j,w){var n=d.query(j),h,q,k=r.require("event/dom");for(q=n.length-1;0<=q;q--){if(h=n[q],h.nodeType){var m=w&&r.makeArray(h.getElementsByTagName("*"))||[];m.push(h);h=0;for(var l=m.length;h<l;h++){o.removeData(m[h])}k&&k.detach(m)}else{p.removeData(h)}}}});return d});KISSY.add("dom/base/insertion",["./api"],function(s,i){function f(m,k){var n=[],l,g,j;for(l=0;m[l];l++){if(g=m[l],j=x(g),g.nodeType===o.DOCUMENT_FRAGMENT_NODE){n.push.apply(n,f(r(g.childNodes),k))}else{if("script"===j&&(!g.type||v.test(g.type))){g.parentNode&&g.parentNode.removeChild(g),k&&k.push(g)}else{if(g.nodeType===o.ELEMENT_NODE&&!t.test(j)){j=[];var y,c,q=g.getElementsByTagName("script");for(c=0;c<q.length;c++){y=q[c],(!y.type||v.test(y.type))&&j.push(y)}p.apply(m,[l+1,0].concat(j))}n.push(g)}}}return n}function d(b){b.src?s.getScript(b.src):(b=s.trim(b.text||b.textContent||b.innerHTML||""))&&s.globalEval(b)}function w(B,A,q,n){B=u.query(B);n&&(n=[]);B=f(B,n);u._fixInsertionChecked&&u._fixInsertionChecked(B);var A=u.query(A),m,y,l,e,h=A.length;if((B.length||n&&n.length)&&h){B=u._nodeListToFragment(B);1<h&&(e=u.clone(B,!0),A=s.makeArray(A));for(m=0;m<h;m++){y=A[m],B&&(l=0<m?u.clone(e,!0):B,q(l,y)),n&&n.length&&s.each(n,d)}}}var u=i("./api"),o=u.NodeType,t=/^(?:button|input|object|select|textarea)$/i,x=u.nodeName,r=s.makeArray,p=[].splice,v=/\/(java|ecma)script/i;s.mix(u,{_fixInsertionChecked:null,insertBefore:function(b,h,g){w(b,h,function(c,e){e.parentNode&&e.parentNode.insertBefore(c,e)},g)},insertAfter:function(b,h,g){w(b,h,function(c,e){e.parentNode&&e.parentNode.insertBefore(c,e.nextSibling)},g)},appendTo:function(b,h,g){w(b,h,function(c,e){e.appendChild(c)},g)},prependTo:function(b,h,g){w(b,h,function(c,e){e.insertBefore(c,e.firstChild)},g)},wrapAll:function(g,e){e=u.clone(u.get(e),!0);g=u.query(g);g[0].parentNode&&u.insertBefore(e,g[0]);for(var h;(h=e.firstChild)&&1===h.nodeType;){e=h}u.appendTo(g,e)},wrap:function(e,c){e=u.query(e);c=u.get(c);s.each(e,function(b){u.wrapAll(b,c)})},wrapInner:function(e,c){e=u.query(e);c=u.get(c);s.each(e,function(b){var g=b.childNodes;g.length?u.wrapAll(g,c):b.appendChild(c)})},unwrap:function(b){b=u.query(b);s.each(b,function(c){c=c.parentNode;u.replaceWith(c,c.childNodes)})},replaceWith:function(g,e){var h=u.query(g),e=u.query(e);u.remove(e,!0);u.insertBefore(e,h);u.remove(h)}});s.each({prepend:"prependTo",append:"appendTo",before:"insertBefore",after:"insertAfter"},function(e,c){u[c]=u[e]});return u});KISSY.add("dom/base/offset",["./api"],function(x,s){function p(e){var d,f=e.ownerDocument.body;if(!e.getBoundingClientRect){return{left:0,top:0}}d=e.getBoundingClientRect();e=d[B];d=d[z];e-=w.clientLeft||f.clientLeft||0;d-=w.clientTop||f.clientTop||0;return{left:e,top:d}}function o(b,n){var q={left:0,top:0},m=v(b),l,k=b,n=n||m;do{if(m==n){var j=k;l=p(j);j=v(j);l.left+=D[i](j);l.top+=D[F](j)}else{l=p(k)}q.left+=l.left;q.top+=l.top}while(m&&m!=n&&(k=m.frameElement)&&(m=m.parent));return q}var D=s("./api"),A=x.Env.host,u=x.UA,y=A.document,E=D.NodeType,w=y&&y.documentElement,v=D.getWindow,C=Math.max,B="left",z="top",i="scrollLeft",F="scrollTop";x.mix(D,{offset:function(H,t,G){if(void 0===t){var H=D.get(H),r;H&&(r=o(H,G));return r}G=D.query(H);for(r=G.length-1;0<=r;r--){var H=G[r],q=t;"static"===D.css(H,"position")&&(H.style.position="relative");var n=o(H),m={},l=void 0,b=void 0;for(b in q){l=parseFloat(D.css(H,b))||0,m[b]=l+q[b]-n[b]}D.css(H,m)}},scrollIntoView:function(J,I,H,G){var k,f,h,d;if(h=D.get(J)){I&&(I=D.get(I));I||(I=h.ownerDocument);I.nodeType===E.DOCUMENT_NODE&&(I=v(I));x.isPlainObject(H)&&(G=H.allowHorizontalScroll,d=H.onlyScrollIfNeeded,H=H.alignWithTop);G=void 0===G?!0:G;f=x.isWindow(I);var J=D.offset(h),b=D.outerHeight(h);k=D.outerWidth(h);var N,K,M,L;f?(f=I,N=D.height(f),K=D.width(f),L={left:D.scrollLeft(f),top:D.scrollTop(f)},f=J[B]-L[B],h=J[z]-L[z],k=J[B]+k-(L[B]+K),J=J[z]+b-(L[z]+N)):(N=D.offset(I),K=I.clientHeight,M=I.clientWidth,L={left:D.scrollLeft(I),top:D.scrollTop(I)},f=J[B]-(N[B]+(parseFloat(D.css(I,"borderLeftWidth"))||0)),h=J[z]-(N[z]+(parseFloat(D.css(I,"borderTopWidth"))||0)),k=J[B]+k-(N[B]+M+(parseFloat(D.css(I,"borderRightWidth"))||0)),J=J[z]+b-(N[z]+K+(parseFloat(D.css(I,"borderBottomWidth"))||0)));if(d){if(0>h||0<J){!0===H?D.scrollTop(I,L.top+h):!1===H?D.scrollTop(I,L.top+J):0>h?D.scrollTop(I,L.top+h):D.scrollTop(I,L.top+J)}}else{(H=void 0===H?!0:!!H)?D.scrollTop(I,L.top+h):D.scrollTop(I,L.top+J)}if(G){if(d){if(0>f||0<k){!0===H?D.scrollLeft(I,L.left+f):!1===H?D.scrollLeft(I,L.left+k):0>f?D.scrollLeft(I,L.left+f):D.scrollLeft(I,L.left+k)}}else{void 0===H||H?D.scrollLeft(I,L.left+f):D.scrollLeft(I,L.left+k)}}}},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0,scrollTop:0,scrollLeft:0});x.each(["Left","Top"],function(g,e){var b="scroll"+g;D[b]=function(q,k){if("number"===typeof q){return arguments.callee(A,q)}var q=D.get(q),f,d,r,c;q&&q.nodeType===E.ELEMENT_NODE?void 0!==k?q[b]=parseFloat(k):f=q[b]:(c=v(q),void 0!==k?(k=parseFloat(k),d="Left"===g?k:D.scrollLeft(c),r="Top"===g?k:D.scrollTop(c),c.scrollTo(d,r)):(f=c["page"+(e?"Y":"X")+"Offset"],"number"!==typeof f&&(d=c.document,f=d.documentElement[b],"number"!==typeof f&&(f=d.body[b]))));return f}});x.each(["Width","Height"],function(b){D["doc"+b]=function(c){c=D.get(c);c=D.getDocument(c);return C(c.documentElement["scroll"+b],c.body["scroll"+b],D["viewport"+b](c))};D["viewport"+b]=function(j){var j=D.get(j),k=v(j),j=k["inner"+b];if(u.mobile&&j){return j}var j="client"+b,k=k.document,h=k.body,g=k.documentElement[j];return"CSS1Compat"===k.compatMode&&g||h&&h[j]||g}});return D});KISSY.add("dom/base/style",["./api"],function(ac,X){function W(b,c){return c.toUpperCase()}function U(b){return b.replace(R,"ms-").replace(G,W)}function ai(h,k,l){var g={},j=h.style,i;for(i in k){g[i]=j[i],j[i]=k[i]}l.call(h);for(i in k){j[i]=g[i]}}function af(i,m,n){var h,l,k;if(!(3===i.nodeType||8===i.nodeType||!(h=i.style))){if(m=U(m),k=Q[m],m=T[m]||m,void 0!==n){null===n||n===V?n=V:!isNaN(Number(n))&&!C[m]&&(n+=J);k&&k.set&&(n=k.set(i,n));if(void 0!==n){try{h[m]=n}catch(j){"css set error:"+j}n===V&&h.removeAttribute&&h.removeAttribute(m)}h.cssText||i.removeAttribute("style")}else{if(!k||!("get" in k&&void 0!==(l=k.get(i,!1)))){l=h[m]}return void 0===l?"":l}}}function Y(b){var e,f=arguments;0!==b.offsetWidth?e=ad.apply(void 0,f):ai(b,A,function(){e=ad.apply(void 0,f)});return e}function ad(j,k,g){if(ac.isWindow(j)){return k===P?aj.viewportWidth(j):aj.viewportHeight(j)}if(9===j.nodeType){return k===P?aj.docWidth(j):aj.docHeight(j)}var i=k===P?["Left","Right"]:["Top","Bottom"],h=k===P?j.offsetWidth:j.offsetHeight;if(0<h){return"border"!==g&&ac.each(i,function(b){g||(h-=parseFloat(aj.css(j,"padding"+b))||0);h="margin"===g?h+(parseFloat(aj.css(j,g+b))||0):h-(parseFloat(aj.css(j,"border"+b+"Width"))||0)}),h}h=aj._getComputedStyle(j,k);if(null===h||0>Number(h)){h=j.style[k]||0}h=parseFloat(h)||0;g&&ac.each(i,function(b){h+=parseFloat(aj.css(j,"padding"+b))||0;"padding"!==g&&(h+=parseFloat(aj.css(j,"border"+b+"Width"))||0);"margin"===g&&(h+=parseFloat(aj.css(j,g+b))||0)});return h}var aj=X("./api"),aa=ac.Env.host,Z=ac.UA,ah=ac.Features,ag=aj.nodeName,ae=aa.document,S=/^margin/,P="width",ab="display"+ac.now(),C={fillOpacity:1,fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},R=/^-ms-/,V="",J="px",I=/\d(?!px)[a-z%]+$/i,Q={},T={"float":"cssFloat"},O={},G=/-([a-z])/ig,E=ae&&ae.documentElement.style||{},N;ac.each(["","Webkit","Moz","O","ms"],function(b){b=b?b+"UserSelect":"userSelect";void 0===N&&b in E&&(N=b)});if(ah.isTransformSupported()){var K;K=T.transform=ah.getTransformProperty();T.transformOrigin=K+"Origin"}ah.isTransitionSupported()&&(T.transition=ah.getTransitionProperty());ac.mix(aj,{_camelCase:U,_cssHooks:Q,_cssProps:T,_getComputedStyle:function(q,r){var j="",p,n,m,l,k;n=q.ownerDocument;r=T[r]||r;if(p=n.defaultView.getComputedStyle(q,null)){j=p.getPropertyValue(r)||p[r]}j===""&&!aj.contains(n,q)&&(j=q.style[r]);if(aj._RE_NUM_NO_PX.test(j)&&S.test(r)){k=q.style;n=k.width;m=k.minWidth;l=k.maxWidth;k.minWidth=k.maxWidth=k.width=j;j=p.width;k.width=n;k.minWidth=m;k.maxWidth=l}return j},style:function(j,k,e){var j=aj.query(j),i,h=j[0];if(ac.isPlainObject(k)){for(i in k){for(h=j.length-1;h>=0;h--){af(j[h],i,k[i])}}}else{if(e===void 0){i="";h&&(i=af(h,k,e));return i}for(h=j.length-1;h>=0;h--){af(j[h],k,e)}}},css:function(j,k,e){var j=aj.query(j),i=j[0],h;if(ac.isPlainObject(k)){for(h in k){for(i=j.length-1;i>=0;i--){af(j[i],h,k[h])}}}else{k=U(k);h=Q[k];if(e===void 0){e="";if(i&&(!h||!("get" in h&&(e=h.get(i,true))!==void 0))){e=aj._getComputedStyle(i,k)}return typeof e==="undefined"?"":e}for(i=j.length-1;i>=0;i--){af(j[i],k,e)}}},show:function(n){var n=aj.query(n),p,f,m;for(m=n.length-1;m>=0;m--){f=n[m];f.style.display=aj.data(f,ab)||V;if(aj.css(f,"display")==="none"){p=f.tagName.toLowerCase();var l=void 0,k=O[p],i=void 0;if(!O[p]){l=ae.body||ae.documentElement;i=ae.createElement(p);aj.prepend(i,l);k=aj.css(i,"display");l.removeChild(i);O[p]=k}p=k;aj.data(f,ab,p);f.style.display=p}}},hide:function(j){var j=aj.query(j),k,g;for(g=j.length-1;g>=0;g--){k=j[g];var i=k.style,h=i.display;if(h!=="none"){h&&aj.data(k,ab,h);i.display="none"}}},toggle:function(f){var f=aj.query(f),g,e;for(e=f.length-1;e>=0;e--){g=f[e];aj.css(g,"display")==="none"?aj.show(g):aj.hide(g)}},addStyleSheet:function(h,i,f){if(typeof h==="string"){f=i;i=h;h=aa}var h=aj.getDocument(h),g;if(f&&(f=f.replace("#",V))){g=aj.get("#"+f,h)}if(!g){g=aj.create("<style>",{id:f},h);aj.get("head",h).appendChild(g);g.styleSheet?g.styleSheet.cssText=i:g.appendChild(h.createTextNode(i))}},unselectable:function(m){var m=aj.query(m),d,l,k=0,j,h;for(l=m.length-1;l>=0;l--){d=m[l];h=d.style;if(N!==void 0){h[N]="none"}else{if(Z.ie){h=d.getElementsByTagName("*");d.setAttribute("unselectable","on");for(j=["iframe","textarea","input","select"];d=h[k++];){ac.inArray(ag(d),j)||d.setAttribute("unselectable","on")}}}}},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,width:0,height:0});ac.each([P,"height"],function(b){aj["inner"+ac.ucfirst(b)]=function(d){return(d=aj.get(d))&&Y(d,b,"padding")};aj["outer"+ac.ucfirst(b)]=function(g,d){var f=aj.get(g);return f&&Y(f,b,d?"margin":"border")};aj[b]=function(g,d){var f=aj.css(g,b,d);f&&(f=parseFloat(f));return f};Q[b]={get:function(e,f){var d;f&&(d=Y(e,b)+"px");return d}}});var A={position:"absolute",visibility:"hidden",display:"block"};ac.each(["left","top"],function(b){Q[b]={get:function(k,d){var j,i,f;if(d){f=aj.css(k,"position");if(f==="static"){return"auto"}j=aj._getComputedStyle(k,b);if((i=j==="auto")&&f==="relative"){return"0px"}if(i||I.test(j)){f={top:0,left:0};if(aj.css(k,"position")==="fixed"){i=k.getBoundingClientRect()}else{for(j=k.offsetParent||(k.ownerDocument||ae).body;j&&!o.test(j.nodeName)&&aj.css(j,"position")==="static";){j=j.offsetParent}i=aj.offset(k);f=aj.offset(j);f.top=f.top+(parseFloat(aj.css(j,"borderTopWidth"))||0);f.left=f.left+(parseFloat(aj.css(j,"borderLeftWidth"))||0)}i.top=i.top-(parseFloat(aj.css(k,"marginTop"))||0);i.left=i.left-(parseFloat(aj.css(k,"marginLeft"))||0);j={top:i.top-f.top,left:i.left-f.left}[b]+"px"}}return j}}});var o=/^(?:body|html)$/i;return aj});KISSY.add("dom/base/selector",["./api"],function(U,P){function O(b){var e=this.length,f;for(f=0;f<e&&!1!==b(this[f],f);f++){}}function M(b){b=b.substr(1);if(!b){throw Error("An invalid or illegal string was specified for selector.")}return b}function aa(b){return function(c){var d=Z._getElementById(b,Y);return d&&Z._contains(c,d)?[d]:[]}}function X(b){return function(d){return d.getElementsByClassName(b)}}function Q(b){return function(d){return d.getElementsByTagName(b)}}function V(s,l){var i,h,e="string"===typeof s,g=void 0!==l?V(l):(h=1)&&[Y],b=g.length;if(s){if(e){s=u(s);if(h){if("body"===s){i=[Y.body]}else{if(A.test(s)&&G){i=Y.getElementsByClassName(RegExp.$1)}else{if(E.test(s)){i=(h=Z._getElementById(RegExp.$2,Y))&&h.nodeName.toLowerCase()===RegExp.$1?[h]:[]}else{if(I.test(s)){i=(h=Z._getElementById(s.substr(1),Y))?[h]:[]}else{if(L.test(s)){i=Y.getElementsByTagName(s)}else{if(!s.match(/,|\+|=|~|\[|\]|:|>|\||\$|\^|\*|\(|\)|[\w-]+\.[\w-]+|[\w-]+#[\w-]+/)&&G){i=s.split(/\s+/);var c=g,d,q;h=0;for(e=i.length;h<e;h++){d=i;q=h;var w;w=i[h];var t=w.charAt(0);w="#"===t?aa(M(w)):"."===t?X(M(w)):Q(w);d[q]=w}h=0;for(e=i.length;h<e;h++){w=i[h];var t=[],n;d=0;for(q=c.length;d<q;d++){n=w(c[d]),t.push.apply(t,U.makeArray(n))}c=t;if(!c.length){break}}i=c&&1<c.length?Z.unique(c):c}}}}}}}if(!i){i=[];for(h=0;h<b;h++){C.apply(i,Z._selectInternal(s,g[h]))}1<i.length&&1<b&&Z.unique(i)}}else{if(i=s.nodeType||s.setTimeout?[s]:s.getDOMNodes?s.getDOMNodes():T(s)?s:J(s)?o(s):[s],!h){e=i;d=e.length;i=[];for(h=0;h<d;h++){for(c=0;c<b;c++){if(Z._contains(g[c],e[h])){i.push(e[h]);break}}}}}}else{i=[]}i.each=O;return i}function ab(b,f){var e=b&&S(b,"class");return e&&(e=e.replace(/[\r\t\n]/g,N))&&-1<(N+e+N).indexOf(N+f+N)}function S(b,f){var e=b&&b.getAttributeNode(f);if(e&&e.specified){return e.nodeValue}}function R(b,d){return"*"===d||b.nodeName.toLowerCase()===d.toLowerCase()}var Z=P("./api"),Y=U.Env.host.document,W=Y.documentElement,K=W.matches||W.webkitMatchesSelector||W.mozMatchesSelector||W.oMatchesSelector||W.msMatchesSelector,G="getElementsByClassName" in Y,T=U.isArray,o=U.makeArray,J=Z.isDomNodeList,N=" ",C=Array.prototype.push,A=/^\.([\w-]+)$/,I=/^#([\w-]+)$/,L=/^([\w-])+$/,E=/^([\w-]+)#([\w-]+)$/,v=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,u=U.trim;U.mix(Z,{_compareNodeOrder:function(b,d){return !b.compareDocumentPosition||!d.compareDocumentPosition?b.compareDocumentPosition?-1:1:b.compareDocumentPosition(d)&4?-1:1},_getElementsByTagName:function(b,d){return U.makeArray(d.querySelectorAll(b))},_getElementById:function(b,d){return d.getElementById(b)},_getSimpleAttr:S,_isTag:R,_hasSingleClass:ab,_matchesInternal:function(h,l){for(var k=[],g=0,j,i=l.length;g<i;g++){j=l[g],K.call(j,h)&&k.push(j)}return k},_selectInternal:function(b,d){return o(d.querySelectorAll(b))},query:V,get:function(b,d){return V(b,d)[0]||null},unique:function(){function e(d,g){return d===g?(f=!0,0):Z._compareNodeOrder(d,g)}var f,c=!0;[0,0].sort(function(){c=!1;return 0});return function(g){f=c;g.sort(e);if(f){for(var d=1,b=g.length;d<b;){g[d]===g[d-1]?(g.splice(d,1),--b):d++}}return g}}(),filter:function(p,g,n){var p=V(p,n),k,j,h,c,n=[];if("string"===typeof g&&(g=u(g))&&(h=v.exec(g))){k=h[1],j=h[2],c=h[3],k?k&&!j&&!c&&(g=function(b){return S(b,"id")===k}):g=function(i){var f=!0,e=!0;j&&(f=R(i,j));c&&(e=ab(i,c));return e&&f}}return n="function"===typeof g?U.filter(p,g):Z._matchesInternal(g,p)},test:function(e,f,c){e=V(e,c);return e.length&&Z.filter(e,f,c).length===e.length}});return Z});KISSY.add("dom/base/traversal",["./api"],function(g,d){function k(t,u,o,l,s,r,q){if(!(t=j.get(t))){return null}if(0===u){return t}r||(t=t[o]);if(!t){return null}s=s&&j.get(s)||null;void 0===u&&(u=1);var r=[],h=g.isArray(u),e,p;"number"===typeof u&&(e=0,p=u,u=function(){return ++e===p});for(;t&&t!==s;){if((t.nodeType===f.ELEMENT_NODE||t.nodeType===f.TEXT_NODE&&q)&&i(t,u)&&(!l||l(t))){if(r.push(t),!h){break}}t=t[o]}return h?r:r[0]||null}function i(e,h){if(!h){return !0}if(g.isArray(h)){var m,l=h.length;if(!l){return !0}for(m=0;m<l;m++){if(j.test(e,h[m])){return !0}}}else{if(j.test(e,h)){return !0}}return !1}function c(e,h,m,l){var p=[],o,n;if((o=e=j.get(e))&&m){o=e.parentNode}if(o){m=g.makeArray(o.childNodes);for(o=0;o<m.length;o++){n=m[o],(l||n.nodeType===f.ELEMENT_NODE)&&n!==e&&p.push(n)}h&&(p=j.filter(p,h))}return p}var j=d("./api"),f=j.NodeType;g.mix(j,{_contains:function(e,h){return !!(e.compareDocumentPosition(h)&16)},closest:function(l,m,o,n){return k(l,m,"parentNode",function(b){return b.nodeType!==f.DOCUMENT_FRAGMENT_NODE},o,!0,n)},parent:function(h,l,m){return k(h,l,"parentNode",function(b){return b.nodeType!==f.DOCUMENT_FRAGMENT_NODE},m,void 0)},first:function(e,l,m){e=j.get(e);return k(e&&e.firstChild,l,"nextSibling",void 0,void 0,!0,m)},last:function(e,l,m){e=j.get(e);return k(e&&e.lastChild,l,"previousSibling",void 0,void 0,!0,m)},next:function(h,l,m){return k(h,l,"nextSibling",void 0,void 0,void 0,m)},prev:function(h,l,m){return k(h,l,"previousSibling",void 0,void 0,void 0,m)},siblings:function(m,b,l){return c(m,b,!0,l)},children:function(h,b){return c(h,b,void 0)},contents:function(h,b){return c(h,b,void 0,1)},contains:function(e,h){e=j.get(e);h=j.get(h);return e&&h?j._contains(e,h):!1},index:function(e,h){var m=j.query(e),l,n=0;l=m[0];if(!h){m=l&&l.parentNode;if(!m){return -1}for(;l=l.previousSibling;){l.nodeType===f.ELEMENT_NODE&&n++}return n}n=j.query(h);return"string"===typeof h?g.indexOf(l,n):g.indexOf(n[0],m)},equals:function(e,l){e=j.query(e);l=j.query(l);if(e.length!==l.length){return !1}for(var m=e.length;0<=m;m--){if(e[m]!==l[m]){return !1}}return !0}});return j});KISSY.add("dom/base","./base/api,./base/attr,./base/class,./base/create,./base/data,./base/insertion,./base/offset,./base/style,./base/selector,./base/traversal".split(","),function(c,b){var d=b("./base/api");b("./base/attr");b("./base/class");b("./base/create");b("./base/data");b("./base/insertion");b("./base/offset");b("./base/style");b("./base/selector");b("./base/traversal");c.mix(c,{DOM:d,get:d.get,query:d.query});return d});KISSY.add("event/custom/observer",["event/base"],function(e,f){function b(){b.superclass.constructor.apply(this,arguments)}var d=f("event/base");e.extend(b,d.Observer,{keys:["fn","context","groups"]});return b});KISSY.add("event/custom/object",["event/base"],function(e,f){function b(g){b.superclass.constructor.call(this);e.mix(this,g)}var d=f("event/base");e.extend(b,d.Object);return b});KISSY.add("event/custom/observable",["event/base","./observer","./object"],function(h,m){function b(){b.superclass.constructor.apply(this,arguments);this.defaultFn=null;this.defaultTargetOnly=!1;this.bubbles=!0}var f=m("event/base"),e=m("./observer"),l=m("./object"),d=f.Utils;h.extend(b,f.Observable,{on:function(c){c=new e(c);h.Config.debug&&(c.fn||"lack event handler for "+this.type);-1===this.findObserver(c)&&this.observers.push(c)},fire:function(q){var q=q||{},n=this.bubbles,p=this.currentTarget,o,i=this.type,c=this.defaultFn,g,j=q,r;q.type=i;j instanceof l||(j.target=p,j=new l(j));j.currentTarget=p;q=this.notify(j);!1!==r&&void 0!==q&&(r=q);if(n&&!j.isPropagationStopped()){o=(n=p.getTargets())&&n.length||0;for(g=0;g<o&&!j.isPropagationStopped();g++){q=n[g].fire(i,j),!1!==r&&void 0!==q&&(r=q)}}if(c&&!j.isDefaultPrevented()&&(i=j.target,q=i.getCustomEventObservable(j.type),!this.defaultTargetOnly&&!q.defaultTargetOnly||p===i)){r=c.call(p,j)}return r},notify:function(c){var j=[].concat(this.observers),o,n,i=j.length,g;for(g=0;g<i&&!c.isImmediatePropagationStopped();g++){o=j[g].notify(c,this),!1!==n&&void 0!==o&&(n=o)}return n},detach:function(v){var w,t=v.fn,s=v.context,r=this.currentTarget,k=this.observers,v=v.groups;if(k.length){v&&(w=d.getGroupsRe(v));var n,q,u,p,o=k.length;if(t||w){s=s||r;n=v=0;for(q=[];v<o;++v){if(u=k[v],p=u.context||r,s!==p||t&&t!==u.fn||w&&!u.groups.match(w)){q[n++]=u}}this.observers=q}else{this.reset()}}}});return b});KISSY.add("event/custom/target",["event/base","./observable"],function(f,k){var b=k("event/base"),e=k("./observable"),d=b.Utils,h=d.splitAndRun;return{isTarget:1,getCustomEventObservable:function(g,c){var i,j=this.getCustomEvents();i=j&&j[g];!i&&c&&(i=j[g]=new e({currentTarget:this,type:g}));return i},fire:function(i,g){var j=this,m,l=j.getTargets(),n=l&&l.length,g=g||{};h(i,function(c){var o;d.fillGroupsForEvent(c,g);c=g.type;if((o=j.getCustomEventObservable(c))||n){if(o){if(!o.hasObserver()&&!o.defaultFn&&(o.bubbles&&!n||!o.bubbles)){return}}else{o=new e({currentTarget:j,type:c})}c=o.fire(g);!1!==m&&void 0!==c&&(m=c)}});return m},publish:function(i,g){var l,j=this;h(i,function(c){l=j.getCustomEventObservable(c,!0);f.mix(l,g)});return j},addTarget:function(g){var c=this.getTargets();f.inArray(g,c)||c.push(g);return this},removeTarget:function(g){var c=this.getTargets(),g=f.indexOf(g,c);-1!==g&&c.splice(g,1);return this},getTargets:function(){return this["__~ks_bubble_targets"]||(this["__~ks_bubble_targets"]=[])},getCustomEvents:function(){return this["__~ks_custom_events"]||(this["__~ks_custom_events"]={})},on:function(i,g,l){var j=this;d.batchForType(function(n,m,o){m=d.normalizeParam(n,m,o);n=m.type;if(n=j.getCustomEventObservable(n,!0)){n.on(m)}},0,i,g,l);return j},detach:function(i,g,l){var j=this;d.batchForType(function(n,m,p){var o=d.normalizeParam(n,m,p);(n=o.type)?(n=j.getCustomEventObservable(n,!0))&&n.detach(o):(n=j.getCustomEvents(),f.each(n,function(c){c.detach(o)}))},0,i,g,l);return j}}});KISSY.add("event/custom",["./custom/target"],function(d,e){var b=e("./custom/target");return{Target:b,global:d.mix({},b)}});KISSY.add("event/base/utils",[],function(b){function g(d){if(0>d.indexOf(".")){return[d,""]}var c=d.match(/([^.]+)?(\..+)?$/),d=[c[1]];(c=c[2])?(c=c.split(".").sort(),d.push(c.join("."))):d.push("");return d}var h,i;return{splitAndRun:h=function(d,c){b.isArray(d)?b.each(d,c):(d=b.trim(d),-1===d.indexOf(" ")?c(d):b.each(d.split(/\s+/),c))},normalizeParam:function(f,e,k){var j=e||{},j="function"===typeof e?{fn:e,context:k}:b.merge(j),e=g(f),f=e[0];j.groups=e[1];j.type=f;return j},batchForType:function(f,d){var k=b.makeArray(arguments),j=k[2+d];j&&"object"===typeof j?b.each(j,function(m,l){var c=[].concat(k);c.splice(0,2);c[d]=l;c[d+1]=m;f.apply(null,c)}):h(j,function(l){var c=[].concat(k);c.splice(0,2);c[d]=l;f.apply(null,c)})},fillGroupsForEvent:function(e,c){var k=g(e),j=k[1];j&&(j=i(j),c._ksGroups=j);c.type=k[0]},getGroupsRe:i=function(c){return RegExp(c.split(".").join(".*\\.")+"(?:\\.|$)")}}});KISSY.add("event/base/object",[],function(g,h){function i(){this.timeStamp=g.now();this.currentTarget=this.target=h}var j=function(){return !1},b=function(){return !0};i.prototype={constructor:i,isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){this.isDefaultPrevented=b},stopPropagation:function(){this.isPropagationStopped=b},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=b;this.stopPropagation()},halt:function(c){c?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}};return i});KISSY.add("event/base/observer",[],function(b,c){function g(d){b.mix(this,d)}g.prototype={constructor:g,equals:function(e){var d=this;return !!b.reduce(d.keys,function(f,h){return f&&d[h]===e[h]},1)},simpleNotify:function(f,e){var d;d=this.fn.call(this.context||e.currentTarget,f,this.data);this.once&&e.removeObserver(this);return d},notifyInternal:function(f,e){var d=this.simpleNotify(f,e);!1===d&&f.halt();return d},notify:function(f,e){var d=f._ksGroups;return d&&(!this.groups||!this.groups.match(d))?c:this.notifyInternal(f,e)}};return g});KISSY.add("event/base/observable",[],function(b){function c(e){this.currentTarget=null;b.mix(this,e);this.reset()}c.prototype={constructor:c,hasObserver:function(){return !!this.observers.length},reset:function(){this.observers=[]},removeObserver:function(g){var h,f=this.observers,e=f.length;for(h=0;h<e;h++){if(f[h]===g){f.splice(h,1);break}}this.checkMemory()},checkMemory:function(){},findObserver:function(f){var g=this.observers,e;for(e=g.length-1;0<=e;--e){if(f.equals(g[e])){return e}}return -1}};return c});KISSY.add("event/base",["./base/utils","./base/object","./base/observer","./base/observable"],function(i,j){var k=j("./base/utils"),l=j("./base/object"),h=j("./base/observer"),g=j("./base/observable");return{Utils:k,Object:l,Observer:h,Observable:g}});KISSY.add("promise",[],function(u){function B(c){"undefined"!==typeof console&&console.error&&console.error(c)}function h(g,e,i){if(g instanceof x){d(function(){i.call(g,g[z])})}else{var f=g[z],j=g[w];j?j.push([e,i]):q(f)?h(f,e,i):e&&d(function(){e.call(g,f)})}}function y(c){if(!(this instanceof y)){return new y(c)}this.promise=c||new A;this.promise.defer=this}function q(c){return c&&c instanceof A}function A(c){this[z]=c;void 0===c&&(this[w]=[],this[l]=[])}function x(c){if(c instanceof x){return c}A.apply(this,arguments);this[z] instanceof A&&"assert.not(this.__promise_value instanceof promise) in Reject constructor";return this}function v(g,c,n){function f(e){try{return c?c.call(this,e):e}catch(o){return B(o.stack||o),new x(o)}}function m(o){try{return n?n.call(this,o):new x(o)}catch(e){return B(e.stack||e),new x(e)}}function i(e){j?"already done at fulfilled":e instanceof A?"assert.not(value instanceof Promise) in when":(j=1,k.resolve(f.call(this,e)))}var k=new y,j=0;g instanceof A?h(g,i,function(e){j?"already done at rejected":(j=1,k.resolve(m.call(this,e)))}):i(g);return k.promise}function b(c){return !C(c)&&q(c)&&void 0===c[w]&&(!q(c[z])||b(c[z]))}function C(c){return q(c)&&void 0===c[w]&&c[z] instanceof x}var z="__promise_value",d=u.setImmediate,l="__promise_progress_listeners",w="__promise_pendings";y.prototype={constructor:y,resolve:function(e){var c=this.promise,f;if(!(f=c[w])){return null}c[z]=e;f=[].concat(f);c[w]=void 0;c[l]=void 0;u.each(f,function(g){h(c,g[0],g[1])});return e},reject:function(c){return this.resolve(new x(c))},notify:function(c){u.each(this.promise[l],function(e){d(function(){e(c)})})}};A.prototype={constructor:A,then:function(e,c,f){f&&this.progress(f);return v(this,e,c)},progress:function(c){this[l]&&this[l].push(c);return this},fail:function(c){return v(this,0,c)},fin:function(c){return v(this,function(e){return c(e,!0)},function(e){return c(e,!1)})},done:function(e,c){(e||c?this.then(e,c):this).fail(function(f){f.stack||f;"error";setTimeout(function(){throw f},0)})},isResolved:function(){return b(this)},isRejected:function(){return C(this)}};u.extend(x,A);KISSY.Defer=y;KISSY.Promise=A;A.Defer=y;u.mix(A,{when:v,isPromise:q,isResolved:b,isRejected:C,all:function(f){var e=f.length;if(!e){return null}for(var g=new y,i=0;i<f.length;i++){(function(k,j){v(k,function(m){f[j]=m;0===--e&&g.resolve(f)},function(c){g.reject(c)})})(f[i],i)}return g.promise},async:function(c){return function(){function g(f,e){var n;try{n=i[f](e)}catch(m){return new x(m)}return n.done?n.value:v(n.value,k,j)}function k(e){return g("next",e)}function j(e){return g("throw",e)}var i=c.apply(this,arguments);return k()}}});return A});KISSY.add("event/dom/base/utils",["dom"],function(g,e){var f=e("dom"),j="ksEventTargetId_"+g.now(),h=g.Env.host.document;return{simpleAdd:h&&h.addEventListener?function(k,i,l,m){k.addEventListener&&k.addEventListener(i,l,!!m)}:function(i,c,k){i.attachEvent&&i.attachEvent("on"+c,k)},simpleRemove:h&&h.removeEventListener?function(k,i,l,m){k.removeEventListener&&k.removeEventListener(i,l,!!m)}:function(i,c,k){i.detachEvent&&i.detachEvent("on"+c,k)},data:function(c,i){return f.data(c,j,i)},removeData:function(c){return f.removeData(c,j)}}});KISSY.add("event/dom/base/special",[],function(){return{}});KISSY.add("event/dom/base/observer",["event/base","./special"],function(g,e){function f(c){f.superclass.constructor.call(this,c)}var j=e("event/base"),h=e("./special");g.extend(f,j.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(l,d){var p,n,m=l.type,o;(o=this.originalType)?l.type=o:o=m;(p=h[o])&&p.handle?(p=p.handle(l,this,d))&&0<p.length&&(n=p[0]):n=this.simpleNotify(l,d);!1===n&&l.halt();l.type=m;return n}});return f});KISSY.add("event/dom/base/object",["event/base"],function(l,t){function u(){return v}function q(){return e}function p(k){var c=k.type;p.superclass.constructor.call(this);this.originalEvent=k;var i=q;"defaultPrevented" in k?i=k.defaultPrevented?u:q:"getPreventDefault" in k?i=k.getPreventDefault()?u:q:"returnValue" in k&&(i=k.returnValue===e?u:q);this.isDefaultPrevented=i;var d=[],h,b=j.concat();l.each(n,function(m){c.match(m.reg)&&(b=b.concat(m.props),m.fix&&d.push(m.fix))});for(i=b.length;i;){h=b[--i],this[h]=k[h]}this.target||(this.target=k.srcElement||g);3===this.target.nodeType&&(this.target=this.target.parentNode);for(i=d.length;i;){h=d[--i],h(this,k)}}var f=t("event/base"),g=l.Env.host.document,v=!0,e=!1,j="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),n=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(b,c){null==b.which&&(b.which=null!=c.charCode?c.charCode:c.keyCode);void 0===b.metaKey&&(b.metaKey=b.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(z,m){var s,o,r,k=m.wheelDelta,i=m.axis,y=m.wheelDeltaY,x=m.wheelDeltaX,w=m.detail;k&&(r=k/120);w&&(r=-(0===w%3?w/3:w));void 0!==i&&(i===z.HORIZONTAL_AXIS?(o=0,s=-1*r):i===z.VERTICAL_AXIS&&(s=0,o=r));void 0!==y&&(o=y/120);void 0!==x&&(s=-1*x/120);!s&&!o&&(o=r);void 0!==s&&(z.deltaX=s);void 0!==o&&(z.deltaY=o);void 0!==r&&(z.delta=r)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),fix:function(b,d){var m,i,k=b.target,c=d.button;null==b.pageX&&null!=d.clientX&&(m=k.ownerDocument||g,i=m.documentElement,m=m.body,b.pageX=d.clientX+(i&&i.scrollLeft||m&&m.scrollLeft||0)-(i&&i.clientLeft||m&&m.clientLeft||0),b.pageY=d.clientY+(i&&i.scrollTop||m&&m.scrollTop||0)-(i&&i.clientTop||m&&m.clientTop||0));!b.which&&void 0!==c&&(b.which=c&1?1:c&2?3:c&4?2:0);!b.relatedTarget&&b.fromElement&&(b.relatedTarget=b.fromElement===k?b.toElement:b.fromElement);return b}}];l.extend(p,f.Object,{constructor:p,preventDefault:function(){var b=this.originalEvent;b.preventDefault?b.preventDefault():b.returnValue=e;p.superclass.preventDefault.call(this)},stopPropagation:function(){var b=this.originalEvent;b.stopPropagation?b.stopPropagation():b.cancelBubble=v;p.superclass.stopPropagation.call(this)}});return p});KISSY.add("event/dom/base/observable","event/base,dom,./special,./utils,./observer,./object".split(","),function(j,p){function q(b){j.mix(this,b);this.reset()}var n=p("event/base"),l=p("dom"),f=p("./special"),g=p("./utils"),t=p("./observer"),e=p("./object"),h=n.Utils;j.extend(q,n.Observable,{setup:function(){var i=this.type,c=f[i]||{},m=this.currentTarget,k=g.data(m).handle;(!c.setup||c.setup.call(m,i)===false)&&g.simpleAdd(m,i,k)},constructor:q,reset:function(){q.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(F){var E=F.target,D=F.type,C=this.currentTarget,A=this.observers,B=[],y,w,G=this.delegateCount||0,r,z;if(G&&E.nodeType){for(;E!==C;){if(E.disabled!==true||D!=="click"){var d={},x,v,s;r=[];for(w=0;w<G;w++){z=A[w];s=z.filter;v=s+"";x=d[v];x===void 0&&(x=d[v]=l.test(E,s));x&&r.push(z)}r.length&&B.push({currentTarget:E,currentTargetObservers:r})}E=E.parentNode||C}}G<A.length&&B.push({currentTarget:C,currentTargetObservers:A.slice(G)});w=0;for(E=B.length;!F.isPropagationStopped()&&w<E;++w){D=B[w];r=D.currentTargetObservers;D=D.currentTarget;F.currentTarget=D;for(D=0;!F.isImmediatePropagationStopped()&&D<r.length;D++){C=r[D];C=C.notify(F,this);y!==false&&C!==void 0&&(y=C)}}return y},fire:function(w,B){var w=w||{},A=""+this.type,z,x,y=f[A]||{};z=y.bubbles!==false;var v=this.currentTarget;if(!(y.fire&&y.fire.call(v,B)===false)){if(!(w instanceof e)){x=w;w=new e({currentTarget:v,type:A,target:v});j.mix(w,x)}if(!(y.preFire&&y.preFire.call(v,w,B)===false)){x=v;var r=l.getWindow(x),C=r.document,y=[],i,s="on"+A,d=0;do{y.push(x);x=x.parentNode||x.ownerDocument||x===C&&r}while(!B&&x&&z);x=y[d];do{w.currentTarget=x;if(z=q.getDomEventObservable(x,A)){z=z.notify(w);z!==void 0&&i!==false&&(i=z)}x[s]&&x[s].call(x)===false&&w.preventDefault();x=y[++d]}while(!B&&x&&!w.isPropagationStopped());if(!B&&!w.isDefaultPrevented()){try{if(v[A]&&!j.isWindow(v)){q.triggeredEvent=A;v[A]()}}catch(o){"trigger action error: "+o}q.triggeredEvent=""}return i}}},on:function(i){var d=this.observers,k=f[this.type]||{},i=i instanceof t?i:new t(i);j.Config.debug&&(i.fn||"lack event handler for "+this.type);if(this.findObserver(i)===-1){if(i.filter){d.splice(this.delegateCount,0,i);this.delegateCount++}else{if(i.last){d.push(i);this.lastCount++}else{d.splice(d.length-this.lastCount,0,i)}}k.add&&k.add.call(this.currentTarget,i)}},detach:function(E){var D,C=f[this.type]||{},A="filter" in E,y=E.filter,z=E.context,w=E.fn,v=this.currentTarget,B=this.observers,E=E.groups;if(B.length){E&&(D=h.getGroupsRe(E));var s,x,o,u,k=B.length;if(w||A||D){z=z||v;s=E=0;for(x=[];E<k;++E){o=B[E];u=o.context||v;if(z!==u||w&&w!==o.fn||A&&(y&&y!==o.filter||!y&&!o.filter)||D&&!o.groups.match(D)){x[s++]=o}else{o.filter&&this.delegateCount&&this.delegateCount--;o.last&&this.lastCount&&this.lastCount--;C.remove&&C.remove.call(v,o)}}this.observers=x}else{this.reset()}this.checkMemory()}},checkMemory:function(){var i=this.type,d,r,o=f[i]||{},k=this.currentTarget,m=g.data(k);if(m){d=m.observables;if(!this.hasObserver()){r=m.handle;(!o.tearDown||o.tearDown.call(k,i)===false)&&g.simpleRemove(k,i,r);delete d[i]}if(j.isEmptyObject(d)){m.handle=null;g.removeData(k)}}}});q.triggeredEvent="";q.getDomEventObservable=function(i,d){var m=g.data(i),k;if(m){k=m.observables}return k?k[d]:null};q.getDomEventObservablesHolder=function(i,d){var k=g.data(i);!k&&d&&g.data(i,k={});return k};return q});KISSY.add("event/dom/base/dom-event","event/base,./utils,dom,./special,./observable,./object".split(","),function(p,w){function x(h,d){var k=e[d]||{},i;if(!h.originalType&&(i=k.typeFix)){h.originalType=d;d=i}return d}function v(h,o,m){var k,i,n,m=p.merge(m),o=x(m,o);k=l.getDomEventObservablesHolder(h,1);if(!(n=k.handle)){n=k.handle=function(r){var d=r.type,s=n.currentTarget;if(!(l.triggeredEvent===d||typeof KISSY==="undefined")){if(d=l.getDomEventObservable(s,d)){r.currentTarget=s;r=new q(r);return d.notify(r)}}};n.currentTarget=h}if(!(i=k.observables)){i=k.observables={}}k=i[o];if(!k){k=i[o]=new l({type:o,currentTarget:h});k.setup()}k.on(m);h=null}function u(h,m,i){var i=p.merge(i),m=x(i,m),h=l.getDomEventObservablesHolder(h),k=(h||{}).observables;if(h&&k){if(m){(m=k[m])&&m.detach(i)}else{for(m in k){k[m].detach(i)}}}}var f=w("event/base"),j=w("./utils"),z=w("dom"),e=w("./special"),l=w("./observable"),q=w("./object"),g=f.Utils,y={on:function(h,c,i,k){h=z.query(h);g.batchForType(function(n,m,r,o){for(var r=g.normalizeParam(m,r,o),s,m=r.type,o=n.length-1;o>=0;o--){s=n[o];v(s,m,r)}},1,h,c,i,k);return h},detach:function(h,d,k,i){h=z.query(h);g.batchForType(function(n,m,t,r){for(var t=g.normalizeParam(m,t,r),s,o,m=t.type,r=n.length-1;r>=0;r--){s=n[r];u(s,m,t);if(t.deep&&s.getElementsByTagName){o=s.getElementsByTagName("*");for(s=o.length-1;s>=0;s--){u(o[s],m,t)}}}},1,h,d,k,i);return h},delegate:function(k,h,n,m,i){return y.on(k,h,{fn:m,context:i,filter:n})},undelegate:function(k,h,n,m,i){return y.detach(k,h,{fn:m,context:i,filter:n})},fire:function(k,h,n,m){var i,n=n||{};n.synthetic=1;g.splitAndRun(h,function(c){var r,o,d;g.fillGroupsForEvent(c,n);c=n.type;if((o=e[c])&&o.typeFix){c=o.typeFix}k=z.query(k);for(o=k.length-1;o>=0;o--){r=k[o];d=l.getDomEventObservable(r,c);!m&&!d&&(d=new l({type:c,currentTarget:r}));if(d){r=d.fire(n,m);i!==false&&r!==void 0&&(i=r)}}});return i},fireHandler:function(h,d,i){return y.fire(h,d,i,1)},clone:function(i,c){var m;if(m=l.getDomEventObservablesHolder(i)){var k=j.data(i);k&&k===j.data(c)&&j.removeData(c);p.each(m.observables,function(b,h){p.each(b.observers,function(d){v(c,h,d)})})}}};return y});KISSY.add("event/dom/base/key-codes",[],function(e){var c=e.UA,d={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(f){var g=f.keyCode;if(f.altKey&&!f.ctrlKey||f.metaKey||g>=d.F1&&g<=d.F12){return !1}switch(g){case d.ALT:case d.CAPS_LOCK:case d.CONTEXT_MENU:case d.CTRL:case d.DOWN:case d.END:case d.ESC:case d.HOME:case d.INSERT:case d.LEFT:case d.MAC_FF_META:case d.META:case d.NUMLOCK:case d.NUM_CENTER:case d.PAGE_DOWN:case d.PAGE_UP:case d.PAUSE:case d.PRINT_SCREEN:case d.RIGHT:case d.SHIFT:case d.UP:case d.WIN_KEY:case d.WIN_KEY_RIGHT:return !1;default:return !0}},isCharacterKey:function(b){if(b>=d.ZERO&&b<=d.NINE||b>=d.NUM_ZERO&&b<=d.NUM_MULTIPLY||b>=d.A&&b<=d.Z||c.webkit&&0===b){return !0}switch(b){case d.SPACE:case d.QUESTION_MARK:case d.NUM_PLUS:case d.NUM_MINUS:case d.NUM_PERIOD:case d.NUM_DIVISION:case d.SEMICOLON:case d.DASH:case d.EQUALS:case d.COMMA:case d.PERIOD:case d.SLASH:case d.APOSTROPHE:case d.SINGLE_QUOTE:case d.OPEN_SQUARE_BRACKET:case d.BACKSLASH:case d.CLOSE_SQUARE_BRACKET:return !0;default:return !1}}};return d});KISSY.add("event/dom/base/gesture",[],function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",singleTap:"click",doubleTap:"dblclick"}});KISSY.add("event/dom/base/special-events",["./dom-event","./special"],function(f,d){var e=d("./dom-event"),g=d("./special");return f.mix(g,{mousewheel:{typeFix:f.UA.gecko?"DOMMouseScroll":"mousewheel"},load:{bubbles:!1},click:{fire:function(b){if(!b&&"checkbox"===""+this.type&&this.click&&"input"===this.nodeName.toLowerCase()){return this.click(),!1}}},focus:{bubbles:!1,preFire:function(h,i){if(!i){return e.fire(this,"focusin")}},fire:function(b){if(!b&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&this.focus){return this.focus(),!1}}},blur:{bubbles:!1,preFire:function(h,i){if(!i){return e.fire(this,"focusout")}},fire:function(b){if(!b&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur){return this.blur(),!1}}}})});KISSY.add("event/dom/base/mouseenter",["dom","./special"],function(f,d){var e=d("dom"),g=d("./special");f.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(c){g[c.name]={typeFix:c.fix,handle:function(h,n,m){var l=h.currentTarget,j=h.relatedTarget;if(!j||j!==l&&!e.contains(l,j)){return[n.simpleNotify(h,m)]}}}})});KISSY.add("event/dom/base/valuechange",["dom","./dom-event","./special"],function(x,E){function F(d){if(v.hasData(d,A)){var c=v.data(d,A);clearTimeout(c);v.removeData(d,A)}}function D(c){F(c.target)}function C(e){var d=e.value,f=v.data(e,z);d!==f&&(y.fireHandler(e,G,{prevVal:f,newVal:d}),v.data(e,z,d))}function p(b){v.hasData(b,A)||v.data(b,A,setTimeout(function c(){C(b);v.data(b,A,setTimeout(c,w))},w))}function u(d){var c=d.target;"focus"===d.type&&v.data(c,z,c.value);p(c)}function H(b){C(b.target)}function l(c){v.removeData(c,z);F(c);y.detach(c,"blur",D);y.detach(c,"webkitspeechchange",H);y.detach(c,"mousedown keyup keydown focus",u)}var v=E("dom"),y=E("./dom-event"),q=E("./special"),G="valuechange",B=v.nodeName,z="event/valuechange/history",A="event/valuechange/poll",w=50;q[G]={setup:function(){var b=B(this);if("input"===b||"textarea"===b){l(this),y.on(this,"blur",D),y.on(this,"webkitspeechchange",H),y.on(this,"mousedown keyup keydown focus",u)}},tearDown:function(){l(this)}};return y});KISSY.add("event/dom/base","./base/dom-event,./base/object,./base/key-codes,./base/gesture,./base/special-events,./base/mouseenter,./base/valuechange".split(","),function(h,f){var g=f("./base/dom-event"),l=f("./base/object"),k=f("./base/key-codes"),j=f("./base/gesture"),e=f("./base/special-events");f("./base/mouseenter");f("./base/valuechange");return h.merge({add:g.on,remove:g.detach,KeyCode:k,Gesture:j,Special:e,Object:l},g)});KISSY.add("event/dom/shake",["event/dom/base"],function(B,t){function w(e){var c=e.accelerationIncludingGravity,e=c.x,h=c.y,c=c.z,g;void 0!==C&&(g=s(z(e-C),z(h-y),z(c-x)),g>r&&v(),g>f&&(A=1));C=e;y=h;x=c}var u=t("event/dom/base"),b=u.Special,r=5,f=20,A=0,C,y,x,s=Math.max,z=Math.abs,D=B.Env.host,v=B.buffer(function(){A&&(u.fireHandler(D,"shake",{accelerationIncludingGravity:{x:C,y:y,z:x}}),C=void 0,A=0)},250);b.shake={setup:function(){this===D&&D.addEventListener("devicemotion",w,!1)},tearDown:function(){this===D&&(v.stop(),C=void 0,A=0,D.removeEventListener("devicemotion",w,!1))}}});KISSY.add("event/dom/focusin",["event/dom/base"],function(i,c){var f=c("event/dom/base"),b=f.Special;i.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(g){function e(h){return f.fire(h.target,g.name)}var d=i.guid("attaches_"+i.now()+"_");b[g.name]={setup:function(){var h=this.ownerDocument||this;d in h||(h[d]=0);h[d]+=1;1===h[d]&&h.addEventListener(g.fix,e,!0)},tearDown:function(){var h=this.ownerDocument||this;h[d]-=1;0===h[d]&&h.removeEventListener(g.fix,e,!0)}}});return f});KISSY.add("node/base",["dom","event/dom"],function(u,r){function t(d,b,c){if(!(this instanceof t)){return new t(d,b,c)}if(d){if("string"===typeof d){if(d=p.create(d,b,c),d.nodeType===m.DOCUMENT_FRAGMENT_NODE){return s.apply(this,v(d.childNodes)),this}}else{if(u.isArray(d)||n(d)){return s.apply(this,v(d)),this}}}else{return this}this[0]=d;this.length=1;return this}var p=r("dom"),o=r("event/dom"),q=Array.prototype,f=q.slice,m=p.NodeType,s=q.push,v=u.makeArray,n=p.isDomNodeList;t.prototype={constructor:t,isNodeList:!0,length:0,item:function(b){return"number"===typeof b?b>=this.length?null:new t(this[b]):new t(b)},add:function(e,d,c){"number"===typeof d&&(c=d,d=void 0);e=t.all(e,d).getDOMNodes();d=new t(this);void 0===c?s.apply(d,e):(c=[c,0],c.push.apply(c,e),q.splice.apply(d,c));return d},slice:function(){return new t(f.apply(this,arguments))},getDOMNodes:function(){return f.call(this)},each:function(b,e){var c=this;u.each(c,function(d,g){d=new t(d);return b.call(e||d,d,g,c)});return c},getDOMNode:function(){return this[0]},end:function(){return this.__parent||this},filter:function(b){return new t(p.filter(this,b))},all:function(b){b=0<this.length?t.all(b,this):new t;b.__parent=this;return b},one:function(b){b=this.all(b);if(b=b.length?b.slice(0,1):null){b.__parent=this}return b}};u.mix(t,{all:function(b,c){return"string"===typeof b&&(b=u.trim(b))&&3<=b.length&&u.startsWith(b,"<")&&u.endsWith(b,">")?(c&&(c.getDOMNode&&(c=c[0]),c=c.ownerDocument||c),new t(b,void 0,c)):new t(p.query(b,c))},one:function(e,g){var c=t.all(e,g);return c.length?c.slice(0,1):null}});t.NodeType=m;t.KeyCode=o.KeyCode;t.Gesture=o.Gesture;t.REPLACE_HISTORY=o.REPLACE_HISTORY;return t});KISSY.add("node/attach",["dom","event/dom","./base"],function(d,p){function q(g,e,c){c.unshift(e);g=n[g].apply(n,c);return void 0===g?e:g}var n=p("dom"),m=p("event/dom"),o=p("./base"),f=o.prototype,j=d.makeArray;o.KeyCode=m.KeyCode;d.each("nodeName,isCustomDomain,getEmptyIframeSrc,equals,contains,index,scrollTop,scrollLeft,height,width,innerHeight,innerWidth,outerHeight,outerWidth,addStyleSheet,appendTo,prependTo,insertBefore,before,after,insertAfter,test,hasClass,addClass,removeClass,replaceClass,toggleClass,removeAttr,hasAttr,hasProp,scrollIntoView,remove,empty,removeData,hasData,unselectable,wrap,wrapAll,replaceWith,wrapInner,unwrap".split(","),function(b){f[b]=function(){var c=j(arguments);return q(b,this,c)}});d.each("getWindow,getDocument,filter,first,last,parent,closest,next,prev,clone,siblings,contents,children".split(","),function(b){f[b]=function(){var c=j(arguments);c.unshift(this);c=n[b].apply(n,c);return c===void 0?this:c===null?null:new o(c)}});d.each({attr:1,text:0,css:1,style:1,val:0,prop:1,offset:0,html:0,outerHTML:0,outerHtml:0,data:1},function(c,b){f[b]=function(){var e;e=j(arguments);void 0===e[c]&&!d.isObject(e[0])?(e.unshift(this),e=n[b].apply(n,e)):e=q(b,this,e);return e}});d.each(["on","detach","delegate","undelegate"],function(b){f[b]=function(){var c=j(arguments);c.unshift(this);m[b].apply(m,c);return this}});d.each(["fire","fireHandler"],function(b){f[b]=function(){var c=j(arguments);c.unshift(this);return m[b].apply(m,c)}})});KISSY.add("node/override",["dom","./base","./attach"],function(d,j){var k=j("dom"),g=j("./base");j("./attach");var f=g.prototype;d.each(["append","prepend","before","after"],function(c){f[c]=function(b){"string"===typeof b&&(b=k.create(b));if(b){k[c](b,this)}return this}});d.each(["wrap","wrapAll","replaceWith","wrapInner"],function(e){var h=f[e];f[e]=function(c){"string"===typeof c&&(c=g.all(c,this[0].ownerDocument));return h.call(this,c)}})});KISSY.add("node/anim",["./base","dom","anim"],function(d,n){function o(e,i,g){for(var l=[],h={},g=g||0;g<i;g++){l.push.apply(l,f[g])}for(g=0;g<l.length;g++){h[l[g]]=e}return h}var k=n("./base"),j=n("dom"),m=n("anim"),f=[["height","margin-top","margin-bottom","padding-top","padding-bottom"],["width","margin-left","margin-right","padding-left","padding-right"],["opacity"]];d.augment(k,{animate:function(){var b=d.makeArray(arguments);d.each(this,function(h){var c=d.clone(b),g=c[0];g.to?(g.node=h,(new m(g)).run()):m.apply(void 0,[h].concat(c)).run()});return this},stop:function(g,e,b){d.each(this,function(c){m.stop(c,g,e,b)});return this},pause:function(e,b){d.each(this,function(c){m.pause(c,b)});return this},resume:function(e,b){d.each(this,function(c){m.resume(c,b)});return this},isRunning:function(){for(var c=0;c<this.length;c++){if(m.isRunning(this[c])){return !0}}return !1},isPaused:function(){for(var c=0;c<this.length;c++){if(m.isPaused(this[c])){return !0}}return !1}});d.each({show:o("show",3),hide:o("hide",3),toggle:o("toggle",3),fadeIn:o("show",3,2),fadeOut:o("hide",3,2),fadeToggle:o("toggle",3,2),slideDown:o("show",1),slideUp:o("hide",1),slideToggle:o("toggle",1)},function(e,b){k.prototype[b]=function(c,h,g){if(j[b]&&!c){j[b](this)}else{d.each(this,function(i){(new m(i,e,c,g,h)).run()})}return this}})});KISSY.add("node",["node/base","node/attach","node/override","node/anim"],function(d,f){var g=f("node/base");f("node/attach");f("node/override");f("node/anim");d.mix(d,{Node:g,NodeList:g,one:g.one,all:g.all});return g});KISSY.add("anim",["anim/base","anim/timer","anim/transition?"],function(c,o){function d(b,h,i,g,j){if(b.node){j=b}else{"string"===typeof h?(h=c.unparam(""+h,";",":"),c.each(h,function(q,f){var k=c.trim(f);k&&(h[k]=c.trim(q));(!k||k!==f)&&delete h[f]})):h=c.clone(h);if(c.isPlainObject(i)){j=c.clone(i)}else{if(j={complete:j},i&&(j.duration=i),g){j.easing=g}}j.node=b;j.to=h}j=c.merge(e,j,{useTransition:c.config("anim/useTransition")});if(j.useTransition&&n){return"use transition anim",new n(j)}"use js timer anim";return new m(j)}var l=o("anim/base"),m=o("anim/timer"),n=o("anim/transition?"),p=l.Utils,e={duration:1,easing:"linear"};c.each(["pause","resume"],function(f){d[f]=function(b,g){return null===g||"string"===typeof g||!1===g?p.pauseOrResumeQueue(b,g,f):p.pauseOrResumeQueue(b,void 0,f)}});d.isRunning=p.isElRunning;d.isPaused=p.isElPaused;d.stop=p.stopEl;d.Easing=m.Easing;c.Anim=d;d.Q=l.Q;return d});KISSY.add("anim/base/queue",["dom"],function(n,e){function j(g,f,i){var f=f||l,h,d=m.data(g,k);!d&&!i&&m.data(g,k,d={});d&&(h=d[f],!h&&!i&&(h=d[f]=[]));return h}var m=e("dom"),k=n.guid("ks-queue-"+n.now()+"-"),l=n.guid("ks-queue-"+n.now()+"-"),b;return b={queueCollectionKey:k,queue:function(f,h,g){f=j(f,h);f.push(g);return f},remove:function(g,c,h){var f=j(g,c,1);f&&(h=n.indexOf(h,f),-1<h&&f.splice(h,1));f&&!f.length&&b.clearQueue(g,c);return f},clearQueues:function(c){m.removeData(c,k)},clearQueue:function(f,c){var c=c||l,d=m.data(f,k);d&&delete d[c];n.isEmptyObject(d)&&m.removeData(f,k)},dequeue:function(h,f){var g=j(h,f,1);g&&(g.shift(),g.length||b.clearQueue(h,f));return g}}});KISSY.add("anim/base/utils",["./queue","dom"],function(m,b){var e=b("./queue"),l=b("dom"),j=m.guid("ks-anim-unqueued-"+m.now()+"-"),k=m.guid("ks-anim-paused-"+m.now()+"-");return{saveRunningAnim:function(d){var f=d.node,c=l.data(f,j);c||l.data(f,j,c={});c[m.stamp(d)]=d},removeRunningAnim:function(d){var f=d.node,c=l.data(f,j);c&&(delete c[m.stamp(d)],m.isEmptyObject(c)&&l.removeData(f,j))},isAnimPaused:function(c){var d=l.data(c.node,k);return d?!!d[m.stamp(c)]:0},removePausedAnim:function(d){var f=d.node,c=l.data(f,k);c&&(delete c[m.stamp(d)],m.isEmptyObject(c)&&l.removeData(f,k))},savePausedAnim:function(d){var f=d.node,c=l.data(f,k);c||l.data(f,k,c={});c[m.stamp(d)]=d},isAnimRunning:function(c){var d=l.data(c.node,j);return d?!!d[m.stamp(c)]:0},isElPaused:function(c){return(c=l.data(c,k))&&!m.isEmptyObject(c)},isElRunning:function(c){return(c=l.data(c,j))&&!m.isEmptyObject(c)},pauseOrResumeQueue:function(d,f,c){d=l.data(d,"resume"===c?k:j);d=m.merge(d);m.each(d,function(g){if(void 0===f||g.config.queue===f){g[c]()}})},stopEl:function(d,h,c,g){c&&(void 0===g?e.clearQueues(d):!1!==g&&e.clearQueue(d,g));d=l.data(d,j);d=m.merge(d);m.each(d,function(f){(void 0===g||f.config.queue===g)&&f.stop(h)})}}});KISSY.add("anim/base",["dom","./base/utils","./base/queue","promise"],function(r,k){function m(d){m.superclass.constructor.call(this);t.Defer(this);this.config=d;var c=d.node;r.isPlainObject(c)||(c=q.get(d.node));this.node=this.el=c;this._backupProps={};this._propsData={}}var q=k("dom"),n=k("./base/utils"),o=k("./base/queue"),t=k("promise"),p=q.NodeType,s=r.noop,j={toggle:1,hide:1,show:1};r.extend(m,t,{on:function(b,d){"complete"===b?this.then(d):"end"===b?this.fin(d):"step"===b?this.progress(d):"not supported event for anim: "+b;return this},prepareFx:s,runInternal:function(){var z=this,y=z.config,x=z.node,w,v=z._backupProps,g=z._propsData,u=y.to,c=y.delay||0,e=y.duration;n.saveRunningAnim(z);r.each(u,function(b,f){r.isPlainObject(b)||(b={value:b});g[f]=r.mix({delay:c,easing:y.easing,frame:y.frame,duration:e},b)});if(x.nodeType===p.ELEMENT_NODE){if(u.width||u.height){u=x.style,r.mix(v,{overflow:u.overflow,"overflow-x":u.overflowX,"overflow-y":u.overflowY}),u.overflow="hidden","inline"===q.css(x,"display")&&"none"===q.css(x,"float")&&(10>r.UA.ieMode?u.zoom=1:u.display="inline-block")}var d,l;l="none"===q.css(x,"display");r.each(g,function(h,f){w=h.value;if(j[w]){if("hide"===w&&l||"show"===w&&!l){return z.stop(!0),d=!1}v[f]=q.style(x,f);"toggle"===w?w=l?"show":"hide":"hide"===w?(h.value=0,v.display="none"):(h.value=q.css(x,f),q.css(x,f,0),q.show(x))}});if(!1===d){return}}z.startTime=r.now();r.isEmptyObject(g)?(z.__totalTime=1000*e,z.__waitTimeout=setTimeout(function(){z.stop(!0)},z.__totalTime)):(z.prepareFx(),z.doStart())},isRunning:function(){return n.isAnimRunning(this)},isPaused:function(){return n.isAnimPaused(this)},pause:function(){this.isRunning()&&(this._runTime=r.now()-this.startTime,this.__totalTime-=this._runTime,n.removeRunningAnim(this),n.savePausedAnim(this),this.__waitTimeout?clearTimeout(this.__waitTimeout):this.doStop());return this},doStop:s,doStart:s,resume:function(){var b=this;b.isPaused()&&(b.startTime=r.now()-b._runTime,n.removePausedAnim(b),n.saveRunningAnim(b),b.__waitTimeout?b.__waitTimeout=setTimeout(function(){b.stop(!0)},b.__totalTime):(b.beforeResume(),b.doStart()));return b},beforeResume:s,run:function(){var b;b=this.config.queue;!1===b?this.runInternal():(b=o.queue(this.node,b,this),1===b.length&&this.runInternal());return this},stop:function(d){var c=this.node,l=this.config.queue;if(this.isResolved()||this.isRejected()){return this}this.__waitTimeout&&(clearTimeout(this.__waitTimeout),this.__waitTimeout=0);if(!this.isRunning()&&!this.isPaused()){return !1!==l&&o.remove(c,l,this),this}this.doStop(d);n.removeRunningAnim(this);n.removePausedAnim(this);var g=this.defer;if(d){var f,d=this.config.complete;r.isEmptyObject(f=this._backupProps)||q.css(this.node,f);d&&d.call(this);g.resolve([this])}else{g.reject([this])}!1!==l&&(c=o.dequeue(c,l))&&c[0]&&c[0].runInternal();return this}});m.Utils=n;m.Q=o;return m});KISSY.add("anim/timer/easing",[],function(){function n(b){return b}function r(A,z,g,w){var x=3*A-3*g+1,y=3*g-6*A,o=3*A,h=3*z-3*w+1,v=3*w-6*z,m=3*z;return function(f){f:{for(var c=f,l,j,i=0;8>i;i++){j=((x*c+y)*c+o)*c-f;if(e(j)<d){f=c;break f}l=(3*x*c+2*y)*c+o;if(e(l)<d){break}c-=j/l}l=1;i=0;for(c=f;l>i;){j=((x*c+y)*c+o)*c-f;if(e(j)<d){break}0<j?l=c:i=c;c=(l+i)/2}f=c}return((h*f+v)*f+m)*f}}var q=Math.PI,p=Math.pow,u=Math.sin,t=parseFloat,k=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,s={swing:function(b){return -Math.cos(b*q)/2+0.5},easeNone:n,linear:n,easeIn:function(b){return b*b},ease:r(0.25,0.1,0.25,1),"ease-in":r(0.42,0,1,1),"ease-out":r(0,0,0.58,1),"ease-in-out":r(0.42,0,0.58,1),"ease-out-in":r(0,0.42,1,0.58),toFn:function(f){var c;return(c=f.match(k))?r(t(c[1]),t(c[2]),t(c[3]),t(c[4])):s[f]||n},easeOut:function(b){return(2-b)*b},easeBoth:function(b){return 1>(b*=2)?0.5*b*b:0.5*(1- --b*(b-2))},easeInStrong:function(b){return b*b*b*b},easeOutStrong:function(b){return 1- --b*b*b*b},easeBothStrong:function(b){return 1>(b*=2)?0.5*b*b*b*b:0.5*(2-(b-=2)*b*b*b)},elasticIn:function(b){return 0===b||1===b?b:-(p(2,10*(b-=1))*u(2*(b-0.075)*q/0.3))},elasticOut:function(b){return 0===b||1===b?b:p(2,-10*b)*u(2*(b-0.075)*q/0.3)+1},elasticBoth:function(b){return 0===b||2===(b*=2)?b:1>b?-0.5*p(2,10*(b-=1))*u(2*(b-0.1125)*q/0.45):0.5*p(2,-10*(b-=1))*u(2*(b-0.1125)*q/0.45)+1},backIn:function(b){1===b&&(b-=0.001);return b*b*(2.70158*b-1.70158)},backOut:function(b){return(b-=1)*b*(2.70158*b+1.70158)+1},backBoth:function(f){var c,g=(c=2.5949095)+1;return 1>(f*=2)?0.5*f*f*(g*f-c):0.5*((f-=2)*f*(g*f+c)+2)},bounceIn:function(b){return 1-s.bounceOut(1-b)},bounceOut:function(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375},bounceBoth:function(b){return 0.5>b?0.5*s.bounceIn(2*b):0.5*s.bounceOut(2*b-1)+0.5}},d=0.000001,e=Math.abs;return s});KISSY.add("anim/timer/manager",[],function(b){var e=b.stamp,d,c;d=function(f){return setTimeout(f,15)};c=function(f){clearTimeout(f)};return{runnings:{},timer:null,start:function(f){var g=e(f);this.runnings[g]||(this.runnings[g]=f,this.startTimer())},stop:function(f){this.notRun(f)},notRun:function(f){delete this.runnings[e(f)];b.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(f){this.notRun(f)},resume:function(f){this.start(f)},startTimer:function(){var f=this;f.timer||(f.timer=d(function g(){f.runFrames()?f.stopTimer():f.timer=d(g)}))},stopTimer:function(){var f=this.timer;f&&(c(f),this.timer=0)},runFrames:function(){var f,h,g=this.runnings;for(f in g){g[f].frame()}for(f in g){h=0;break}return void 0===h}}});KISSY.add("anim/timer/fx",["dom"],function(b,e){function d(f){b.mix(this,f);this.pos=0;this.unit=this.unit||""}var c=e("dom");d.prototype={isCustomFx:0,constructor:d,load:function(f){b.mix(this,f);this.pos=0;this.unit=this.unit||""},frame:function(j){if(1!==this.pos){var r=this.anim,o=this.prop,q=r.node,p=this.from,i=this.propData,l=this.to;if(void 0===j){var n=b.now(),j=i.duration,n=n-r.startTime-i.delay,j=0>=n?0:n>=j?1:i.easing(n/j)}this.pos=j;p===l||0===j||(this.val=j=this.interpolate(p,l,this.pos),i.frame?i.frame.call(this,r,this):this.isCustomFx||(void 0===j?(this.pos=1,j=l,o+" update directly ! : "+j+" : "+p+" : "+l):j+=this.unit,this.val=j,"attr"===this.type?c.attr(q,o,j,1):c.css(q,o,j)))}},interpolate:function(f,h,g){if("number"===typeof f&&"number"===typeof h){return Math.round(100000*(f+(h-f)*g))/100000}},cur:function(){var g=this.prop,k,i,j=this.anim.node;if(this.isCustomFx){return j[g]||0}if(!(k=this.type)){k=this.type=(!j.style||null==j.style[g])&&null!=c.attr(j,g,void 0,1)?"attr":"css"}g="attr"===k?c.attr(j,g,void 0,1):c.css(j,g);return isNaN(i=parseFloat(g))?!g||"auto"===g?0:g:i}};d.Factories={};d.FxTypes={};d.getFx=function(g){var k=d,h,j;if(h=g.fxType){k=d.FxTypes[h]}else{if(!g.isCustomFx&&(j=d.Factories[g.prop])){k=j}}return new k(g)};return d});KISSY.add("anim/timer/short-hand",[],function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});KISSY.add("anim/timer/color",["./fx","./short-hand"],function(q,t){function s(c){var c=c+"",f;if(f=c.match(e)){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}if(f=c.match(x)){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),parseInt(f[4])]}if(f=c.match(p)){for(c=1;c<f.length;c++){2>f[c].length&&(f[c]+=f[c])}return[parseInt(f[1],n),parseInt(f[2],n),parseInt(f[3],n)]}if(d[c=c.toLowerCase()]){return d[c]}"only allow rgb or hex color string : "+c;return[255,255,255]}function r(){r.superclass.constructor.apply(this,arguments)}var w=t("./fx"),v=t("./short-hand"),n=16,u=Math.floor,d={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},e=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,x=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,p=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;v.background.push("backgroundColor");v.borderColor=["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"];v.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");v.borderBottom.push("borderBottomColor");v.borderLeft.push("borderLeftColor");v.borderRight.push("borderRightColor");v.borderTop.push("borderTopColor");q.extend(r,w,{load:function(){r.superclass.load.apply(this,arguments);this.from&&(this.from=s(this.from));this.to&&(this.to=s(this.to))},interpolate:function(f,c,h){var g=r.superclass.interpolate;if(3===f.length&&3===c.length){return"rgb("+[u(g(f[0],c[0],h)),u(g(f[1],c[1],h)),u(g(f[2],c[2],h))].join(", ")+")"}if(4===f.length||4===c.length){return"rgba("+[u(g(f[0],c[0],h)),u(g(f[1],c[1],h)),u(g(f[2],c[2],h)),u(g(f[3]||1,c[3]||1,h))].join(", ")+")"}"unknown value : "+f}});q.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(b){w.Factories[b]=r});return w.FxTypes.color=r});KISSY.add("anim/timer/transform",["dom","./fx"],function(n,r){function q(b){b=b.split(/,/);return b=n.map(b,function(c){return u(c)})}function p(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function u(b){return Math.round(100000*parseFloat(b))/100000}function t(b){for(var b=b.split(")"),h=n.trim,v=-1,l=b.length-1,m,o,j=p();++v<l;){switch(m=b[v].split("("),o=h(m[0]),m=m[1],o){case"translateX":case"translateY":case"scaleX":case"scaleY":j[o]=u(m);break;case"rotate":case"skewX":case"skewY":var i=u(m);n.endsWith(m,"deg")||(i=180*i/Math.PI);j[o]=i;break;case"translate":case"translate3d":m=m.split(",");j.translateX=u(m[0]);j.translateY=u(m[1]||0);break;case"scale":m=m.split(",");j.scaleX=u(m[0]);j.scaleY=u(m[1]||m[0]);break;case"matrix":return b=m,b=q(b),l=v=h=void 0,o=b[0],j=b[1],m=b[2],i=b[3],o*i-j*m?(h=Math.sqrt(o*o+j*j),l=(o*m+j*i)/(o*i-m*j),v=(o*i-j*m)/h,o*i<j*m&&(l=-l,h=-h)):h=v=l=0,{translateX:u(b[4]),translateY:u(b[5]),rotate:u(180*Math.atan2(j,o)/Math.PI),skewX:u(180*Math.atan(l)/Math.PI),skewY:0,scaleX:u(h),scaleY:u(v)}}}return j}function k(){k.superclass.constructor.apply(this,arguments)}var s=r("dom"),d=r("./fx"),e=n.Features.isTransform3dSupported()?"translate3d({translateX}px,{translateY}px,0)":"translate({translateX}px,{translateY}px)";n.extend(k,d,{load:function(){k.superclass.load.apply(this,arguments);this.from=(this.from=s.style(this.anim.node,"transform")||this.from)&&"none"!==this.from?t(this.from):p();this.to=this.to?t(this.to):p()},interpolate:function(g,f,j){var h=k.superclass.interpolate,i={};i.translateX=h(g.translateX,f.translateX,j);i.translateY=h(g.translateY,f.translateY,j);i.rotate=h(g.rotate,f.rotate,j);i.skewX=h(g.skewX,f.skewX,j);i.skewY=h(g.skewY,f.skewY,j);i.scaleX=h(g.scaleX,f.scaleX,j);i.scaleY=h(g.scaleY,f.scaleY,j);return n.substitute(e+" rotate({rotate}deg) skewX({skewX}deg) skewY({skewY}deg) scale({scaleX},{scaleY})",i)}});return d.Factories.transform=k});KISSY.add("anim/timer","dom,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color,./timer/transform".split(","),function(n,r){function q(){var b;q.superclass.constructor.apply(this,arguments);n.each(b=this.to,function(f,h){var g=e(h);if(h!==g){b[g]=b[h];delete b[h]}})}var p=r("dom"),u=r("./base"),t=r("./timer/easing"),k=r("./timer/manager"),s=r("./timer/fx"),d=r("./timer/short-hand");r("./timer/color");r("./timer/transform");var e=p._camelCase,v=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;n.extend(q,u,{prepareFx:function(){var A=this.node,x=this._propsData;n.each(x,function(b){b.duration=b.duration*1000;b.delay=b.delay*1000;if(typeof b.easing==="string"){b.easing=t.toFn(b.easing)}});n.each(d,function(b,m){var l,h=x[m],g;if(h){g=h.value;l={};n.each(b,function(E){l[E]=p.css(A,E)});p.css(A,m,g);n.each(l,function(E,F){F in x||(x[F]=n.merge(h,{value:p.css(A,F)}));p.css(A,F,E)});delete x[m]}});var y,z,w,o,j,i,c,B=0,f;n.isPlainObject(A)&&(B=1);for(y in x){z=x[y];w=z.value;i={isCustomFx:B,prop:y,anim:this,fxType:z.fxType,type:z.type,propData:z};c=s.getFx(i);o=w;j=c.cur();w=w+"";f="";if(w=w.match(v)){o=parseFloat(w[2]);if((f=w[3])&&f!=="px"&&j){var D=0,C=o;do{++C;p.css(A,y,C+f);D=c.cur()}while(D===0);j=C/D*j;p.css(A,y,j+f)}w[1]&&(o=(w[1]==="-="?-1:1)*o+j)}i.from=j;i.to=o;i.unit=f;c.load(i);z.fx=c}},frame:function(){var g,f=1,i,h=this._propsData;for(g in h){i=h[g];i=i.fx;i.frame();if(this.isRejected()||this.isResolved()){return}f=f&i.pos===1}h=n.now();g=this.config.duration*1000;h=Math.max(0,this.startTime+g-h);this.defer.notify([this,1-(h/g||0),h]);f&&this.stop(f)},doStop:function(g){var f,h=this._propsData;k.stop(this);if(g){for(f in h){g=h[f];(g=g.fx)&&g.frame(1)}}},doStart:function(){k.start(this)}});q.Easing=t;q.Fx=s;return q});KISSY.add("anim/transition",["dom","event/dom","./base"],function(y,x){function d(h){var g="";y.each(h,function(j,i){g&&(g+=",");g+=i+" "+j.duration+"s "+j.easing+" "+j.delay+"s"});return g}function u(){u.superclass.constructor.apply(this,arguments)}var w=x("dom"),s=x("event/dom"),c=x("./base"),t=y.Features,f=t.getTransitionPrefix(),b=/([A-Z]|^ms)/g,e=f?f.toLowerCase()+"TransitionEnd":"transitionend",v=t.getTransitionProperty();y.extend(u,c,{doStart:function(){var n=this,g=n.node,m=g.style,i=n._propsData,k=m[v],l,j={};if(l=i.transform){delete i.transform,i[t.getTransformProperty().replace(b,"-$1").toLowerCase()]=l}y.each(i,function(h,p){var q=h.value,o=w.css(g,p);"number"===typeof q&&(o=parseFloat(o));o===q&&setTimeout(function(){n._onTransitionEnd({originalEvent:{propertyName:p}})},0);j[p]=q});-1!==k.indexOf("none")?k="":k&&(k+=",");m[v]=k+d(i);s.on(g,e,n._onTransitionEnd,n);w.css(g,j)},beforeResume:function(){var i=this._propsData,g=y.merge(i),h=this._runTime/1000;y.each(g,function(k,j){var l=h;k.delay>=l?k.delay-=l:(l-=k.delay,k.delay=0,k.duration>=l?k.duration-=l:delete i[j])})},_onTransitionEnd:function(i){var i=i.originalEvent,g=1,h=this._propsData;h[i.propertyName]&&(h[i.propertyName].pos=1,y.each(h,function(j){if(1!==j.pos){return g=0,!1}}),g&&this.stop(!0))},doStop:function(l){var g=this.node,k=g.style,h=this._propsData,i=[],j={};s.detach(g,e,this._onTransitionEnd,this);y.each(h,function(m,n){l||(j[n]=w.css(g,n));i.push(n)});h=y.trim(k[v].replace(RegExp("(^|,)\\s*(?:"+i.join("|")+")\\s+[^,]+","gi"),"$1")).replace(/^,|,,|,$/g,"")||"none";k[v]=h;w.css(g,j)}});return u});KISSY.add("base",["attribute"],function(y,c){function x(e,h){return function(i){return function(){h?i.apply(this,arguments):this.callSuper.apply(this,arguments);var o=arguments.callee.__owner__.__extensions__||[];h&&o.reverse();var l=arguments,n;if(n=o&&o.length){for(var k=0;k<n;k++){var j=o[k]&&(!e?o[k]:o[k].prototype[e]);j&&j.apply(this,l||[])}}h?this.callSuper.apply(this,arguments):i.apply(this,arguments)}}}function g(e){var h=this.__hooks__,i=this.prototype;if(this.__extensions__.length&&h){for(var j in h){if(!i.hasOwnProperty(j)||e.hasOwnProperty(j)){e[j]=e[j]||f}}}return b.call(this,e)}function B(e){var h;e.target===this&&(h=this[w+e.type.slice(5).slice(0,-6)],h.call(this,e.newVal,e))}function A(e){var h=e.get("plugins"),i;y.each(h,function(j,k){"function"===typeof j&&(i=j,h[k]=new i)})}function v(e){var h,i=this.get("plugins");if(h=i.length){for(var j=0;j<h;j++){if(i[j][e]){i[j][e](this)}}}}var d=c("attribute"),u=y.ucfirst,w="_onSet",f=y.noop,m=d.extend({constructor:function(){this.callSuper.apply(this,arguments);var e=this.get("listeners"),h;for(h in e){this.on(h,e[h])}this.initializer();A(this);v.call(this,"pluginInitializer");this.bindInternal();this.syncInternal()},initializer:f,__getHook:x,__callPluginsMethod:v,bindInternal:function(){var e=this.getAttrs(),h,i;for(h in e){if(i=w+u(h),this[i]){this.on("after"+u(h)+"Change",B)}}},syncInternal:function(){var h=[],i;i=this.constructor;for(var n=this.getAttrs();i;){h.push(i),i=i.superclass&&i.superclass.constructor}h.reverse();for(i=0;i<h.length;i++){var o=h[i].ATTRS||{},k;for(k in o){if(k in n){var l,j;(j=this[w+u(k)])&&0!==n[k].sync&&void 0!==(l=this.get(k))&&j.call(this,l)}}}},plug:function(e){"function"===typeof e&&(e=new e);e.pluginInitializer&&e.pluginInitializer(this);this.get("plugins").push(e);return this},unplug:function(e){var h=[],i=this,j="string"===typeof e;y.each(i.get("plugins"),function(l){var n=0,k;e&&(j?(k=l.get&&l.get("pluginId")||l.pluginId,k!==e&&(h.push(l),n=1)):l!==e&&(h.push(l),n=1));n||l.pluginDestructor(i)});i.setInternal("plugins",h);return i},getPlugin:function(e){var h=null;y.each(this.get("plugins"),function(i){if((i.get&&i.get("pluginId")||i.pluginId)===e){return h=i,!1}});return h},destructor:y.noop,destroy:function(){this.get("destroyed")||(v.call(this,"pluginDestructor"),this.destructor(),this.set("destroyed",!0),this.fire("destroy"),this.detach())}});y.mix(m,{__hooks__:{initializer:x(),destructor:x("__destructor",!0)},ATTRS:{plugins:{value:[]},destroyed:{value:!1},listeners:{value:[]}},extend:function z(k,l,j){y.isArray(k)||(j=l,l=k,k=[]);j=j||{};l=l||{};l=d.extend.call(this,l,j);l.__extensions__=k;g.call(l,{});if(k.length){var e={},i={};y.each(k.concat(l),function(h){if(h){y.each(h.ATTRS,function(o,q){var p=e[q]=e[q]||{};y.mix(p,o)});var h=h.prototype,n;for(n in h){h.hasOwnProperty(n)&&(i[n]=h[n])}}});l.ATTRS=e;i.constructor=l;y.augment(l,i)}l.extend=j.extend||z;l.addMembers=g;return l}});var b=m.addMembers;return y.Base=m});KISSY.add("attribute",["event/custom"],function(Q,L,h,G){function N(j,g){return"string"===typeof g?j[g]:g}function M(g){return g.__attrVals||(g.__attrVals={})}function J(q,j,r,g,p,o,n,k){n=n||r;return q.fire(j+Q.ucfirst(r)+"Change",Q.mix({attrName:n,subAttrName:o,prevVal:g,newVal:p},k))}function O(k,j,n){var g=k[j];!n&&!g&&(k[j]=g={});return g||{}}function m(k,j){for(var n=0,g=j.length;void 0!==k&&n<g;n++){k=k[j[n]]}return k}function i(j){var g;-1!==j.indexOf(".")&&(g=j.split("."),j=g.shift());return{path:g,name:j}}function f(o,j,p){var g=p;if(j){var o=g=void 0===o?{}:Q.clone(o),n=j.length-1;if(0<=n){for(var k=0;k<n;k++){o=o[j[k]]}void 0!==o&&(o[j[k]]=p)}}return g}function e(r,u,s,t,q){var p,o,n;p=i(u);var g=u,u=p.name;p=p.path;n=r.get(u);var k=u,j=O(r,"__defaultBeforeFns");j[k]||(j[k]=1,k="before"+Q.ucfirst(k)+"Change",r.publish(k,{defaultFn:d}));p&&(o=m(n,p));if(t.force||!(!p&&n===s||p&&o===s)){s=f(n,p,s);s=Q.mix({attrName:u,subAttrName:g,prevVal:n,newVal:s,_opts:t,_attrs:q,target:r},t.data);if(t.silent){if(P===d.call(r,s)){return P}}else{if(P===r.fire("before"+Q.ucfirst(u)+"Change",s)){return P}}return r}}function d(o){if(o.target===this){var j=o.newVal,p=o.prevVal,g=o.attrName,n=o.subAttrName,k=o._attrs,o=o._opts,j=this.setInternal(g,j);if(j===P){return j}o.silent||(j=M(this)[g],J(this,"after",g,p,j,n,null,o.data),k?k.push({prevVal:p,newVal:j,attrName:g,subAttrName:n}):J(this,"","*",[p],[j],[n],[g],o.data))}}function H(n){var j=this.constructor;for(this.userConfig=n;j;){var o=j.ATTRS;if(o){var g=void 0;for(g in o){this.addAttr(g,o[g],!1)}}j=j.superclass?j.superclass.constructor:null}if(n){for(var k in n){this.setInternal(k,n[k])}}}function c(k,j){var n=j.__hooks__||{},g;for(g in n){g in k&&(k[g]=n[g](k[g]))}Q.each(k,function(o,s){if("function"===typeof o){var r=0;if(o.__owner__){var q=o.__owner__;delete o.__owner__;delete o.__name__;var r=o.__wrapped__=1,p=b(o);p.__owner__=q;p.__name__=s;q.prototype[s]=p}else{o.__wrapped__&&(r=1)}r&&(k[s]=o=b(o));o.__owner__=j;o.__name__=s}})}function l(g){c(g,this);Q.mix(this.prototype,g)}function D(n,j){var o=n.getAttrs(),g=O(o,j,1),k=g.valueFn;if(k&&(k=N(n,k))){k=k.call(n),void 0!==k&&(g.value=k),delete g.valueFn,o[j]=g}return g.value}function K(o,j,p,g){var n,k;n=i(j);j=n.name;if(n=n.path){k=o.get(j),p=f(k,n,p)}if((n=O(o.getAttrs(),j).validator)&&(n=N(o,n))){if(o=n.call(o,p,j,g),void 0!==o&&!0!==o){return o}}}L=L("event/custom");G.exports=H;var b=Q.bind,I={},P=!1;H.extend=function R(o,g){var n,g=g||{},o=o||{},k=g.__hooks__;if(n=this.__hooks__){k=g.__hooks__=g.__hooks__||{},Q.mix(k,n,!1)}n=o.hasOwnProperty("constructor")?o.constructor:function(){this.callSuper.apply(this,arguments)};o.constructor=n;n.__hooks__=k;c(o,n);var j=g.inheritedStatics;if(k=this.inheritedStatics){j=g.inheritedStatics=g.inheritedStatics||{},Q.mix(j,k,!1)}Q.extend(n,this,o,g);j&&Q.mix(n,j);n.extend=g.extend||R;n.addMembers=l;return n};Q.augment(H,L.Target,{INVALID:I,callSuper:function(){var j,n,g=arguments;"function"===typeof this&&this.__name__?(j=this,n=g[0],g=Array.prototype.slice.call(g,1)):(j=arguments.callee.caller,j.__wrapped__&&(j=j.caller),n=this);var k=j.__name__;if(k){return j=j.__owner__.superclass[k],!j?void 0:j.apply(n,g||[])}},getAttrs:function(){return this.__attrs||(this.__attrs={})},getAttrVals:function(){var j={},k,g=this.getAttrs();for(k in g){j[k]=this.get(k)}return j},addAttr:function(j,o,g){var n=this.getAttrs(),k,o=Q.clone(o);(k=n[j])?Q.mix(k,o,g):n[j]=o;return this},addAttrs:function(j,k){var g=this;Q.each(j,function(n,o){g.addAttr(o,n)});k&&g.set(k);return g},hasAttr:function(g){return this.getAttrs().hasOwnProperty(g)},removeAttr:function(j){var k=M(this),g=this.getAttrs();this.hasAttr(j)&&(delete g[j],delete k[j]);return this},set:function(u,s,t){var r;if(Q.isPlainObject(u)){var t=s||{},s=Object(u),q=[],p=[];for(u in s){void 0!==(r=K(this,u,s[u],s))&&p.push(r)}if(p.length){return t.error&&t.error(p),P}for(u in s){e(this,u,s[u],t,q)}var o=[],n=[],j=[],g=[];Q.each(q,function(k){n.push(k.prevVal);j.push(k.newVal);o.push(k.attrName);g.push(k.subAttrName)});o.length&&J(this,"","*",n,j,g,o,t.data);return this}t=t||{};r=K(this,u,s);return void 0!==r?(t.error&&t.error(r),P):e(this,u,s,t)},setInternal:function(j,n){var g,k=O(this.getAttrs(),j).setter;if(k&&(k=N(this,k))){g=k.call(this,n,j)}if(g===I){return P}void 0!==g&&(n=g);M(this)[j]=n},get:function(j){var o,g=M(this),n,k;-1!==j.indexOf(".")&&(o=j.split("."),j=o.shift());n=O(this.getAttrs(),j,1).getter;k=j in g?g[j]:D(this,j);if(n&&(n=N(this,n))){k=n.call(this,k,j)}!(j in g)&&void 0!==k&&(g[j]=k);o&&(k=m(k,o));return k},reset:function(j,n){if("string"===typeof j){return this.hasAttr(j)?this.set(j,D(this,j),n):this}var n=j,g=this.getAttrs(),k={};for(j in g){k[j]=D(this,j)}this.set(k,n);return this}})});KISSY.add("overlay/extension/loading",["node"],function(b,f){function i(){}var d=f("node");i.prototype={loading:function(){this._loadingExtEl||(this._loadingExtEl=(new d('<div class="'+this.get("prefixCls")+'ext-loading" style="position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);"/>')).appendTo(this.$el));this._loadingExtEl.show()},unloading:function(){var c=this._loadingExtEl;c&&c.hide()}};return i});KISSY.add("overlay/extension/mask",["node"],function(s,v){function x(d,c){var e=d.view.getBaseCssClasses("mask"),e=n('<div  style="width:'+(u?"expression(KISSY.DOM.docWidth())":"100%")+";left:0;top:0;height:"+(u?"expression(KISSY.DOM.docHeight())":"100%")+";position:"+(u?"absolute":"fixed")+';" class="'+e+" "+c+'">'+(u?'<iframe style="position:absolute;left:0;top:0;background:red;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");e.unselectable();e.on("mousedown",function(b){b.preventDefault()});return e}function t(){}function y(e,f){var c=e.get("maskNode"),g=e.view.getBaseCssClasses("mask-hidden");f?c.removeClass(g):c.addClass(g)}function z(b,g,l,m){var h=b.effect||p;y(m,l);if(h!==p){var m=b.duration,b=b.easing,j=l?1:0;g.stop(1,1);g.css("display",l?p:"block");g[h+q[h][j]](m,function(){g.css("display","")},b)}}function r(e){var f=this.get("maskNode");if(e=e.newVal){var c=Number(this.$el.css("z-index"));isNaN(c)||f.css("z-index",c)}z(this.get("mask"),f,e,this)}var w=s.UA,k=v("node"),u=6===w.ie,n=k.all;t.ATTRS={mask:{value:!1},maskNode:{}};var p="none",q={fade:["Out","In"],slide:["Up","Down"]};t.prototype={__renderUI:function(){this.get("mask")&&this.set("maskNode",x(this,this.get("visible")?"":this.view.getBaseCssClasses("mask-hidden")))},__bindUI:function(){var b,c;if(c=this.get("mask")){b=this.get("maskNode");if(c.closeOnClick){b.on(k.Gesture.tap,this.close,this)}this.on("afterVisibleChange",r)}},__destructor:function(){var b;(b=this.get("maskNode"))&&b.remove()}};return t});KISSY.add("overlay/close-xtpl",[],function(){return function(l){var p,r=this;p=this.config.utils;var m=p.runBlockCommand,s=p.renderOutput,t=p.getProperty,k=p.runInlineCommand,q=p.getPropertyOrRunCommand;p="";var j={},n=[],t=t(r,l,"closable",0,1);n.push(t);j.params=n;j.fn=function(b){var d;d='\n<a href="javascript:void(\'close\')"\n   id="ks-overlay-close-';var h=q(r,b,{},"id",0,3);d+=s(h,!0);d+='"\n   class="';var h={},c=[];c.push("close");h.params=c;h=k(r,b,h,"getBaseCssClasses",4);d+=s(h,!0);d+="\"\n   role='button'>\n    <span class=\"";h={};c=[];c.push("close-x");h.params=c;b=k(r,b,h,"getBaseCssClasses",6);d+=s(b,!0);return d+'">close</span>\n</a>\n'};p+=m(r,l,j,"if",1);return p+"\n"}});KISSY.add("overlay/overlay-xtpl",["overlay/close-xtpl","component/extension/content-xtpl"],function(b,f,i,d){return function(g){var h,j;h=this.config.utils;"undefined"!==typeof d&&d.kissy&&(j=d);var l=h.renderOutput,n=h.runInlineCommand;h="";var k={},e=[];e.push("overlay/close-xtpl");k.params=e;j&&(f("overlay/close-xtpl"),k.params[0]=j.resolveByName(k.params[0]));k=n(this,g,k,"include",1);h+=l(k,!1);h+="\n";k={};e=[];e.push("component/extension/content-xtpl");k.params=e;j&&(f("component/extension/content-xtpl"),k.params[0]=j.resolveByName(k.params[0]));g=n(this,g,k,"include",2);return h+=l(g,!1)}});KISSY.add("overlay/overlay-render",["component/container","./overlay-xtpl","component/extension/content-render"],function(f,j){var k=j("component/container"),i=j("./overlay-xtpl"),d=j("component/extension/content-render");return k.getDefaultRender().extend([d],{createDom:function(){this.fillChildrenElsBySelectors({closeBtn:"#ks-overlay-close-{id}"})}},{ATTRS:{contentTpl:{value:i}},HTML_PARSER:{closeBtn:function(b){return b.one("."+this.getBaseCssClass("close"))}}})});KISSY.add("overlay/extension/overlay-effect",[],function(i){function k(b){var c=b.$el.clone(!0);c.css({visibility:"visible",overflow:"hidden"}).addClass(b.get("prefixCls")+"overlay-ghost");return b.__afterCreateEffectGhost(c)}function l(t,q,s){t.__effectGhost&&t.__effectGhost.stop(1,1);var p=t.$el,r=i.all,o=t.get("effect"),m=r(o.target),r=o.duration,m=i.mix(m.offset(),{width:m.width(),height:m.height()}),h=i.mix(p.offset(),{width:p.width(),height:p.height()}),e=k(t),o=o.easing;e.insertAfter(p);q?(q=m,m=h):q=h;p.css("visibility","hidden");e.css(q);t.__effectGhost=e;e.animate(m,{duration:r,easing:o,complete:function(){t.__effectGhost=null;e.remove();p.css("visibility","");s()}})}function j(c,r,q){var p=c.$el,o=c.get("effect"),n=o.effect||"none",m=o.target;"none"===n&&!m?q():m?l(c,r,q):(c=o.duration,o=o.easing,m=r?1:0,p.stop(1,1),p.css({visibility:"visible",display:r?"none":"block"}),p[n+f[n][m]](c,function(){p.css({display:"block",visibility:""});q()},o))}function d(){}var f={fade:["Out","In"],slide:["Up","Down"]};d.ATTRS={effect:{value:{effect:"",target:null,duration:0.5,easing:"easeOut"},setter:function(c){var e=c.effect;"string"===typeof e&&!f[e]&&(c.effect="")}}};d.prototype={__afterCreateEffectGhost:function(b){return b},_onSetVisible:function(e){var c=this;j(c,e,function(){c.fire(e?"show":"hide")})}};return d});KISSY.add("overlay/control","component/container,component/extension/shim,component/extension/align,./extension/loading,./extension/mask,./overlay-render,./extension/overlay-effect".split(","),function(l,p){var r=p("component/container"),m=p("component/extension/shim"),s=p("component/extension/align"),t=p("./extension/loading"),k=p("./extension/mask"),q=p("./overlay-render"),j=p("./extension/overlay-effect"),n={hide:"hide",destroy:"destroy"};return r.extend([m,t,s,k,j],{bindUI:function(){var d=this,c=d.get("closeBtn");if(c){c.on("click",function(e){d.close();e.preventDefault()})}},close:function(){this[n[this.get("closeAction")]||"hide"]();return this}},{ATTRS:{contentEl:{},closable:{value:false,view:1},closeBtn:{view:1},closeAction:{value:"hide"},focusable:{value:false},allowTextSelection:{value:true},handleMouseEvents:{value:false},visible:{value:false},xrender:{value:q}},xclass:"overlay"})});KISSY.add("overlay/dialog-xtpl",["overlay/close-xtpl"],function(b,f,i,d){return function(v){var w,u=this,t;w=this.config.utils;"undefined"!==typeof d&&d.kissy&&(t=d);var r=w.runBlockCommand,s=w.renderOutput,g=w.getProperty,o=w.runInlineCommand,q=w.getPropertyOrRunCommand;w="";var p={},e=[];e.push("overlay/close-xtpl");p.params=e;t&&(f("overlay/close-xtpl"),p.params[0]=t.resolveByName(p.params[0]));t=o(u,v,p,"include",1);w+=s(t,!1);w+='\n<div id="ks-content-';t=q(u,v,{},"id",0,2);w+=s(t,!0);w+='"\n     class="';t={};p=[];p.push("content");t.params=p;t=o(u,v,t,"getBaseCssClasses",3);w+=s(t,!0);w+='">\n    <div class="';t={};p=[];p.push("header");t.params=p;t=o(u,v,t,"getBaseCssClasses",4);w+=s(t,!0);w+='"\n         style="\n';t={};p=[];e=g(u,v,"headerStyle",0,6);p.push(e);t.params=p;t.fn=function(h){var c;c=" \n ";var j=q(u,h,{},"xindex",0,7);c=c+s(j,true);c=c+":";h=q(u,h,{},".",0,7);c=c+s(h,true);return c+";\n"};w+=r(u,v,t,"each",6);w+='\n"\n         id="ks-stdmod-header-';t=q(u,v,{},"id",0,10);w+=s(t,!0);w+='">';t=q(u,v,{},"headerContent",0,10);w+=s(t,!1);w+='</div>\n\n    <div class="';t={};p=[];p.push("body");t.params=p;t=o(u,v,t,"getBaseCssClasses",12);w+=s(t,!0);w+='"\n         style="\n';t={};p=[];e=g(u,v,"bodyStyle",0,14);p.push(e);t.params=p;t.fn=function(h){var c;c=" \n ";var j=q(u,h,{},"xindex",0,15);c=c+s(j,true);c=c+":";h=q(u,h,{},".",0,15);c=c+s(h,true);return c+";\n"};w+=r(u,v,t,"each",14);w+='\n"\n         id="ks-stdmod-body-';t=q(u,v,{},"id",0,18);w+=s(t,!0);w+='">';t=q(u,v,{},"bodyContent",0,18);w+=s(t,!1);w+='</div>\n\n    <div class="';t={};p=[];p.push("footer");t.params=p;o=o(u,v,t,"getBaseCssClasses",20);w+=s(o,!0);w+='"\n         style="\n';o={};t=[];g=g(u,v,"footerStyle",0,22);t.push(g);o.params=t;o.fn=function(h){var c;c=" \n ";var j=q(u,h,{},"xindex",0,23);c=c+s(j,true);c=c+":";h=q(u,h,{},".",0,23);c=c+s(h,true);return c+";\n"};w+=r(u,v,o,"each",22);w+='\n"\n         id="ks-stdmod-footer-';r=q(u,v,{},"id",0,26);w+=s(r,!0);w+='">';v=q(u,v,{},"footerContent",0,26);w+=s(v,!1);return w+'</div>\n</div>\n<div tabindex="0"></div>'}});KISSY.add("overlay/dialog-render",["./overlay-render","./dialog-xtpl"],function(b,f){var i=f("./overlay-render"),d=f("./dialog-xtpl");return i.extend({beforeCreateDom:function(c){b.mix(c.elAttrs,{role:"dialog","aria-labelledby":"ks-stdmod-header-"+this.control.get("id")})},createDom:function(){this.fillChildrenElsBySelectors({header:"#ks-stdmod-header-{id}",body:"#ks-stdmod-body-{id}",footer:"#ks-stdmod-footer-{id}"})},getChildrenContainerEl:function(){return this.control.get("body")},_onSetBodyStyle:function(c){this.control.get("body").css(c)},_onSetHeaderStyle:function(c){this.control.get("header").css(c)},_onSetFooterStyle:function(c){this.control.get("footer").css(c)},_onSetBodyContent:function(c){var e;e=this.control.get("body");e.html(c)},_onSetHeaderContent:function(c){var e;e=this.control.get("header");e.html(c)},_onSetFooterContent:function(c){var e;e=this.control.get("footer");e.html(c)}},{ATTRS:{contentTpl:{value:d}},HTML_PARSER:{header:function(c){return c.one("."+this.getBaseCssClass("header"))},body:function(c){return c.one("."+this.getBaseCssClass("body"))},footer:function(c){return c.one("."+this.getBaseCssClass("footer"))},headerContent:function(c){return c.one("."+this.getBaseCssClass("header")).html()},bodyContent:function(c){return c.one("."+this.getBaseCssClass("body")).html()},footerContent:function(c){return(c=c.one("."+this.getBaseCssClass("footer")))&&c.html()}}})});KISSY.add("overlay/dialog",["./control","./dialog-render","node"],function(i,k){var l=k("./control"),j=k("./dialog-render"),d=k("node"),l=l.extend({__afterCreateEffectGhost:function(e){var c=this.get("body");e.all("."+this.get("prefixCls")+"stdmod-body").css({height:c.height(),width:c.width()}).html("");return e},handleKeyDownInternal:function(m){if(this.get("escapeToClose")&&m.keyCode===d.KeyCode.ESC){if("select"!==m.target.nodeName.toLowerCase()||m.target.disabled){this.close(),m.halt()}}else{f:if(m.keyCode===f){var h=this.$el,g=d.all(m.target),b=h.last();if(g.equals(h)&&m.shiftKey){b[0].focus(),m.halt()}else{if(g.equals(b)&&!m.shiftKey){this.focus(),m.halt()}else{if(g.equals(h)||h.contains(g)){break f}}}m.halt()}}},_onSetVisible:function(g,e){var m=this.el;if(g){this.__lastActive=m.ownerDocument.activeElement,this.focus(),m.setAttribute("aria-hidden","false")}else{m.setAttribute("aria-hidden","true");try{this.__lastActive&&this.__lastActive.focus()}catch(h){}}this.callSuper(g,e)}},{ATTRS:{header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{value:{},view:1},footerStyle:{value:{},view:1},headerStyle:{value:{},view:1},headerContent:{value:"",view:1},bodyContent:{value:"",view:1},footerContent:{value:"",view:1},closable:{value:!0},xrender:{value:j},focusable:{value:!0},escapeToClose:{value:!0}},xclass:"dialog"}),f=d.KeyCode.TAB;return l});KISSY.add("overlay/popup",["./control"],function(b,c){return c("./control").extend({initializer:function(){var d=this;d.get("trigger")&&("mouse"===d.get("triggerType")?(d._bindTriggerMouse(),d.on("afterRenderUI",function(){d._bindContainerMouse()})):d._bindTriggerClick())},_bindTriggerMouse:function(){var g=this,f=g.get("trigger"),d;g.__mouseEnterPopup=function(e){g._clearHiddenTimer();d=b.later(function(){g._showing(e);d=void 0},1000*g.get("mouseDelay"))};f.on("mouseenter",g.__mouseEnterPopup);g._mouseLeavePopup=function(){d&&(d.cancel(),d=void 0);g._setHiddenTimer()};f.on("mouseleave",g._mouseLeavePopup)},_bindContainerMouse:function(){this.$el.on("mouseleave",this._setHiddenTimer,this).on("mouseenter",this._clearHiddenTimer,this)},_setHiddenTimer:function(){var d=this;d._hiddenTimer=b.later(function(){d._hiding()},1000*d.get("mouseDelay"))},_clearHiddenTimer:function(){this._hiddenTimer&&(this._hiddenTimer.cancel(),this._hiddenTimer=void 0)},_bindTriggerClick:function(){var d=this;d.__clickPopup=function(f){f.preventDefault();if(d.get("toggle")){d[d.get("visible")?"_hiding":"_showing"](f)}else{d._showing(f)}};d.get("trigger").on("click",d.__clickPopup)},_showing:function(d){this.set("currentTrigger",b.one(d.target));this.show()},_hiding:function(){this.set("currentTrigger",void 0);this.hide()},destructor:function(){var f=this.$el,d=this.get("trigger");d&&(this.__clickPopup&&d.detach("click",this.__clickPopup),this.__mouseEnterPopup&&d.detach("mouseenter",this.__mouseEnterPopup),this._mouseLeavePopup&&d.detach("mouseleave",this._mouseLeavePopup));f.detach("mouseleave",this._setHiddenTimer,this).detach("mouseenter",this._clearHiddenTimer,this)}},{ATTRS:{trigger:{setter:function(d){return b.all(d)}},triggerType:{value:"click"},currentTrigger:{},mouseDelay:{value:0.1},toggle:{value:!1}},xclass:"popup"})});KISSY.add("overlay",["overlay/control","overlay/dialog","overlay/popup"],function(f,j){var k=j("overlay/control"),i=j("overlay/dialog"),d=j("overlay/popup");k.Dialog=i;f.Dialog=i;k.Popup=d;return f.Overlay=k});KISSY.add("component/container/render",["component/control","component/manager"],function(c,h){var e=h("component/control"),b=h("component/manager");return e.getDefaultRender().extend([],{decorateDom:function(){var m=this,k=m.getChildrenContainerEl(),i=m.control,g=i.get("defaultChildCfg"),n=g.prefixCls,l=g.xclass,j=[];k.children().each(function(d){var o=m.getComponentConstructorByNode(n,d)||l&&b.getConstructorByXClass(l);o&&j.push(new o(c.merge(g,{srcNode:d})))});i.set("children",j)},getChildrenContainerEl:function(){return this.$el}},{name:"ContainerRender"})});KISSY.add("component/container",["component/control","./container/render"],function(h,m){function l(f){if(f.target===this){var d=f.component,g=this.get("children"),f=f.index;g.splice(f,0,d);g=this.get("children");d=g[f];d.setInternal("parent",this);this.get("rendered")&&this.renderChild(f);this.fire("afterAddChild",{component:d,index:f})}}function e(g){if(g.target===this){var f=g.component,n,j,i=g.destroy,k=this.get("children"),g=g.index;-1!==g&&k.splice(g,1);f.setInternal("parent",null);if(i){f.destroy&&f.destroy()}else{if(f.get&&(j=f.el)){(n=j.parentNode)&&n.removeChild(j)}}this.fire("afterRemoveChild",{component:f,index:g})}}var c=m("component/control"),b=m("./container/render");return c.extend({isContainer:!0,initializer:function(){var f=this.get("prefixCls"),d=this.get("defaultChildCfg");this.publish("beforeAddChild",{defaultFn:l});this.publish("beforeRemoveChild",{defaultFn:e});d.prefixCls=d.prefixCls||f},createDom:function(){this.createChildren()},renderUI:function(){this.renderChildren()},renderChildren:function(){var f,d=this.get("children");for(f=0;f<d.length;f++){this.renderChild(f)}},createChildren:function(){var f,d=this.get("children");for(f=0;f<d.length;f++){this.createChild(f)}},addChild:function(f,d){var g=this.get("children");void 0===d&&(d=g.length);this.fire("beforeAddChild",{component:f,index:d})},renderChild:function(f){var d=this.get("children");this.createChild(f).render();this.fire("afterRenderChild",{component:d[f],index:f})},createChild:function(g){var f,k,i,j;f=this.get("children")[g];j=this.view.getChildrenContainerEl();i=j[0];k=i.children[g]||null;f.get("rendered")?(j=f.el,j.parentNode!==i&&i.insertBefore(j,k)):(k?f.set("elBefore",k):f.set("render",j),f.create());this.fire("afterCreateChild",{component:f,index:g});return f},removeChild:function(f,d){void 0===d&&(d=!0);this.fire("beforeRemoveChild",{component:f,index:h.indexOf(f,this.get("children")),destroy:d})},removeChildren:function(f){var d,g=[].concat(this.get("children"));for(d=0;d<g.length;d++){this.removeChild(g[d],f)}return this},getChildAt:function(d){return this.get("children")[d]||null},destructor:function(){var f,d=this.get("children");for(f=0;f<d.length;f++){d[f].destroy&&d[f].destroy()}}},{ATTRS:{children:{value:[],getter:function(g){var f=null,j,i;for(j=0;j<g.length;j++){i=g[j],i.isControl||(f=f||this.get("defaultChildCfg"),h.mix(i,f,!1),g[j]=this.createComponent(i))}return g},setter:function(f){var d,g;for(d=0;d<f.length;d++){g=f[d],g.isControl&&g.setInternal("parent",this)}}},defaultChildCfg:{value:{}},xrender:{value:b}},name:"container"})});KISSY.add("component/control/process",["base","promise"],function(o,f){function n(c){c.fire("beforeSyncUI");c.syncUI();c.__callPluginsMethod("pluginSyncUI");c.fire("afterSyncUI")}var e=f("base"),i=f("promise").Defer,p=e.prototype.__getHook,q=o.noop,l=e.extend({bindInternal:q,syncInternal:q,initializer:function(){this._renderedDefer=new i},renderUI:q,syncUI:q,bindUI:q,onRendered:function(c){return this._renderedDefer.promise.then(c)},create:function(){this.get("created")||(this.fire("beforeCreateDom"),this.createInternal(),this.__callPluginsMethod("pluginCreateDom"),this.fire("afterCreateDom"),this.setInternal("created",!0));return this},createInternal:function(){this.createDom()},render:function(){this.get("rendered")||(this.create(),this.fire("beforeRenderUI"),this.renderUI(),this.__callPluginsMethod("pluginRenderUI"),this.fire("afterRenderUI"),this.fire("beforeBindUI"),l.superclass.bindInternal.call(this),this.bindUI(),this.__callPluginsMethod("pluginBindUI"),this.fire("afterBindUI"),l.superclass.syncInternal.call(this),n(this),this.setInternal("rendered",!0));return this},sync:function(){n(this)},plug:function(d){var g=this.get("plugins");this.callSuper(d);d=g[g.length-1];this.get("rendered")?(d.pluginCreateDom&&d.pluginCreateDom(this),d.pluginRenderUI&&d.pluginCreateDom(this),d.pluginBindUI&&d.pluginBindUI(this),d.pluginSyncUI&&d.pluginSyncUI(this)):this.get("created")&&d.pluginCreateDom&&d.pluginCreateDom(this);return this}},{__hooks__:{createDom:p("__createDom"),renderUI:p("__renderUI"),bindUI:p("__bindUI"),syncUI:p("__syncUI")},name:"ComponentProcess",ATTRS:{rendered:{value:!1,setter:function(c){c&&this._renderedDefer.resolve(this)}},created:{value:!1}}});return l});KISSY.add("component/control/render-xtpl",[],function(){return function(r){var u,q=this;u=this.config.utils;var e=u.runBlockCommand,n=u.renderOutput,s=u.getProperty,t=u.runInlineCommand,o=u.getPropertyOrRunCommand;u='<div id="';var p=o(q,r,{},"id",0,1);u+=n(p,!0);u+='"\n class="';var p={},f=[];f.push("");p.params=f;t=t(q,r,p,"getBaseCssClasses",2);u+=n(t,!0);u+="\n";t={};p=[];f=s(q,r,"elCls",0,3);p.push(f);t.params=p;t.fn=function(d){var g;g="\n ";d=o(q,d,{},".",0,4);g+=n(d,!0);return g+"  \n"};u+=e(q,r,t,"each",3);u+='\n"\n\n';t={};p=[];f=s(q,r,"elAttrs",0,8);p.push(f);t.params=p;t.fn=function(d){var h;h=" \n ";var g=o(q,d,{},"xindex",0,9);h+=n(g,!0);h+='="';d=o(q,d,{},".",0,9);h+=n(d,!0);return h+'"\n'};u+=e(q,r,t,"each",8);u+='\n\nstyle="\n';t={};p=[];s=s(q,r,"elStyle",0,13);p.push(s);t.params=p;t.fn=function(d){var h;h=" \n ";var g=o(q,d,{},"xindex",0,14);h+=n(g,!0);h+=":";d=o(q,d,{},".",0,14);h+=n(d,!0);return h+";\n"};u+=e(q,r,t,"each",13);return u+'\n">'}});KISSY.add("component/control/render",["node","xtemplate/runtime","./process","./render-xtpl","component/manager"],function(G,K){function F(b){"number"===typeof b&&(b+="px");return b}function A(b){b||(b=[""]);"string"===typeof b&&(b=b.split(/\s+/));return b}function C(k,h,d){for(var l="",j=0,i=d.length,h=k+h;j<i;j++){k=(k=d[j])?"-"+k:k,l+=" "+h+k}return l}function I(c){var b;c.target===this.control&&(b=this[H+c.type.slice(5).slice(0,-6)],b.call(this,c.newVal,c))}function J(c,b){return this.config.view.getBaseCssClasses(b.params[0])}function D(c,b){return this.config.view.getBaseCssClass(b.params[0])}var E=K("node"),B=K("xtemplate/runtime"),z=K("./process"),y=K("./render-xtpl"),L=K("component/manager"),H="_onSet",x=G.trim,v=E.all,u=G.UA,e=G.Env.host.document;return z.extend({isRender:!0,createInternal:function(){var b=this.control.get("srcNode");b?this.decorateDom(b):this.callSuper()},beforeCreateDom:function(n){var r=this.control,q,p,m,l=r.get("elAttrs"),j=r.get("elCls"),o;q=r.getAttrs();o=r.get("elStyle");var h=r.get("elCls");for(p in q){m=q[p],m.view&&(n[p]=r.get(p))}q=n.width;p=n.height;m=n.visible;n=n.zIndex;q&&(o.width=F(q));p&&(o.height=F(p));n&&(o["z-index"]=n);m||h.push(this.getBaseCssClasses("hidden"));if(o=r.get("disabled")){j.push(this.getBaseCssClasses("disabled")),l["aria-disabled"]="true"}r.get("highlighted")&&j.push(this.getBaseCssClasses("hover"));r.get("focusable")&&(9>u.ieMode&&(l.hideFocus="true"),l.tabindex=o?"-1":"0")},createDom:function(){this.beforeCreateDom(this.renderData={},this.childrenElSelectors={},this.renderCommands={getBaseCssClasses:J,getBaseCssClass:D});var c=this.control,b;b=this.renderTpl(y)+this.renderTpl(this.get("contentTpl"))+"</div>";c.setInternal("el",this.$el=v(b));this.el=this.$el[0];this.fillChildrenElsBySelectors()},decorateDom:function(h){var g=this.control;h.attr("id")||h.attr("id",g.get("id"));var k=this.constructor.HTML_PARSER,i,j;for(i in k){j=k[i],"function"===typeof j?(j=j.call(this,h),void 0!==j&&g.setInternal(i,j)):"string"===typeof j?g.setInternal(i,h.one(j)):G.isArray(j)&&j[0]&&g.setInternal(i,h.all(j[0]))}g.setInternal("el",this.$el=h);this.el=h[0]},renderUI:function(){var f=this.control,d=this.$el;if(!f.get("srcNode")){var g=f.get("render");(f=f.get("elBefore"))?d.insertBefore(f,void 0):g?d.appendTo(g,void 0):d.appendTo(e.body,void 0)}},bindUI:function(){var f=this.control,d=f.getAttrs(),m,l;for(m in d){l=d[m];var j=G.ucfirst(m),g=this[H+j];if(l.view&&g){f.on("after"+j+"Change",I,this)}}},destructor:function(){this.$el&&this.$el.remove()},$:function(b){return this.$el.all(b)},fillChildrenElsBySelectors:function(h){var g=this.$el,k=this.control,i,j,h=h||this.childrenElSelectors;for(i in h){j=h[i],"function"===typeof j?k.setInternal(i,j(g)):k.setInternal(i,this.$(G.substitute(j,this.renderData))),delete h[i]}},renderTpl:function(f,d,g){d=d||this.renderData;g=g||this.renderCommands;return(new (this.get("xtemplate"))(f,{control:this.control,view:this,commands:g})).render(d)},getComponentConstructorByNode:function(d,h){var g=h[0].className;return g?(g=g.replace(RegExp("\\b"+d,"ig"),""),L.getConstructorByXClass(g)):null},getComponentCssClasses:function(){if(this.componentCssClasses){return this.componentCssClasses}for(var f=this.control.constructor,d,g=[];f&&!f.prototype.hasOwnProperty("isControl");){(d=f.xclass)&&g.push(d),f=f.superclass&&f.superclass.constructor}return this.componentCssClasses=g},getBaseCssClasses:function(i){for(var i=A(i),h=this.getComponentCssClasses(),m=0,k=this.get("control"),l="",j=h.length,k=k.get("prefixCls");m<j;m++){l+=C(k,h[m],i)}return x(l)},getBaseCssClass:function(b){return x(C(this.control.get("prefixCls"),this.getComponentCssClasses()[0],A(b)))},getKeyEventTarget:function(){return this.$el},_onSetWidth:function(b){this.$el.width(b)},_onSetHeight:function(b){this.$el.height(b)},_onSetContent:function(d){var c=this.$el;c.html(d);this.get("allowTextSelection")||c.unselectable()},_onSetVisible:function(f){var d=this.$el,g=this.getBaseCssClasses("hidden");f?d.removeClass(g):d.addClass(g)},_onSetHighlighted:function(d){var c=this.getBaseCssClasses("hover");this.$el[d?"addClass":"removeClass"](c)},_onSetDisabled:function(f){var d=this.control,g=this.getBaseCssClasses("disabled");this.$el[f?"addClass":"removeClass"](g).attr("aria-disabled",f);d.get("focusable")&&this.getKeyEventTarget().attr("tabindex",f?-1:0)},_onSetActive:function(d){var c=this.getBaseCssClasses("active");this.$el[d?"addClass":"removeClass"](c).attr("aria-pressed",!!d)},_onSetFocused:function(f){var d=this.$el,g=this.getBaseCssClasses("focused");d[f?"addClass":"removeClass"](g)},_onSetZIndex:function(b){this.$el.css("z-index",b)}},{__hooks__:{decorateDom:z.prototype.__getHook("__decorateDom"),beforeCreateDom:z.prototype.__getHook("__beforeCreateDom")},extend:function w(h,g,k){var i,j={};i=z.extend.apply(this,arguments);i.HTML_PARSER=i.HTML_PARSER||{};G.isArray(h)&&(G.each(h.concat(i),function(b){b&&G.each(b.HTML_PARSER,function(d,c){j[c]=d})}),i.HTML_PARSER=j);G.mix(i.HTML_PARSER,this.HTML_PARSER,!1);i.extend=w;return i},ATTRS:{control:{setter:function(b){this.control=b}},xtemplate:{value:B},contentTpl:{value:function(b){return b.get("content")||""}}},HTML_PARSER:{id:function(b){return(b=b[0].id)?b:void 0},content:function(b){return b.html()},disabled:function(b){return b.hasClass(this.getBaseCssClass("disabled"))}},name:"render"})});KISSY.add("component/control",["node","./control/process","component/manager","./control/render"],function(w,A){function v(){var d,c=this;do{d=c.ATTRS,c=c.superclass}while(!d||!d.xrender);return d.xrender.value}var q=A("node"),s=A("./control/process"),y=A("component/manager"),z=A("./control/render"),t=w.UA.ieMode,u=w.Features,r=q.Gesture,p=u.isTouchGestureSupported(),e=u.isTouchEventSupported(),z=s.extend({isControl:!0,createDom:function(){var f=this.get("xrender"),d=this.get("view"),g=this.get("id");d?d.set("control",this):this.set("view",this.view=d=new f({control:this}));d.create();f=d.getKeyEventTarget();this.get("allowTextSelection")||f.unselectable();y.addComponent(g,this)},renderUI:function(){this.view.render()},bindUI:function(){var b=this.view.getKeyEventTarget();if(this.get("focusable")){b.on("focus",this.handleFocus,this).on("blur",this.handleBlur,this).on("keydown",this.handleKeydown,this)}if(this.get("handleMouseEvents")){b=this.$el;if(!e){b.on("mouseenter",this.handleMouseEnter,this).on("mouseleave",this.handleMouseLeave,this).on("contextmenu",this.handleContextMenu,this)}b.on(r.start,this.handleMouseDown,this).on(r.end,this.handleMouseUp,this).on(r.tap,this.handleClick,this);if(r.cancel){b.on(r.cancel,this.handleMouseUp,this)}if(9>t){b.on("dblclick",this.handleDblClick,this)}}},sync:function(){this.fire("beforeSyncUI");this.syncUI();this.view.sync();this.__callPluginsMethod("pluginSyncUI");this.fire("afterSyncUI")},createComponent:function(d,c){return y.createComponent(d,c||this)},_onSetFocused:function(d){var c=this.view.getKeyEventTarget()[0];d?c.focus():c.ownerDocument.activeElement===c&&c.ownerDocument.body.focus()},_onSetX:function(b){this.$el.offset({left:b})},_onSetY:function(b){this.$el.offset({top:b})},_onSetVisible:function(b){this.fire(b?"show":"hide")},show:function(){this.render();this.set("visible",!0);return this},hide:function(){this.set("visible",!1);return this},focus:function(){this.get("focusable")&&this.set("focused",!0)},blur:function(){this.get("focusable")&&this.set("focused",!1)},move:function(d,c){this.set({x:d,y:c})},handleDblClick:function(b){this.get("disabled")||this.handleDblClickInternal(b)},handleDblClickInternal:function(b){this.handleClickInternal(b)},handleMouseEnter:function(b){this.get("disabled")||this.handleMouseEnterInternal(b)},handleMouseEnterInternal:function(b){this.set("highlighted",!!b)},handleMouseLeave:function(b){this.get("disabled")||this.handleMouseLeaveInternal(b)},handleMouseLeaveInternal:function(b){this.set("active",!1);this.set("highlighted",!b)},handleMouseDown:function(b){this.get("disabled")||this.handleMouseDownInternal(b)},handleMouseDownInternal:function(d){var c;if(1===d.which||p){this.get("activeable")&&this.set("active",!0),this.get("focusable")&&this.focus(),this.get("allowTextSelection")||(c=(c=d.target.nodeName)&&c.toLowerCase(),"input"!==c&&"textarea"!==c&&d.preventDefault())}},handleMouseUp:function(b){this.get("disabled")||this.handleMouseUpInternal(b)},handleMouseUpInternal:function(b){this.get("active")&&(1===b.which||p)&&this.set("active",!1)},handleContextMenu:function(b){this.get("disabled")||this.handleContextMenuInternal(b)},handleContextMenuInternal:function(){},handleFocus:function(){this.get("disabled")||this.handleFocusInternal()},handleFocusInternal:function(){this.focus();this.fire("focus")},handleBlur:function(){this.get("disabled")||this.handleBlurInternal()},handleBlurInternal:function(){this.blur();this.fire("blur")},handleKeydown:function(b){if(!this.get("disabled")&&this.handleKeyDownInternal(b)){return b.halt(),!0}},handleKeyDownInternal:function(b){if(b.keyCode===q.KeyCode.ENTER){return this.handleClickInternal(b)}},handleClick:function(b){this.get("disabled")||this.handleClickInternal(b)},handleClickInternal:function(){this.get("focusable")&&this.focus()},destructor:function(){y.removeComponent(this.get("id"));this.view?this.view.destroy():this.get("srcNode")&&this.get("srcNode").remove()}},{name:"control",ATTRS:{id:{view:1,valueFn:function(){return w.guid("ks-component")}},content:{view:1,value:""},width:{view:1},height:{view:1},elCls:{view:1,value:[],setter:function(b){"string"===typeof b&&(b=b.split(/\s+/));return b||[]}},elStyle:{view:1,value:{}},elAttrs:{view:1,value:{}},elBefore:{},el:{setter:function(b){this.$el=b;this.el=b[0]}},x:{},y:{},xy:{setter:function(d){var c=w.makeArray(d);c.length&&(void 0!==c[0]&&this.set("x",c[0]),void 0!==c[1]&&this.set("y",c[1]));return d},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},render:{},visible:{sync:0,value:!0,view:1},srcNode:{setter:function(b){return q.all(b)}},handleMouseEvents:{value:!0},focusable:{value:!0,view:1},allowTextSelection:{value:!1},activeable:{value:!0},focused:{view:1},active:{view:1,value:!1},highlighted:{view:1,value:!1},prefixCls:{view:1,value:w.config("component/prefixCls")||"ks-"},prefixXClass:{},parent:{setter:function(d,c){(c=this.get("parent"))&&this.removeTarget(c);d&&this.addTarget(d)}},disabled:{view:1,value:!1},xrender:{value:z},view:{setter:function(b){this.view=b}}}});z.getDefaultRender=v;z.extend=function x(d,m,h){var g=w.makeArray(arguments),k,f=g[g.length-1];if(k=f.xclass){f.name=k}g=s.extend.apply(this,g);k&&y.setConstructorByXClass(k,g);g.extend=x;g.getDefaultRender=v;return g};return z});KISSY.add("component/manager",[],function(){var b=0,f,d={},i={};return f={__instances:i,addComponent:function(e,c){i[e]=c},removeComponent:function(c){delete i[c]},getComponent:function(c){return i[c]},createComponent:function(e,c){var g,h;if(e){if(!e.isControl&&c&&(e.prefixCls||(e.prefixCls=c.get("prefixCls")),!e.xclass&&e.prefixXClass)){e.xclass=e.prefixXClass,e.xtype&&(e.xclass+="-"+e.xtype)}if(!e.isControl&&(h=e.xclass)){(g=f.getConstructorByXClass(h))||"can not find class by xclass desc : "+h,e=new g(e)}e.isControl&&c&&e.setInternal("parent",c)}return e},getConstructorByXClass:function(h){var h=h.split(/\s+/),g=-1,j,l,m,k=null;for(l=0;l<h.length;l++){if((m=d[h[l]])&&(j=m.priority)>g){g=j,k=m.constructor}}return k},setConstructorByXClass:function(e,c){d[e]={constructor:c,priority:b++}}}});KISSY.add("xtemplate/runtime/scope",[],function(c){function b(g,d){this.data=g||{};this.affix=d;this.root=this}b.prototype={isScope:1,setParent:function(d){this.parent=d;this.root=d.root},getParent:function(){return this.parent},getRoot:function(){return this.root},set:function(g,d){this.affix||(this.affix={});this.affix[g]=d},setData:function(d){this.data=d},getData:function(){return this.data},mix:function(d){this.affix||(this.affix={});c.mix(this.affix,d)},has:function(i){var g=this.data,d=this.affix;return d&&i in d?!0:"object"===typeof g&&i in g},get:function(i){var g=this.data,d=this.affix;if(d&&i in d){return d[i]}if("object"===typeof g&&i in g){return g[i]}},resolve:function(p,o){"."===p&&(p="this");var m=p.split("."),q=this,t,s,r,n,j;if("root"===m[0]){m.shift(),q=q.root}else{if(o){for(;q&&o--;){q=q.parent}}}var l=0;for(t=m.length;q;){j=1;r=q;for(s=0;s<t;s++){if(n=m[s],"this"===n){l=1}else{if(r===q){if(!q.has(n)){j=0;break}r=q.get(n)}else{if("object"!==typeof r||!(n in r)){j=0;break}r=r[n]}}}if(j){return r&&r.isScope&&(r=r.data),"function"===typeof r&&(r=r.call(this.data)),[r]}if(l){break}q=q.parent}return !1}};return b});KISSY.add("xtemplate/runtime/commands",["path","./scope"],function(d,b){var j,i=b("path"),c=b("./scope");return j={each:function(q,t){var s=t.params,r=s[0],p=s[2]||"xindex",s=s[1],o="",l,k,h;if(r){if(k=new c,d.isArray(r)){l=r.length;for(var g=0;g<l;g++){k.data=r[g],h=k.affix={xcount:l},h[p]=g,s&&(h[s]=r[g]),k.setParent(q),o+=t.fn(k)}}else{for(l in r){k.data=r[l],h=k.affix={},h[p]=l,s&&(h[s]=r[l]),k.setParent(q),o+=t.fn(k)}}}else{t.inverse&&(o=t.inverse(q))}return o},"with":function(g,f){var e=f.params[0],h="";e?(e=new c(e),e.setParent(g),h=f.fn(e)):f.inverse&&(h=f.inverse(g));return h},"if":function(g,f){var e="";f.params[0]?f.fn&&(e=f.fn(g)):f.inverse&&(e=f.inverse(g));return e},set:function(f,e){f.mix(e.hash);return""},include:function(g,f){var e=f.params;if(!e||1!==e.length){return"include must has one param",""}if(f.hash){var h=new c(f.hash);h.setParent(g);g=h}h=this.config.name;e=e[0];if("."===e.charAt(0)){if("unspecified"===h){return"parent template does not have name for relative sub tpl name: "+e,""}e=i.resolve(h,"../",e)}h=this.config.loader.call(this,e);f=d.merge(this.config);f.name=e;f.commands=this.config.commands;f.macros=this.config.macros;return this.invokeEngine(h,g,f)},macro:function(m,h){var g=h.params,n=g[0],l=g.slice(1),g=this.config.macros;if(h.fn){g[n]||(g[n]={paramNames:l,fn:h.fn})}else{var k={};(n=g[n])||"can not find macro:"+name;d.each(n.paramNames,function(e,f){k[e]=l[f]});g=new c(k);return n.fn.call(this,g)}return""},parse:function(f,e){return j.include.call(this,new c,e)}}});KISSY.add("xtemplate/runtime",["./runtime/commands","./runtime/scope"],function(r,m){function t(b){b}function s(h,f){for(var l=f.split("."),g=h,i=l.length,k=0;k<i&&!(g=g[l[k]],!g);k++){}return g}function q(f,B,A,C,z,y){var p,l=s(f.config.commands,C);if(l){try{p=l.call(f,B,A)}catch(k){k.message+': "'+C+'" at line '+z}return{find:!0,value:p}}y&&"can not find command: "+C+'" at line '+z;return{find:!1}}function u(h,e,g,l,k){var i,h=h.config.silent?t:r.error,e=e.resolve(g,l);!1===e?h('can not find property: "'+g+'" at line '+k,"warn"):i=e[0];return i}function x(c,b){this.tpl=c;b=r.merge(o,b);b.commands=r.merge(b.commands,w);b.utils=n;b.macros=b.macros||{};this.config=b}var w=m("./runtime/commands"),v=m("./runtime/scope"),j=r.escapeHtml,n={runBlockCommand:function(F,E,D,C,B){var A=F.config,y=A.silent?t:r.error,A=A.commands,g=s(A,C);if(!g){if(!D.params&&!D.hash){var z=E.resolve(C);!1===z?(y('can not find property: "'+C+'" at line '+B),z=""):z=z[0];g=A["if"];r.isArray(z)?g=A.each:"object"===typeof z&&(g=A["with"]);D.params=[z]}else{return"can not find command: "+C+'" at line '+B,""}}var e;try{e=g.call(F,E,D)}catch(f){f.message+': "'+C+'" at line '+B}return e},renderOutput:function(d,c){void 0===d&&(d="");return c&&d?j(d):d},getProperty:function(g,d,k,i,h){return u(g,d,k,i,h)},runInlineCommand:function(h,g,p,l,k){var i="",h=q(h,g,p,l,k);h.find&&(i=h.value);return i},getPropertyOrRunCommand:function(h,d,B,A,z,y){var p,l=B.hash||B.params,B=q(h,d,B,A,y,l);B.find?p=B.value:l||(p=u(h,d,A,z,y));return p}},o={silent:!0,name:"unspecified",loader:function(d){var c=r.require(d);c||'template "'+d+'" does not exist, need to be required or used first!';return c}};r.mix(x,{commands:w,utils:n,addCommand:function(b,d){w[b]=d},removeCommand:function(b){delete w[b]}});x.prototype={constructor:x,invokeEngine:function(e,d,f){return(new this.constructor(e,f)).render(d,!0)},removeCommand:function(b){delete this.config.commands[b]},addCommand:function(d,c){this.config.commands[d]=c},render:function(d){var c=d;if(!c||!c.isScope){c=new v(d)}return this.tpl(c,r)}};x.Scope=v;return x});KISSY.add("component/extension/shim",[],function(e){function d(){}var e=6===e.UA.ie,f='<iframe style="position: absolute;border: none;width: '+(e?"expression(this.parentNode.clientWidth)":"100%")+";top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: "+(e?"expression(this.parentNode.clientHeight)":"100%")+';"/>';d.ATTRS={shim:{value:e}};d.prototype.__createDom=function(){this.get("shim")&&this.get("el").prepend(f)};return d});KISSY.add("component/extension/align",["node"],function(i,C){function g(j){var l=j.ownerDocument.body,k=y(j).css("position");if(!("fixed"===k||"absolute"===k)){return"html"===j.nodeName.toLowerCase()?null:j.parentNode}for(j=j.parentNode;j&&j!==l;j=j.parentNode){if(k=y(j).css("position"),"static"!==k){return j}}return null}function f(k){var o,n,j={left:0,right:Infinity,top:0,bottom:Infinity},m;m=k.ownerDocument;n=y(m).getWindow();o=m.body;for(m=m.documentElement;k=g(k);){if((!B.ie||0!==k.clientWidth)&&k!==o&&k!==m&&"visible"!==y(k).css("overflow")){var l=y(k).offset();l.left+=k.clientLeft;l.top+=k.clientTop;j.top=Math.max(j.top,l.top);j.right=Math.min(j.right,l.left+k.clientWidth);j.bottom=Math.min(j.bottom,l.top+k.clientHeight);j.left=Math.max(j.left,l.left)}}m=n.scrollLeft();k=n.scrollTop();j.left=Math.max(j.left,m);j.top=Math.max(j.top,k);o=n.width();n=n.height();j.right=Math.min(j.right,m+o);j.bottom=Math.min(j.bottom,k+n);return 0<=j.top&&0<=j.left&&j.bottom>j.top&&j.right>j.left?j:null}function e(k,o,n,j){var m,l;m=k.left;l=k.top;o=d(o,n[0]);k=d(k,n[1]);k=[k.left-o.left,k.top-o.top];return{left:m-k[0]+ +j[0],top:l-k[1]+ +j[1]}}function c(k,m,l){var j=[];i.each(k,function(n){j.push(n.replace(m,function(o){return l[o]}))});return j}function h(){}function b(j){var l,k;l=j[0];i.isWindow(l)?(j=y(l).getWindow(),l={left:j.scrollLeft(),top:j.scrollTop()},k=j.width(),j=j.height()):(l=j.offset(),k=j.outerWidth(),j=j.outerHeight());l.width=k;l.height=j;return l}function d(k,q){var p=q.charAt(0),j=q.charAt(1),n=k.width,l=k.height,o,m;o=k.left;m=k.top;"c"===p?m+=l/2:"b"===p&&(m+=l);"c"===j?o+=n/2:"r"===j&&(o+=n);return{left:o,top:m}}function A(j){j.target===this&&j.newVal&&this._onSetAlign(this.get("align"))}function E(){this.get("visible")&&this._onSetAlign(this.get("align"))}var D=C("node"),z=i.Env.host,y=D.all,B=i.UA;h.__getOffsetParent=g;h.__getVisibleRectForElement=f;h.ATTRS={align:{value:{}}};h.prototype={__bindUI:function(){this.on("beforeVisibleChange",A,this);this.$el.getWindow().on("resize",E,this)},_onSetAlign:function(j){j&&j.points&&this.align(j.node,j.points,j.offset,j.overflow)},align:function(t,r,q,s){var t=D.one(t||z),q=q&&[].concat(q)||[0,0],s=s||{},o=this.$el,m=0,p=f(o[0]),n=b(o),k=b(t),t=e(n,k,r,q),l=i.merge(n,t);if(p&&(s.adjustX||s.adjustY)){if(t.left<p.left||t.left+n.width>p.right){m=1,r=c(r,/[lr]/ig,{l:"r",r:"l"}),q[0]=-q[0]}if(t.top<p.top||t.top+n.height>p.bottom){m=1,r=c(r,/[tb]/ig,{t:"b",b:"t"}),q[1]=-q[1]}m&&(t=e(n,k,r,q),i.mix(l,t));r=s.adjustX&&(t.left<p.left||t.left+n.width>p.right);s=s.adjustY&&(t.top<p.top||t.top+n.height>p.bottom);if(r||s){t=i.clone(t),l={width:n.width,height:n.height},r&&t.left<p.left&&(t.left=p.left),r&&t.left+l.width>p.right&&(t.left=Math.max(p.right-l.width,p.left)),s&&t.top<p.top&&(t.top=p.top),s&&t.top+l.height>p.bottom&&(t.top=Math.max(p.bottom-l.height,p.top)),l=i.mix(t,l)}}this.set({x:l.left,y:l.top},{force:1});l.width!==n.width&&this.set("width",o.width()+l.width-n.width);l.height!==n.height&&this.set("height",o.height()+l.height-n.height);return this},center:function(j){this.set("align",{node:j,points:["cc","cc"],offset:[0,0]});return this},__destructor:function(){this.$el&&this.$el.getWindow().detach("resize",E,this)}};return h});KISSY.add("component/extension/content-xtpl",[],function(){return function(h){var i;i=this.config.utils;var m=i.renderOutput,l=i.runInlineCommand,k=i.getPropertyOrRunCommand;i='<div id="ks-content-';var n=k(this,h,{},"id",0,1);i+=m(n,!0);i+='"\n           class="';var n={},j=[];j.push("content");n.params=j;l=l(this,h,n,"getBaseCssClasses",2);i+=m(l,!0);i+='">';h=k(this,h,{},"content",0,2);i+=m(h,!1);return i+"</div>"}});KISSY.add("component/extension/content-render",["component/extension/content-xtpl"],function(j,c){function i(e){var d=e.control,f=d.get("contentEl");e.$contentEl=d.$contentEl=f;e.contentEl=d.contentEl=f[0]}function k(){}var b=c("component/extension/content-xtpl");k.prototype={__beforeCreateDom:function(e,d){j.mix(d,{contentEl:"#ks-content-{id}"})},__createDom:function(){i(this)},__decorateDom:function(){i(this)},getChildrenContainerEl:function(){return this.control.get("contentEl")},_onSetContent:function(e){var d=this.control,f=d.$contentEl;f.html(e);d.get("allowTextSelection")||f.unselectable()}};j.mix(k,{ATTRS:{contentTpl:{value:b}},HTML_PARSER:{content:function(d){return d.one("."+this.getBaseCssClass("content")).html()},contentEl:function(d){return d.one("."+this.getBaseCssClass("content"))}}});return k});KISSY.add("dd/ddm",["node","base"],function(W,Z){function T(f){var d,c;if(f.touches&&1<f.touches.length){M._end()}else{if(d=this.__activeToDrag){d._move(f)}else{if(c=this.get("activeDrag")){c._move(f),this.__needDropCheck&&X(this,f,c)}}(d=d||c)&&d.get("preventDefaultOnMove")&&f.preventDefault()}}function X(l,r,q){var j=l.get("validDrops"),h=q.get("mode"),p=0,n=0,k=V(q.get("node")),g=L(k);W.each(j,function(c){if(!c.get("disabled")){var b;if(b=c.getNodeFromTarget(r,q.get("dragNode")[0],q.get("node")[0])){if("point"===h){S(V(b),q.mousePos)&&(b=L(V(b)),p?b<n&&(p=c,n=b):(p=c,n=b))}else{if("intersect"===h){b=L(J(k,V(b))),b>n&&(n=b,p=c)}else{if("strict"===h&&(b=L(J(k,V(b))),b===g)){return p=c,!1}}}}}});if((j=l.get("activeDrop"))&&j!==p){j._handleOut(r),q._handleOut(r)}l.setInternal("activeDrop",p);p&&(j!==p?p._handleEnter(r):p._handleOver(r))}function Y(f){var d=f.get("activeDrag").get("activeHandler"),c="auto";d&&(c=d.css("cursor"));"auto"===c&&(c=f.get("dragCursor"));f._shim.css({cursor:c,display:"block"});F&&E.call(f)}function R(c){var b=c.get("drops");c.setInternal("validDrops",[]);b.length&&W.each(b,function(d){d._active()})}function aa(c){var b=c.get("drops");c.setInternal("validDrops",[]);b.length&&W.each(b,function(d){d._deActive()})}function V(c){var b=c.offset();c.__ddCachedWidth||("no cache in dd!",c[0]);return{left:b.left,right:b.left+(c.__ddCachedWidth||c.outerWidth()),top:b.top,bottom:b.top+(c.__ddCachedHeight||c.outerHeight())}}function S(c,b){return c.left<=b.left&&c.right>=b.left&&c.top<=b.top&&c.bottom>=b.top}function L(b){return b.top>=b.bottom||b.left>=b.right?0:(b.right-b.left)*(b.bottom-b.top)}function J(g,f){var h=Math.max(g.top,f.top),j=Math.min(g.right,f.right),d=Math.min(g.bottom,f.bottom);return{left:Math.max(g.left,f.left),right:j,top:h,bottom:d}}function P(b){b&&(b.__ddCachedWidth=b.outerWidth(),b.__ddCachedHeight=b.outerHeight())}var I=Z("node"),H=Z("base"),ab=W.UA,U=I.all,Q=W.Env.host,O=Q.document,G=U(O),K=U(Q),F=6===ab.ie,I=I.Gesture,D=I.move,C=I.end,H=H.extend({__activeToDrag:0,_regDrop:function(b){this.get("drops").push(b)},_unRegDrop:function(d){var c=this.get("drops"),d=W.indexOf(d,c);-1!==d&&c.splice(d,1)},_regToDrag:function(b){this.__activeToDrag=b;G.on(C,this._end,this);G.on(D,e,this);O.body.setCapture&&O.body.setCapture()},_start:function(){var b=this.__activeToDrag;b&&(this.setInternal("activeDrag",b),this.__activeToDrag=0,b.get("shim")&&N(this),this.__needDropCheck=0,b.get("groups")&&(R(this),this.get("validDrops").length&&(P(b.get("node")),this.__needDropCheck=1)))},_addValidDrop:function(b){this.get("validDrops").push(b)},_end:function(d){var f=this.__activeToDrag,g=this.get("activeDrag"),b=this.get("activeDrop");d&&(f&&f._move(d),g&&g._move(d));G.detach(D,e,this);G.detach(C,this._end,this);O.body.releaseCapture&&O.body.releaseCapture();f&&(f._end(d),this.__activeToDrag=0);this._shim&&this._shim.hide();g&&(g._end(d),aa(this),b&&b._end(d),this.setInternal("activeDrag",null),this.setInternal("activeDrop",null))}},{ATTRS:{dragCursor:{value:"move"},clickPixelThresh:{value:3},bufferTime:{value:1},activeDrag:{},activeDrop:{},drops:{value:[]},validDrops:{value:[]}}}),e=ab.ie?W.throttle(T,30):T,N=function(b){b._shim=U('<div style="background-color:red;position:'+(F?"absolute":"fixed")+";left:0;width:100%;height:100%;top:0;cursor:"+M.get("dragCursor")+';z-index:999999;"></div>').prependTo(O.body||O.documentElement).css("opacity",0);N=Y;if(F){K.on("resize scroll",E,b)}Y(b)},E=W.throttle(function(){var b;(b=this.get("activeDrag"))&&b.get("shim")&&this._shim.css({width:G.width(),height:G.height()})},30),M=new H;M.inRegion=S;M.region=V;M.area=L;M.cacheWH=P;M.PREFIX_CLS="ks-dd-";return M});KISSY.add("dd/draggable",["node","./ddm","base"],function(w,z){function u(){return !1}var x=z("node"),y=z("./ddm"),o=z("base"),A=x.all,v=w.each,p=w.Features,i=w.UA.ie,e=y.PREFIX_CLS,m=w.Env.host.document,C,B=function(d){var c=d.target;this._checkDragStartValid(d)&&this._checkHandler(c)&&this._prepare(d)};return o.extend({initializer:function(){this.addTarget(y);this._allowMove=this.get("move")},_onSetNode:function(b){this.setInternal("dragNode",b);this.bindDragEvent()},bindDragEvent:function(){this.get("node").on(x.Gesture.start,B,this).on("dragstart",this._fixDragStart)},detachDragEvent:function(b){b=this;b.get("node").detach(x.Gesture.start,B,b).detach("dragstart",b._fixDragStart)},_bufferTimer:null,_onSetDisabledChange:function(b){this.get("dragNode")[b?"addClass":"removeClass"](e+"-disabled")},_fixDragStart:function(b){b.preventDefault()},_checkHandler:function(f){var d=this,h=d.get("handlers"),g=0;v(h,function(b){if(b[0]===f||b.contains(f)){return g=1,d.setInternal("activeHandler",b),!1}});return g},_checkDragStartValid:function(b){return this.get("primaryButtonOnly")&&1!==b.which||this.get("disabled")?0:1},_prepare:function(g){if(g){var d=this;i&&(C=m.body.onselectstart,m.body.onselectstart=u);d.get("halt")&&g.stopPropagation();p.isTouchEventSupported()||g.preventDefault();var l=g.pageX,j=g.pageY;d.setInternal("startMousePos",d.mousePos={left:l,top:j});if(d._allowMove){var k=d.get("node").offset();d.setInternal("startNodePos",k);d.setInternal("deltaPos",{left:l-k.left,top:j-k.top})}y._regToDrag(d);if(l=d.get("bufferTime")){d._bufferTimer=setTimeout(function(){d._start(g)},1000*l)}}},_clearBufferTimer:function(){this._bufferTimer&&(clearTimeout(this._bufferTimer),this._bufferTimer=0)},_move:function(g){var f=g.pageX,q=g.pageY;if(!this.get("dragging")){var j=this.get("startMousePos"),l=0,n=this.get("clickPixelThresh");if(Math.abs(f-j.left)>=n||Math.abs(q-j.top)>=n){this._start(g),l=1}if(!l){return}}this.mousePos={left:f,top:q};g={drag:this,left:f,top:q,pageX:f,pageY:q,domEvent:g};if(j=this._allowMove){l=this.get("deltaPos"),f-=l.left,q-=l.top,g.left=f,g.top=q,this.setInternal("actualPos",{left:f,top:q}),this.fire("dragalign",g)}q=1;!1===this.fire("drag",g)&&(q=0);q&&j&&this.get("node").offset(this.get("actualPos"))},stopDrag:function(){y._end()},_end:function(d){var d=d||{},c;this._clearBufferTimer();i&&(m.body.onselectstart=C);this.get("dragging")&&(this.get("node").removeClass(e+"drag-over"),(c=y.get("activeDrop"))?this.fire("dragdrophit",{drag:this,drop:c}):this.fire("dragdropmiss",{drag:this}),this.setInternal("dragging",0),this.fire("dragend",{drag:this,pageX:d.pageX,pageY:d.pageY}))},_handleOut:function(){this.get("node").removeClass(e+"drag-over");this.fire("dragexit",{drag:this,drop:y.get("activeDrop")})},_handleEnter:function(b){this.get("node").addClass(e+"drag-over");this.fire("dragenter",b)},_handleOver:function(b){this.fire("dragover",b)},_start:function(b){this._clearBufferTimer();this.setInternal("dragging",1);this.setInternal("dragStartMousePos",{left:b.pageX,top:b.pageY});y._start();this.fire("dragstart",{drag:this,pageX:b.pageX,pageY:b.pageY})},destructor:function(){this.detachDragEvent();this.detach()}},{name:"Draggable",ATTRS:{node:{setter:function(b){if(!(b instanceof x)){return A(b)}}},clickPixelThresh:{valueFn:function(){return y.get("clickPixelThresh")}},bufferTime:{valueFn:function(){return y.get("bufferTime")}},dragNode:{},shim:{value:!1},handlers:{value:[],getter:function(b){var d=this;b.length||(b[0]=d.get("node"));v(b,function(c,f){"function"===typeof c&&(c=c.call(d));"string"===typeof c&&(c=d.get("node").one(c));c.nodeType&&(c=A(c));b[f]=c});d.setInternal("handlers",b);return b}},activeHandler:{},dragging:{value:!1,setter:function(b){this.get("dragNode")[b?"addClass":"removeClass"](e+"dragging")}},mode:{value:"point"},disabled:{value:!1},move:{value:!1},primaryButtonOnly:{value:!0},halt:{value:!0},groups:{value:!0},startMousePos:{},dragStartMousePos:{},startNodePos:{},deltaPos:{},actualPos:{},preventDefaultOnMove:{value:!0}},inheritedStatics:{DropMode:{POINT:"point",INTERSECT:"intersect",STRICT:"strict"}}})});KISSY.add("dd/draggable-delegate",["node","./ddm","./draggable"],function(n,q){var k=q("node"),o=q("./ddm"),p=q("./draggable"),i=o.PREFIX_CLS,e=k.all,m=function(l){var b,j;if(this._checkDragStartValid(l)){b=this.get("handlers");var g=e(l.target);(b=b.length?this._getHandler(g):g)&&(j=this._getNode(b));j&&(this.setInternal("activeHandler",b),this.setInternal("node",j),this.setInternal("dragNode",j),this._prepare(l))}};return p.extend({_onSetNode:function(){},_onSetContainer:function(){this.bindDragEvent()},_onSetDisabledChange:function(c){this.get("container")[c?"addClass":"removeClass"](i+"-disabled")},bindDragEvent:function(){this.get("container").on(k.Gesture.start,m,this).on("dragstart",this._fixDragStart)},detachDragEvent:function(){this.get("container").detach(k.Gesture.start,m,this).detach("dragstart",this._fixDragStart)},_getHandler:function(f){for(var l=this.get("container"),g=this.get("handlers");f&&f[0]!==l[0];){for(var j=0;j<g.length;j++){if(f.test(g[j])){return f}}f=f.parent()}return null},_getNode:function(c){return c.closest(this.get("selector"),this.get("container"))}},{ATTRS:{container:{setter:function(b){return e(b)}},selector:{},handlers:{value:[],getter:0}}})});KISSY.add("dd/droppable",["node","./ddm","base"],function(h,m){var e=m("node"),i=m("./ddm"),k=m("base"),b=i.PREFIX_CLS;return k.extend({initializer:function(){this.addTarget(i);i._regDrop(this)},getNodeFromTarget:function(g,n,l){var g=this.get("node"),j=g[0];return j===n||j===l?null:g},_active:function(){var f=i.get("activeDrag"),n=this.get("node"),l=this.get("groups"),f=f.get("groups");a:if(!0===f){l=1}else{for(var j in l){if(f[j]){l=1;break a}}l=0}l?(i._addValidDrop(this),n&&(n.addClass(b+"drop-active-valid"),i.cacheWH(n))):n&&n.addClass(b+"drop-active-invalid")},_deActive:function(){var c=this.get("node");c&&c.removeClass(b+"drop-active-valid").removeClass(b+"drop-active-invalid")},__getCustomEvt:function(c){return h.mix({drag:i.get("activeDrag"),drop:this},c)},_handleOut:function(){var c=this.__getCustomEvt();this.get("node").removeClass(b+"drop-over");this.fire("dropexit",c)},_handleEnter:function(c){c=this.__getCustomEvt(c);c.drag._handleEnter(c);this.get("node").addClass(b+"drop-over");this.fire("dropenter",c)},_handleOver:function(c){c=this.__getCustomEvt(c);c.drag._handleOver(c);this.fire("dropover",c)},_end:function(){var c=this.__getCustomEvt();this.get("node").removeClass(b+"drop-over");this.fire("drophit",c)},destructor:function(){i._unRegDrop(this)}},{name:"Droppable",ATTRS:{node:{setter:function(c){if(c){return e.one(c)}}},groups:{value:{}},disabled:{}}})});KISSY.add("dd/droppable-delegate",["node","./ddm","./droppable"],function(h,m){function e(){var d=this.get("container"),j=[],g=this.get("selector");d.all(g).each(function(c){k.cacheWH(c);j.push(c)});this.__allNodes=j}var i=m("node"),k=m("./ddm"),b=m("./droppable").extend({initializer:function(){k.on("dragstart",e,this)},getNodeFromTarget:function(d,r,p){var g={left:d.pageX,top:d.pageY},d=this.__allNodes,o=0,q=Number.MAX_VALUE;d&&h.each(d,function(c){var f=c[0];f===p||f===r||(f=k.region(c),k.inRegion(f,g)&&(f=k.area(f),f<q&&(q=f,o=c)))});o&&(this.setInternal("lastNode",this.get("node")),this.setInternal("node",o));return o},_handleOut:function(){this.callSuper();this.setInternal("node",0);this.setInternal("lastNode",0)},_handleOver:function(l){var r=this.get("node"),q=b.superclass._handleOut,p=this.callSuper,o=b.superclass._handleEnter,n=this.get("lastNode");n[0]!==r[0]?(this.setInternal("node",n),q.apply(this,arguments),this.setInternal("node",r),o.call(this,l)):p.call(this,l)},_end:function(c){this.callSuper(c);this.setInternal("node",0)}},{ATTRS:{lastNode:{},selector:{},container:{setter:function(c){return i.one(c)}}}});return b});KISSY.add("dd",["dd/ddm","dd/draggable","dd/draggable-delegate","dd/droppable-delegate","dd/droppable"],function(k,o){var i=o("dd/ddm"),m=o("dd/draggable"),n=o("dd/draggable-delegate"),h=o("dd/droppable-delegate"),e=o("dd/droppable"),i={Draggable:m,DDM:i,Droppable:e,DroppableDelegate:h,DraggableDelegate:n};return KISSY.DD=i});KISSY.add("event",["event/dom","event/custom"],function(e,g){var f=g("event/dom"),h=g("event/custom"),f=e.Event=e.merge(f,{DomEvent:f,CustomEvent:h});f.global=h.global;e.EventTarget=f.Target=h.Target;return f});KISSY.add("xtemplate",["xtemplate/runtime","xtemplate/compiler"],function(n,m){function c(b,j){j=n.merge(e,j);if("string"===typeof b){var h=b,g=j,i;if(!g.cache||!(i=l[h])){i=f.compileToFn(h,g),g.cache&&(l[h]=i)}b=i}c.superclass.constructor.call(this,b,j)}var d=m("xtemplate/runtime"),f=m("xtemplate/compiler"),l=c.cache={},e={cache:!0};n.extend(c,d,{},{compiler:f,Scope:d.Scope,RunTime:d,addCommand:d.addCommand,removeCommand:d.removeCommand});return c});KISSY.add("xtemplate/compiler/parser",[],function(j,f){var k={},d=KISSY,i=function(b){this.rules=[];d.mix(this,b);this.resetInput(this.input)};i.prototype={constructor:function(b){this.rules=[];d.mix(this,b);this.resetInput(this.input)},resetInput:function(b){d.mix(this,{input:b,matched:"",stateStack:[i.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},genShortId:function(b){b+="__gen";b in this||(this[b]=-1);var b=this[b]+=1,c="";do{c=String.fromCharCode(97+b%26)+c,b=Math.floor(b/26)-1}while(0<=b);return c},getCurrentRules:function(){var b=this.stateStack[this.stateStack.length-1],c=[],b=this.mapState(b);d.each(this.rules,function(g){var e=g.state||g[3];e?d.inArray(b,e)&&c.push(g):b===i.STATIC.INITIAL&&c.push(g)});return c},pushState:function(b){this.stateStack.push(b)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var g=i.STATIC.DEBUG_CONTEXT_LIMIT,l=this.matched,m=this.match,e=this.input,l=l.slice(0,l.length-m.length),l=(l.length>g?"...":"")+l.slice(-g).replace(/\n/," "),m=m+e,m=m.slice(0,g)+(m.length>g?"...":"");return l+m+"\n"+Array(l.length+1).join("-")+"^"},mapSymbol:function(b){var e=this.symbolMap;return !e?b:e[b]||(e[b]=this.genShortId("symbol"))},mapReverseSymbol:function(l){var n=this.symbolMap,m,g=this.reverseSymbolMap;if(!g&&n){for(m in g=this.reverseSymbolMap={},n){g[n[m]]=m}}return g?g[l]:l},mapState:function(b){var e=this.stateMap;return !e?b:e[b]||(e[b]=this.genShortId("state"))},lex:function(){var q=this.input,o,l,b,p=this.getCurrentRules();this.match=this.text="";if(!q){return this.mapSymbol(i.STATIC.END_TAG)}for(o=0;o<p.length;o++){l=p[o];var e=l.token||l[0];b=l.action||l[2]||f;if(l=q.match(l.regexp||l[1])){if(o=l[0].match(/\n.*/g)){this.lineNumber+=o.length}d.mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:o?o[o.length-1].length-1:this.lastColumn+l[0].length});o=this.match=l[0];this.matches=l;this.text=o;this.matched+=o;b=b&&b.call(this);b=b===f?e:this.mapSymbol(b);this.input=q=q.slice(o.length);return b?b:this.lex()}}"lex error at line "+this.lineNumber+":\n"+this.showDebugInfo();return f}};i.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var h=new i({rules:[[0,/^[\s\S]*?(?={{)/,function(){var g=this.text,l,e=0;if(l=g.match(/\\+$/)){e=l[0].length}e%2?(this.pushState("et"),g=g.slice(0,-1)):this.pushState("t");this.text=g=g.replace(/\\+$/g,function(b){return Array(b.length/2+1).join("\\")});return"CONTENT"}],["b",/^[\s\S]+/,0],["b",/^[\s\S]{2,}?(?:(?={{)|$)/,function(){this.popState()},["et"]],["c",/^{{(?:#|@|\^)/,0,["t"]],["d",/^{{\//,0,["t"]],["e",/^{{\s*else\s*}}/,function(){this.popState()},["t"]],[0,/^{{![\s\S]*?}}/,function(){this.popState()},["t"]],["b",/^{{%([\s\S]*?)%}}/,function(){this.text=this.matches[1]||"";this.popState()},["t"]],["f",/^{{{?/,0,["t"]],["g",/^\s+/,0,["t"]],["h",/^}}}?/,function(){this.popState()},["t"]],["i",/^\(/,0,["t"]],["j",/^\)/,0,["t"]],["k",/^\|\|/,0,["t"]],["l",/^&&/,0,["t"]],["m",/^===/,0,["t"]],["n",/^!==/,0,["t"]],["o",/^>=/,0,["t"]],["p",/^<=/,0,["t"]],["q",/^>/,0,["t"]],["r",/^</,0,["t"]],["s",/^\+/,0,["t"]],["t",/^-/,0,["t"]],["u",/^\*/,0,["t"]],["v",/^\//,0,["t"]],["w",/^%/,0,["t"]],["x",/^!/,0,["t"]],["y",/^"(\\[\s\S]|[^\\"])*"/,function(){this.text=this.text.slice(1,-1).replace(/\\"/g,'"')},["t"]],["y",/^'(\\[\s\S]|[^\\'])*'/,function(){this.text=this.text.slice(1,-1).replace(/\\'/g,"'")},["t"]],["z",/^true/,0,["t"]],["z",/^false/,0,["t"]],["aa",/^\d+(?:\.\d+)?(?:e-?\d+)?/i,0,["t"]],["ab",/^=/,0,["t"]],["ac",/^\.(?=})/,0,["t"]],["ac",/^\.\./,function(){this.pushState("ws")},["t"]],["ad",/^\//,function(){this.popState()},["ws"]],["ad",/^\./,0,["t"]],["ae",/^\[/,0,["t"]],["af",/^\]/,0,["t"]],["ac",/^[a-zA-Z0-9_$]+/,0,["t"]],["ag",/^./,0,["t"]]]});k.lexer=h;h.symbolMap={$EOF:"a",CONTENT:"b",OPEN_BLOCK:"c",OPEN_CLOSE_BLOCK:"d",INVERSE:"e",OPEN_TPL:"f",SPACE:"g",CLOSE:"h",LPAREN:"i",RPAREN:"j",OR:"k",AND:"l",LOGIC_EQUALS:"m",LOGIC_NOT_EQUALS:"n",GE:"o",LE:"p",GT:"q",LT:"r",PLUS:"s",MINUS:"t",MULTIPLY:"u",DIVIDE:"v",MODULUS:"w",NOT:"x",STRING:"y",BOOLEAN:"z",NUMBER:"aa",EQUALS:"ab",ID:"ac",SEP:"ad",REF_START:"ae",REF_END:"af",INVALID:"ag",$START:"ah",program:"ai",statements:"aj",statement:"ak",openBlock:"al",closeBlock:"am",tpl:"an",inBlockTpl:"ao",path:"ap",inTpl:"aq",Expression:"ar",params:"as",hash:"at",param:"au",ConditionalOrExpression:"av",ConditionalAndExpression:"aw",EqualityExpression:"ax",RelationalExpression:"ay",AdditiveExpression:"az",MultiplicativeExpression:"ba",UnaryExpression:"bb",PrimaryExpression:"bc",hashSegments:"bd",hashSegment:"be",pathSegments:"bf"};k.productions=[["ah",["ai"]],["ai",["aj","e","aj"],function(){return new this.yy.ProgramNode(this.lexer.lineNumber,this.$1,this.$3)}],["ai",["aj"],function(){return new this.yy.ProgramNode(this.lexer.lineNumber,this.$1)}],["aj",["ak"],function(){return[this.$1]}],["aj",["aj","ak"],function(){this.$1.push(this.$2)}],["ak",["al","ai","am"],function(){return new this.yy.BlockNode(this.lexer.lineNumber,this.$1,this.$2,this.$3)}],["ak",["an"]],["ak",["b"],function(){return new this.yy.ContentNode(this.lexer.lineNumber,this.$1)}],["ao",["ap"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1)}],["ao",["aq"]],["al",["c","ao","h"],function(){"^"===this.$1.charAt(this.$1.length-1)&&(this.$2.isInverted=1);return this.$2}],["am",["d","ap","h"],function(){return this.$2}],["an",["f","aq","h"],function(){3===this.$1.length&&(this.$2.escaped=!1);return this.$2}],["an",["f","ar","h"],function(){var b=new this.yy.TplExpressionNode(this.lexer.lineNumber,this.$2);3===this.$1.length&&(b.escaped=!1);return b}],["aq",["ap","g","as","g","at"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,this.$3,this.$5)}],["aq",["ap","g","as"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,this.$3)}],["aq",["ap","g","at"],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,null,this.$3)}],["as",["as","g","au"],function(){this.$1.push(this.$3)}],["as",["au"],function(){return[this.$1]}],["au",["ar"]],["ar",["av"]],["av",["aw"]],["av",["av","k","aw"],function(){return new this.yy.ConditionalOrExpression(this.$1,this.$3)}],["aw",["ax"]],["aw",["aw","l","ax"],function(){return new this.yy.ConditionalAndExpression(this.$1,this.$3)}],["ax",["ay"]],["ax",["ax","m","ay"],function(){return new this.yy.EqualityExpression(this.$1,"===",this.$3)}],["ax",["ax","n","ay"],function(){return new this.yy.EqualityExpression(this.$1,"!==",this.$3)}],["ay",["az"]],["ay",["ay","r","az"],function(){return new this.yy.RelationalExpression(this.$1,"<",this.$3)}],["ay",["ay","q","az"],function(){return new this.yy.RelationalExpression(this.$1,">",this.$3)}],["ay",["ay","p","az"],function(){return new this.yy.RelationalExpression(this.$1,"<=",this.$3)}],["ay",["ay","o","az"],function(){return new this.yy.RelationalExpression(this.$1,">=",this.$3)}],["az",["ba"]],["az",["az","s","ba"],function(){return new this.yy.AdditiveExpression(this.$1,"+",this.$3)}],["az",["az","t","ba"],function(){return new this.yy.AdditiveExpression(this.$1,"-",this.$3)}],["ba",["bb"]],["ba",["ba","u","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"*",this.$3)}],["ba",["ba","v","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"/",this.$3)}],["ba",["ba","w","bb"],function(){return new this.yy.MultiplicativeExpression(this.$1,"%",this.$3)}],["bb",["x","bb"],function(){return new this.yy.UnaryExpression(this.$1,this.$2)}],["bb",["t","bb"],function(){return new this.yy.UnaryExpression(this.$1,this.$2)}],["bb",["bc"]],["bc",["y"],function(){return new this.yy.StringNode(this.lexer.lineNumber,this.$1)}],["bc",["aa"],function(){return new this.yy.NumberNode(this.lexer.lineNumber,this.$1)}],["bc",["z"],function(){return new this.yy.BooleanNode(this.lexer.lineNumber,this.$1)}],["bc",["ap"]],["bc",["i","ar","j"],function(){return this.$2}],["at",["bd"],function(){return new this.yy.HashNode(this.lexer.lineNumber,this.$1)}],["bd",["bd","g","be"],function(){this.$1.push(this.$3)}],["bd",["be"],function(){return[this.$1]}],["be",["ac","ab","ar"],function(){return[this.$1,this.$3]}],["ap",["bf"],function(){return new this.yy.IdNode(this.lexer.lineNumber,this.$1)}],["bf",["bf","ad","ac"],function(){this.$1.push(this.$3)}],["bf",["bf","ae","ar","af"],function(){this.$1.push(this.$3)}],["bf",["bf","ad","aa"],function(){this.$1.push(this.$3)}],["bf",["ac"],function(){return[this.$1]}]];k.table={gotos:{"0":{ai:4,aj:5,ak:6,al:7,an:8},2:{ao:10,aq:11,ap:12,bf:13},3:{aq:20,ar:21,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:30,bf:13},5:{ak:32,al:7,an:8},7:{ai:33,aj:5,ak:6,al:7,an:8},14:{ar:38,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},15:{bb:40,bc:29,ap:39,bf:13},16:{bb:41,bc:29,ap:39,bf:13},31:{aj:57,ak:6,al:7,an:8},33:{am:59},35:{as:61,au:62,ar:63,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,at:64,bd:65,be:66,ap:39,bf:13},37:{ar:69,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},44:{aw:71,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},45:{ax:72,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},46:{ay:73,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},47:{ay:74,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},48:{az:75,ba:27,bb:28,bc:29,ap:39,bf:13},49:{az:76,ba:27,bb:28,bc:29,ap:39,bf:13},50:{az:77,ba:27,bb:28,bc:29,ap:39,bf:13},51:{az:78,ba:27,bb:28,bc:29,ap:39,bf:13},52:{ba:79,bb:28,bc:29,ap:39,bf:13},53:{ba:80,bb:28,bc:29,ap:39,bf:13},54:{bb:81,bc:29,ap:39,bf:13},55:{bb:82,bc:29,ap:39,bf:13},56:{bb:83,bc:29,ap:39,bf:13},57:{ak:32,al:7,an:8},58:{ap:84,bf:13},85:{ar:90,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,ap:39,bf:13},86:{au:91,ar:63,av:22,aw:23,ax:24,ay:25,az:26,ba:27,bb:28,bc:29,at:92,bd:65,be:66,ap:39,bf:13},87:{be:94}},action:{"0":{b:[1,f,1],c:[1,f,2],f:[1,f,3]},1:{a:[2,7],e:[2,7],c:[2,7],f:[2,7],b:[2,7],d:[2,7]},2:{ac:[1,f,9]},3:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},4:{a:[0]},5:{a:[2,2],d:[2,2],b:[1,f,1],c:[1,f,2],e:[1,f,31],f:[1,f,3]},6:{a:[2,3],e:[2,3],c:[2,3],f:[2,3],b:[2,3],d:[2,3]},7:{b:[1,f,1],c:[1,f,2],f:[1,f,3]},8:{a:[2,6],e:[2,6],c:[2,6],f:[2,6],b:[2,6],d:[2,6]},9:{h:[2,56],g:[2,56],ad:[2,56],ae:[2,56],k:[2,56],l:[2,56],m:[2,56],n:[2,56],o:[2,56],p:[2,56],q:[2,56],r:[2,56],s:[2,56],t:[2,56],u:[2,56],v:[2,56],w:[2,56],j:[2,56],af:[2,56]},10:{h:[1,f,34]},11:{h:[2,9]},12:{h:[2,8],g:[1,f,35]},13:{h:[2,52],g:[2,52],k:[2,52],l:[2,52],m:[2,52],n:[2,52],o:[2,52],p:[2,52],q:[2,52],r:[2,52],s:[2,52],t:[2,52],u:[2,52],v:[2,52],w:[2,52],j:[2,52],af:[2,52],ad:[1,f,36],ae:[1,f,37]},14:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},15:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},16:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},17:{h:[2,43],k:[2,43],l:[2,43],m:[2,43],n:[2,43],o:[2,43],p:[2,43],q:[2,43],r:[2,43],s:[2,43],t:[2,43],u:[2,43],v:[2,43],w:[2,43],j:[2,43],g:[2,43],af:[2,43]},18:{h:[2,45],k:[2,45],l:[2,45],m:[2,45],n:[2,45],o:[2,45],p:[2,45],q:[2,45],r:[2,45],s:[2,45],t:[2,45],u:[2,45],v:[2,45],w:[2,45],j:[2,45],g:[2,45],af:[2,45]},19:{h:[2,44],k:[2,44],l:[2,44],m:[2,44],n:[2,44],o:[2,44],p:[2,44],q:[2,44],r:[2,44],s:[2,44],t:[2,44],u:[2,44],v:[2,44],w:[2,44],j:[2,44],g:[2,44],af:[2,44]},20:{h:[1,f,42]},21:{h:[1,f,43]},22:{h:[2,20],j:[2,20],g:[2,20],af:[2,20],k:[1,f,44]},23:{h:[2,21],k:[2,21],j:[2,21],g:[2,21],af:[2,21],l:[1,f,45]},24:{h:[2,23],k:[2,23],l:[2,23],j:[2,23],g:[2,23],af:[2,23],m:[1,f,46],n:[1,f,47]},25:{h:[2,25],k:[2,25],l:[2,25],m:[2,25],n:[2,25],j:[2,25],g:[2,25],af:[2,25],o:[1,f,48],p:[1,f,49],q:[1,f,50],r:[1,f,51]},26:{h:[2,28],k:[2,28],l:[2,28],m:[2,28],n:[2,28],o:[2,28],p:[2,28],q:[2,28],r:[2,28],j:[2,28],g:[2,28],af:[2,28],s:[1,f,52],t:[1,f,53]},27:{h:[2,33],k:[2,33],l:[2,33],m:[2,33],n:[2,33],o:[2,33],p:[2,33],q:[2,33],r:[2,33],s:[2,33],t:[2,33],j:[2,33],g:[2,33],af:[2,33],u:[1,f,54],v:[1,f,55],w:[1,f,56]},28:{h:[2,36],k:[2,36],l:[2,36],m:[2,36],n:[2,36],o:[2,36],p:[2,36],q:[2,36],r:[2,36],s:[2,36],t:[2,36],u:[2,36],v:[2,36],w:[2,36],j:[2,36],g:[2,36],af:[2,36]},29:{h:[2,42],k:[2,42],l:[2,42],m:[2,42],n:[2,42],o:[2,42],p:[2,42],q:[2,42],r:[2,42],s:[2,42],t:[2,42],u:[2,42],v:[2,42],w:[2,42],j:[2,42],g:[2,42],af:[2,42]},30:{h:[2,46],k:[2,46],l:[2,46],m:[2,46],n:[2,46],o:[2,46],p:[2,46],q:[2,46],r:[2,46],s:[2,46],t:[2,46],u:[2,46],v:[2,46],w:[2,46],g:[1,f,35]},31:{b:[1,f,1],c:[1,f,2],f:[1,f,3]},32:{a:[2,4],e:[2,4],c:[2,4],f:[2,4],b:[2,4],d:[2,4]},33:{d:[1,f,58]},34:{c:[2,10],f:[2,10],b:[2,10]},35:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,60]},36:{aa:[1,f,67],ac:[1,f,68]},37:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},38:{j:[1,f,70]},39:{j:[2,46],k:[2,46],l:[2,46],m:[2,46],n:[2,46],o:[2,46],p:[2,46],q:[2,46],r:[2,46],s:[2,46],t:[2,46],u:[2,46],v:[2,46],w:[2,46],h:[2,46],g:[2,46],af:[2,46]},40:{h:[2,41],k:[2,41],l:[2,41],m:[2,41],n:[2,41],o:[2,41],p:[2,41],q:[2,41],r:[2,41],s:[2,41],t:[2,41],u:[2,41],v:[2,41],w:[2,41],j:[2,41],g:[2,41],af:[2,41]},41:{h:[2,40],k:[2,40],l:[2,40],m:[2,40],n:[2,40],o:[2,40],p:[2,40],q:[2,40],r:[2,40],s:[2,40],t:[2,40],u:[2,40],v:[2,40],w:[2,40],j:[2,40],g:[2,40],af:[2,40]},42:{a:[2,12],e:[2,12],c:[2,12],f:[2,12],b:[2,12],d:[2,12]},43:{a:[2,13],e:[2,13],c:[2,13],f:[2,13],b:[2,13],d:[2,13]},44:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},45:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},46:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},47:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},48:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},49:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},50:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},51:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},52:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},53:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},54:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},55:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},56:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},57:{a:[2,1],d:[2,1],b:[1,f,1],c:[1,f,2],f:[1,f,3]},58:{ac:[1,f,9]},59:{a:[2,5],e:[2,5],c:[2,5],f:[2,5],b:[2,5],d:[2,5]},60:{h:[2,56],g:[2,56],k:[2,56],l:[2,56],m:[2,56],n:[2,56],o:[2,56],p:[2,56],q:[2,56],r:[2,56],s:[2,56],t:[2,56],u:[2,56],v:[2,56],w:[2,56],ad:[2,56],ae:[2,56],ab:[1,f,85]},61:{h:[2,15],g:[1,f,86]},62:{h:[2,18],g:[2,18]},63:{h:[2,19],g:[2,19]},64:{h:[2,16]},65:{h:[2,48],g:[1,f,87]},66:{h:[2,50],g:[2,50]},67:{h:[2,55],g:[2,55],ad:[2,55],ae:[2,55],k:[2,55],l:[2,55],m:[2,55],n:[2,55],o:[2,55],p:[2,55],q:[2,55],r:[2,55],s:[2,55],t:[2,55],u:[2,55],v:[2,55],w:[2,55],j:[2,55],af:[2,55]},68:{h:[2,53],g:[2,53],ad:[2,53],ae:[2,53],k:[2,53],l:[2,53],m:[2,53],n:[2,53],o:[2,53],p:[2,53],q:[2,53],r:[2,53],s:[2,53],t:[2,53],u:[2,53],v:[2,53],w:[2,53],j:[2,53],af:[2,53]},69:{af:[1,f,88]},70:{h:[2,47],k:[2,47],l:[2,47],m:[2,47],n:[2,47],o:[2,47],p:[2,47],q:[2,47],r:[2,47],s:[2,47],t:[2,47],u:[2,47],v:[2,47],w:[2,47],j:[2,47],g:[2,47],af:[2,47]},71:{h:[2,22],k:[2,22],j:[2,22],g:[2,22],af:[2,22],l:[1,f,45]},72:{h:[2,24],k:[2,24],l:[2,24],j:[2,24],g:[2,24],af:[2,24],m:[1,f,46],n:[1,f,47]},73:{h:[2,26],k:[2,26],l:[2,26],m:[2,26],n:[2,26],j:[2,26],g:[2,26],af:[2,26],o:[1,f,48],p:[1,f,49],q:[1,f,50],r:[1,f,51]},74:{h:[2,27],k:[2,27],l:[2,27],m:[2,27],n:[2,27],j:[2,27],g:[2,27],af:[2,27],o:[1,f,48],p:[1,f,49],q:[1,f,50],r:[1,f,51]},75:{h:[2,32],k:[2,32],l:[2,32],m:[2,32],n:[2,32],o:[2,32],p:[2,32],q:[2,32],r:[2,32],j:[2,32],g:[2,32],af:[2,32],s:[1,f,52],t:[1,f,53]},76:{h:[2,31],k:[2,31],l:[2,31],m:[2,31],n:[2,31],o:[2,31],p:[2,31],q:[2,31],r:[2,31],j:[2,31],g:[2,31],af:[2,31],s:[1,f,52],t:[1,f,53]},77:{h:[2,30],k:[2,30],l:[2,30],m:[2,30],n:[2,30],o:[2,30],p:[2,30],q:[2,30],r:[2,30],j:[2,30],g:[2,30],af:[2,30],s:[1,f,52],t:[1,f,53]},78:{h:[2,29],k:[2,29],l:[2,29],m:[2,29],n:[2,29],o:[2,29],p:[2,29],q:[2,29],r:[2,29],j:[2,29],g:[2,29],af:[2,29],s:[1,f,52],t:[1,f,53]},79:{h:[2,34],k:[2,34],l:[2,34],m:[2,34],n:[2,34],o:[2,34],p:[2,34],q:[2,34],r:[2,34],s:[2,34],t:[2,34],j:[2,34],g:[2,34],af:[2,34],u:[1,f,54],v:[1,f,55],w:[1,f,56]},80:{h:[2,35],k:[2,35],l:[2,35],m:[2,35],n:[2,35],o:[2,35],p:[2,35],q:[2,35],r:[2,35],s:[2,35],t:[2,35],j:[2,35],g:[2,35],af:[2,35],u:[1,f,54],v:[1,f,55],w:[1,f,56]},81:{h:[2,37],k:[2,37],l:[2,37],m:[2,37],n:[2,37],o:[2,37],p:[2,37],q:[2,37],r:[2,37],s:[2,37],t:[2,37],u:[2,37],v:[2,37],w:[2,37],j:[2,37],g:[2,37],af:[2,37]},82:{h:[2,38],k:[2,38],l:[2,38],m:[2,38],n:[2,38],o:[2,38],p:[2,38],q:[2,38],r:[2,38],s:[2,38],t:[2,38],u:[2,38],v:[2,38],w:[2,38],j:[2,38],g:[2,38],af:[2,38]},83:{h:[2,39],k:[2,39],l:[2,39],m:[2,39],n:[2,39],o:[2,39],p:[2,39],q:[2,39],r:[2,39],s:[2,39],t:[2,39],u:[2,39],v:[2,39],w:[2,39],j:[2,39],g:[2,39],af:[2,39]},84:{h:[1,f,89]},85:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,9]},86:{i:[1,f,14],t:[1,f,15],x:[1,f,16],y:[1,f,17],z:[1,f,18],aa:[1,f,19],ac:[1,f,60]},87:{ac:[1,f,93]},88:{h:[2,54],g:[2,54],ad:[2,54],ae:[2,54],k:[2,54],l:[2,54],m:[2,54],n:[2,54],o:[2,54],p:[2,54],q:[2,54],r:[2,54],s:[2,54],t:[2,54],u:[2,54],v:[2,54],w:[2,54],j:[2,54],af:[2,54]},89:{a:[2,11],e:[2,11],c:[2,11],f:[2,11],b:[2,11],d:[2,11]},90:{h:[2,51],g:[2,51]},91:{h:[2,17],g:[2,17]},92:{h:[2,14]},93:{ab:[1,f,85]},94:{h:[2,49],g:[2,49]}}};k.parse=function(E){var F=this.lexer,C,B,w,z=this.table,v=z.gotos,z=z.action,G=this.productions,u=[null],x=[0];for(F.resetInput(E);;){C=x[x.length-1];B||(B=F.lex());if(!B){return"it is not a valid input: "+E,"error",!1}w=z[C]&&z[C][B];if(!w){E=[];if(z[C]){for(var y in z[C]){E.push(this.lexer.mapReverseSymbol(y))}}F="Syntax error at line "+F.lineNumber+":\n"+F.showDebugInfo()+"\nexpect "+E.join(", ");F;return !1}switch(w[0]){case 1:x.push(B);u.push(F.text);x.push(w[2]);B=null;break;case 2:var D=G[w[1]];C=D.symbol||D[0];w=D.action||D[2];var A=(D.rhs||D[1]).length,m=0,t,D=u[u.length-A];t=f;for(this.$$=D;m<A;m++){this["$"+(A-m)]=u[u.length-1-m]}w&&(t=w.call(this));D=t!==f?t:this.$$;A&&(x=x.slice(0,-2*A),u=u.slice(0,-1*A));x.push(C);u.push(D);x.push(v[x[x.length-2]][x[x.length-1]]);break;case 0:return D}}return f};return k});KISSY.add("xtemplate/compiler/ast",[],function(c){var b={ProgramNode:function(f,d,g){this.lineNumber=f;this.statements=d;this.inverse=g}};b.ProgramNode.prototype.type="program";b.BlockNode=function(f,d,i,h){h=h.parts;c.equals(d.path.parts,h)||(h="Syntax error at line "+f+":\nexpect {{/"+d.path.parts+"}} not {{/"+h+"}}",h);this.lineNumber=f;this.tpl=d;this.program=i};b.BlockNode.prototype.type="block";b.TplNode=function(f,d,i,h){this.lineNumber=f;this.path=d;this.params=i;this.hash=h;this.escaped=!0;this.isInverted=!1};b.TplNode.prototype.type="tpl";b.TplExpressionNode=function(e,d){this.lineNumber=e;this.expression=d;this.escaped=!0};b.TplExpressionNode.prototype.type="tplExpression";b.ContentNode=function(e,d){this.lineNumber=e;this.value=d};b.ContentNode.prototype.type="content";b.UnaryExpression=function(e,d){this.value=d;this.unaryType=e};b.UnaryExpression.prototype.type="unaryExpression";b.MultiplicativeExpression=function(f,d,g){this.op1=f;this.opType=d;this.op2=g};b.MultiplicativeExpression.prototype.type="multiplicativeExpression";b.AdditiveExpression=function(f,d,g){this.op1=f;this.opType=d;this.op2=g};b.AdditiveExpression.prototype.type="additiveExpression";b.RelationalExpression=function(f,d,g){this.op1=f;this.opType=d;this.op2=g};b.RelationalExpression.prototype.type="relationalExpression";b.EqualityExpression=function(f,d,g){this.op1=f;this.opType=d;this.op2=g};b.EqualityExpression.prototype.type="equalityExpression";b.ConditionalAndExpression=function(e,d){this.op1=e;this.op2=d};b.ConditionalAndExpression.prototype.type="conditionalAndExpression";b.ConditionalOrExpression=function(e,d){this.op1=e;this.op2=d};b.ConditionalOrExpression.prototype.type="conditionalOrExpression";b.StringNode=function(e,d){this.lineNumber=e;this.value=d};b.StringNode.prototype.type="string";b.NumberNode=function(e,d){this.lineNumber=e;this.value=d};b.NumberNode.prototype.type="number";b.BooleanNode=function(e,d){this.lineNumber=e;this.value=d};b.BooleanNode.prototype.type="boolean";b.HashNode=function(f,d){var g={};this.lineNumber=f;c.each(d,function(e){g[e[0]]=e[1]});this.value=g};b.HashNode.prototype.type="hash";b.IdNode=function(f,d){var i=[],h=0;this.lineNumber=f;c.each(d,function(e){".."===e?h++:i.push(e)});this.parts=i;this.string=i.join(".");this.depth=h};b.IdNode.prototype.type="id";return b});KISSY.add("xtemplate/compiler",["xtemplate/runtime","./compiler/parser","./compiler/ast"],function(h,z){function x(b,c){b=c?y(b,!1):b.replace(/\\/g,"\\\\").replace(/'/g,"\\'");return b=b.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")}function y(b,c){return b.replace(c?B:k,function(e){e.length%2&&(e="\\"+e);return e})}function w(b,c){j.apply(b,c)}function q(b){return b[b.length-1]}var C=z("xtemplate/runtime"),r=z("./compiler/parser");r.yy=z("./compiler/ast");var B=/\\*"/g,k=/\\*'/g,j=[].push,l=0,A=0,D={genFunction:function(f,g){var m=[];g||m.push("function(scope) {");m.push('var buffer = ""'+(g?",":";"));if(g){m.push("config = this.config,engine = this,moduleWrap, utils = config.utils;");m.push('if (typeof module !== "undefined" && module.kissy) {moduleWrap = module;}');var i="",e,n=C.utils;for(e in n){i+=e+"Util = utils."+e+","}i&&m.push("var "+i.slice(0,i.length-1)+";")}if(f){i=0;for(e=f.length;i<e;i++){w(m,this[f[i].type](f[i]))}}m.push("return buffer;");return !g?(m.push("}"),m):{params:["scope","S","undefined"],source:m}},genIdOrInlineCommand:function(i,m){var s=[],n=i.depth,e,t=i.parts,o="id"+l++;if(0===n){var p=m&&this.genConfig(m);p&&(e=p[0],w(s,p[1]))}t=this.getIdStringFromIdParts(s,t);n||h.startsWith(t,"this.")?s.push("var "+o+' = getPropertyUtil(engine,scope,"'+t+'",'+n+","+i.lineNumber+");"):e?("include"===t&&s.push('if(moduleWrap) {require("'+m.params[0].value+'");'+e+".params[0] = moduleWrap.resolveByName("+e+".params[0]);}"),s.push("var "+o+" = runInlineCommandUtil(engine,scope,"+e+',"'+t+'",'+i.lineNumber+");")):s.push("var "+o+" = getPropertyOrRunCommandUtil(engine,scope,"+(e||"{}")+',"'+t+'",'+n+","+i.lineNumber+");");return[o,s]},genOpExpression:function(g,m){var o=[],e,p,n=this[g.op1.type](g.op1),i=this[g.op2.type](g.op2);e=n[0];p=i[0];if(e&&p){return w(o,n[1]),w(o,i[1]),o.push(e+m+p),["",o]}if(!e&&!p){return w(o,n[1].slice(0,-1)),w(o,i[1].slice(0,-1)),o.push("("+q(n[1])+")"+m+"("+q(i[1])+")"),["",o]}if(e&&!p){return w(o,n[1]),w(o,i[1].slice(0,-1)),o.push(e+m+"("+q(i[1])+")"),["",o]}if(!e&&p){return w(o,n[1].slice(0,-1)),w(o,i[1]),o.push("("+q(n[1])+")"+m+p),["",o]}},genConfig:function(g){var e=[],o,p,n=this;if(g){p=g.params;g=g.hash;if(p||g){o="config"+l++,e.push("var "+o+" = {};")}if(p){var m="params"+l++;e.push("var "+m+" = [];");h.each(p,function(b){b=n[b.type](b);b[0]?(w(e,b[1]),e.push(m+".push("+b[0]+");")):(w(e,b[1].slice(0,-1)),e.push(m+".push("+q(b[1])+");"))});e.push(o+".params="+m+";")}if(g){var i="hash"+l++;e.push("var "+i+" = {};");h.each(g.value,function(c,b){var f=n[c.type](c);f[0]?(w(e,f[1]),e.push(i+'["'+b+'"] = '+f[0]+";")):(w(e,f[1].slice(0,-1)),e.push(i+'["'+b+'"] = '+q(f[1])+";"))});e.push(o+".hash="+i+";")}}return[o,e]},conditionalOrExpression:function(b){return this.genOpExpression(b,"||")},conditionalAndExpression:function(b){return this.genOpExpression(b,"&&")},relationalExpression:function(b){return this.genOpExpression(b,b.opType)},equalityExpression:function(b){return this.genOpExpression(b,b.opType)},additiveExpression:function(b){return this.genOpExpression(b,b.opType)},multiplicativeExpression:function(b){return this.genOpExpression(b,b.opType)},unaryExpression:function(f){var e=[],g,i=f.unaryType,f=this[f.value.type](f.value);j.apply(e,f[1]);(g=f[0])?e.push(g+"="+i+g+";"):e[e.length-1]=""+i+q(e);return[g,e]},string:function(b){return["",["'"+x(b.value,!0)+"'"]]},number:function(b){return["",[b.value]]},"boolean":function(b){return["",[b.value]]},id:function(g){var f=[],m=g.depth,n=g.parts,i="id"+l++,n=this.getIdStringFromIdParts(f,n);f.push("var "+i+' = getPropertyUtil(engine,scope,"'+n+'",'+m+","+g.lineNumber+");");return[i,f]},block:function(i){var e=i.program,p=[],s=i.tpl,o=this.genConfig(s),i=o[0],n=s.path,m=n.string;w(p,o[1]);i||(i=h.guid("config"),p.push("var "+i+" = {};"));p.push(i+".fn="+this.genFunction(e.statements).join("\n")+";");e.inverse&&(e=this.genFunction(e.inverse).join("\n"),p.push(i+".inverse="+e+";"));s.isInverted&&(e="inverse"+l++,p.push("var "+e+"="+i+".fn;"),p.push(i+".fn = "+i+".inverse;"),p.push(i+".inverse = "+e+";"));if(!s.hash&&!s.params){s=n.parts;for(e=0;e<s.length;e++){if("string"!==typeof s[e]){m=this.getIdStringFromIdParts(p,s);break}}}p.push("buffer += runBlockCommandUtil(engine, scope, "+i+', "'+m+'", '+n.lineNumber+");");return p},content:function(b){return["buffer += '"+x(b.value,!1)+"';"]},tpl:function(e){var c=[],f=this.genIdOrInlineCommand(e.path,e);w(c,f[1]);c.push("buffer += renderOutputUtil("+f[0]+","+e.escaped+");");return c},tplExpression:function(f){var e=[],g=f.escaped,i;i=f.expression;f=f.expression.type;i="id"===f?this.genIdOrInlineCommand(i):this[f](i);i[0]?(w(e,i[1]),i=i[0]):(w(e,i[1].slice(0,-1)),i=q(i[1]));e.push("buffer += renderOutputUtil("+i+","+g+");");return e},getIdStringFromIdParts:function(m,e){var t="",p,s,o,n=!0;for(p=0;p<e.length;p++){s=e[p],o=s.type,n||(t+="."),o?(s=this[o](s),s[0]&&(w(m,s[1]),t+='"+'+s[0]+'+"',n=!0)):(t+=s,n=!1)}return t}},d;return d={parse:function(b){return r.parse(b)},compileToStr:function(b){b=this.compile(b);return"function("+b.params.join(",")+"){\n"+b.source.join("\n")+"}"},compile:function(b){b=this.parse(b);l=0;return D.genFunction(b.statements,!0)},compileToFn:function(g,f){var m=d.compile(g),f=f||{},i="sourceURL="+(f.name?f.name:"xtemplate"+A++)+".js";return Function.apply(null,[].concat(m.params).concat(m.source.join("\n")+"\n//@ "+i+"\n//# "+i))}}});
KISSY.add("event/dom/touch/handle-map",[],function(){return{}});KISSY.add("event/dom/touch/single-touch",[],function(e){function a(){}a.prototype={constructor:a,requiredTouchCount:1,onTouchStart:function(a){if(a.touches.length!==this.requiredTouchCount)return!1;a=this.lastTouches=a.touches;this.lastXY={pageX:a[0].pageX,pageY:a[0].pageY}},onTouchMove:e.noop,onTouchEnd:e.noop};return a});
KISSY.add("event/dom/touch/tap",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(d){d.preventDefault()}function h(){h.superclass.constructor.apply(this,arguments)}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./single-touch"),k=i.Object;e.extend(h,f,{onTouchMove:function(d){var a=this.lastXY,d=d.changedTouches[0];if(!d||5<Math.abs(d.pageX-a.pageX)||5<Math.abs(d.pageY-a.pageY))return!1},onTouchEnd:function(d){var a=d.changedTouches[0],b=d.target,n=new k({type:"tap",
target:b,currentTarget:b});e.mix(n,{pageX:a.pageX,pageY:a.pageY,originalEvent:d.originalEvent,which:1,touch:a});i.fire(b,"tap",n);if(n.isDefaultPrevented())i.on(b,"click",{fn:c,once:1})}});g.tap={handle:new h};return h});
KISSY.add("event/dom/touch/swipe",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(b,a,f){var g=a.changedTouches[0],q=g.pageX-b.startX,m=g.pageY-b.startY,j=Math.abs(q),r=Math.abs(m);if(f){if(b.isVertical&&b.isHorizontal){if(5>Math.max(j,r))return;r>j?b.isHorizontal=0:b.isVertical=0}}else if(b.isVertical&&r<l&&(b.isVertical=0),b.isHorizontal&&j<l)b.isHorizontal=0;if(b.isHorizontal)q=0>q?"left":"right";else if(b.isVertical)q=0>m?"up":"down",j=r;else return!1;i.fire(a.target,
f?d:k,{originalEvent:a.originalEvent,pageX:g.pageX,pageY:g.pageY,which:1,touch:g,direction:q,distance:j,duration:(a.timeStamp-b.startTime)/1E3})}function h(){}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./single-touch"),k="swipe",d="swiping",l=50;e.extend(h,f,{onTouchStart:function(b){if(!1===h.superclass.onTouchStart.apply(this,arguments))return!1;var a=b.touches[0];this.startTime=b.timeStamp;this.isVertical=this.isHorizontal=1;this.startX=a.pageX;this.startY=a.pageY;-1!==b.type.indexOf("mouse")&&
b.preventDefault()},onTouchMove:function(b){var a=b.changedTouches[0],d=a.pageY-this.startY,a=Math.abs(a.pageX-this.startX),d=Math.abs(d);if(1E3<b.timeStamp-this.startTime)return!1;this.isVertical&&35<a&&(this.isVertical=0);this.isHorizontal&&35<d&&(this.isHorizontal=0);return c(this,b,1)},onTouchEnd:function(a){return!1===this.onTouchMove(a)?!1:c(this,a,0)}});g[k]=g[d]={handle:new h};return h});
KISSY.add("event/dom/touch/double-tap",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(){}var h=a("./handle-map"),g=a("event/dom/base"),i=a("./single-touch");e.extend(c,i,{onTouchStart:function(a){if(!1===c.superclass.onTouchStart.apply(this,arguments))return!1;this.startTime=a.timeStamp;this.singleTapTimer&&(clearTimeout(this.singleTapTimer),this.singleTapTimer=0)},onTouchMove:function(){return!1},onTouchEnd:function(a){var i=this.lastEndTime,d=a.timeStamp,e=a.target,
b=a.changedTouches[0],c=d-this.startTime;this.lastEndTime=d;if(i&&(c=d-i,300>c)){this.lastEndTime=0;g.fire(e,"doubleTap",{touch:b,duration:c/1E3});return}c=d-this.startTime;300<c?g.fire(e,"singleTap",{touch:b,pageX:b.pageX,which:1,pageY:b.pageY,duration:c/1E3}):this.singleTapTimer=setTimeout(function(){g.fire(e,"singleTap",{touch:b,pageX:b.pageX,which:1,pageY:b.pageY,duration:c/1E3})},300)}});h.singleTap=h.doubleTap={handle:new c};return c});
KISSY.add("event/dom/touch/multi-touch",["dom"],function(e,a){function c(){}var h=a("dom");c.prototype={constructor:c,requiredTouchCount:2,onTouchStart:function(a){var i=this.requiredTouchCount,c=a.touches.length;c===i?this.start():c>i&&this.end(a)},onTouchEnd:function(a){this.end(a)},start:function(){this.isTracking||(this.isTracking=!0,this.isStarted=!1)},fireEnd:e.noop,getCommonTarget:function(a){var c=a.touches,a=c[0].target,c=c[1].target;if(a===c||h.contains(a,c))return a;for(;;){if(h.contains(c,
a))return c;c=c.parentNode}"getCommonTarget error!"},end:function(a){this.isTracking&&(this.isTracking=!1,this.isStarted&&(this.isStarted=!1,this.fireEnd(a)))}};return c});
KISSY.add("event/dom/touch/pinch",["./handle-map","event/dom/base","./multi-touch"],function(e,a){function c(){}function h(a){2===a.touches.length&&a.preventDefault()}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./multi-touch");e.extend(c,f,{onTouchMove:function(a){if(this.isTracking){var d=a.touches;if(0<d[0].pageX&&0<d[0].pageY&&0<d[1].pageX&&0<d[1].pageY){var c,b=d[0],f=d[1];c=b.pageX-f.pageX;b=b.pageY-f.pageY;c=Math.sqrt(c*c+b*b);this.lastTouches=d;this.isStarted?i.fire(this.target,"pinch",
e.mix(a,{distance:c,scale:c/this.startDistance})):(this.isStarted=!0,this.startDistance=c,d=this.target=this.getCommonTarget(a),i.fire(d,"pinchStart",e.mix(a,{distance:c,scale:1})))}}},fireEnd:function(a){i.fire(this.target,"pinchEnd",e.mix(a,{touches:this.lastTouches}))}});f=new c;g.pinchStart=g.pinchEnd={handle:f};g.pinch={handle:f,setup:function(){i.on(this,"touchmove",h)},tearDown:function(){i.detach(this,"touchmove",h)}};return c});
KISSY.add("event/dom/touch/tap-hold",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(){}var h=a("./handle-map"),g=a("event/dom/base"),i=a("./single-touch");e.extend(c,i,{onTouchStart:function(a){if(!1===c.superclass.onTouchStart.call(this,a))return!1;this.timer=setTimeout(function(){var c=a.touches[0];g.fire(a.target,"tapHold",{touch:c,pageX:c.pageX,pageY:c.pageY,which:1,duration:(e.now()-a.timeStamp)/1E3})},1E3)},onTouchMove:function(){clearTimeout(this.timer);return!1},
onTouchEnd:function(){clearTimeout(this.timer)}});h.tapHold={handle:new c};return c});
KISSY.add("event/dom/touch/rotate",["./handle-map","event/dom/base","./multi-touch"],function(e,a){function c(){}function h(a){2===a.touches.length&&a.preventDefault()}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./multi-touch"),k=180/Math.PI;e.extend(c,f,{onTouchMove:function(a){if(this.isTracking){var c=a.touches,b=c[0],f=c[1],g=this.lastAngle,b=Math.atan2(f.pageY-b.pageY,f.pageX-b.pageX)*k;if(void 0!==g){var f=Math.abs(b-g),h=(b+360)%360,q=(b-360)%360;Math.abs(h-g)<f?b=h:Math.abs(q-g)<f&&
(b=q)}this.lastTouches=c;this.lastAngle=b;this.isStarted?i.fire(this.target,"rotate",e.mix(a,{angle:b,rotation:b-this.startAngle})):(this.isStarted=!0,this.startAngle=b,this.target=this.getCommonTarget(a),i.fire(this.target,"rotateStart",e.mix(a,{angle:b,rotation:0})))}},end:function(){this.lastAngle=void 0;c.superclass.end.apply(this,arguments)},fireEnd:function(a){i.fire(this.target,"rotateEnd",e.mix(a,{touches:this.lastTouches}))}});f=new c;g.rotateEnd=g.rotateStart={handle:f};g.rotate={handle:f,
setup:function(){i.on(this,"touchmove",h)},tearDown:function(){i.detach(this,"touchmove",h)}};return c});
KISSY.add("event/dom/touch/handle","dom,./handle-map,event/dom/base,./tap,./swipe,./double-tap,./pinch,./tap-hold,./rotate".split(","),function(e,a){function c(a){return e.startsWith(a,"touch")}function h(a){return e.startsWith(a,"mouse")}function g(a){return e.startsWith(a,"MSPointer")||e.startsWith(a,"pointer")}function i(a){this.doc=a;this.eventHandle={};this.init();this.touches=[];this.inTouch=0}var f=a("dom"),k=a("./handle-map"),d=a("event/dom/base");a("./tap");a("./swipe");a("./double-tap");
a("./pinch");a("./tap-hold");a("./rotate");var l=e.guid("touch-handle"),b=e.Features,n,p,o;if(b.isTouchEventSupported())if(e.UA.ios){o="touchend touchcancel";n="touchstart";p="touchmove"}else{o="touchend touchcancel mouseup";n="touchstart mousedown";p="touchmove mousemove"}else if(b.isPointerSupported()){n="pointerdown";p="pointermove";o="pointerup pointercancel"}else if(b.isMsPointerSupported()){n="MSPointerDown";p="MSPointerMove";o="MSPointerUp MSPointerCancel"}else{n="mousedown";p="mousemove";
o="mouseup"}i.prototype={constructor:i,lastTouches:[],firstTouch:null,init:function(){var a=this.doc;d.on(a,n,this.onTouchStart,this);if(!g(p))d.on(a,p,this.onTouchMove,this);d.on(a,o,this.onTouchEnd,this)},addTouch:function(a){a.identifier=a.pointerId;this.touches.push(a)},removeTouch:function(a){for(var m=0,c=a.pointerId,b=this.touches,d=b.length;m<d;m++){a=b[m];if(a.pointerId===c){b.splice(m,1);break}}},updateTouch:function(a){for(var c=0,j,b=a.pointerId,d=this.touches,e=d.length;c<e;c++){j=d[c];
j.pointerId===b&&(d[c]=a)}},isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(this.firstTouch===null)this.firstTouch=a.identifier},removePrimaryTouch:function(a){if(this.isPrimaryTouch(a))this.firstTouch=null},dupMouse:function(a){var c=this.lastTouches,a=a.changedTouches[0];if(this.isPrimaryTouch(a)){var b={x:a.clientX,y:a.clientY};c.push(b);setTimeout(function(){var a=c.indexOf(b);a>-1&&c.splice(a,1)},2500)}},isEventSimulatedFromTouch:function(a){for(var c=
this.lastTouches,b=a.clientX,a=a.clientY,d=0,e=c.length,f;d<e&&(f=c[d]);d++){var g=Math.abs(b-f.x),h=Math.abs(a-f.y);if(g<=25&&h<=25)return true}return 0},normalize:function(a){var b=a.type,j;if(c(b)){j=b==="touchend"||b==="touchcancel"?a.changedTouches:a.touches;if(j.length===1){a.which=1;a.pageX=j[0].pageX;a.pageY=j[0].pageY}return a}j=this.touches;b=!b.match(/(up|cancel)$/i);a.touches=b?j:[];a.targetTouches=b?j:[];a.changedTouches=j;return a},onTouchStart:function(a){var b,j;j=a.type;var e=this.eventHandle;
if(c(j)){this.setPrimaryTouch(a.changedTouches[0]);this.dupMouse(a)}else if(h(j)){if(this.isEventSimulatedFromTouch(a))return;this.touches=[a.originalEvent]}else if(g(j)){this.addTouch(a.originalEvent);if(this.touches.length===1)d.on(this.doc,p,this.onTouchMove,this)}else throw Error("unrecognized touch event: "+a.type);for(b in e){j=e[b].handle;j.isActive=1}this.callEventHandle("onTouchStart",a)},onTouchMove:function(a){var b=a.type;if(h(b)){if(this.isEventSimulatedFromTouch(b))return;this.touches=
[a.originalEvent]}else if(g(b))this.updateTouch(a.originalEvent);else if(!c(b))throw Error("unrecognized touch event: "+a.type);this.callEventHandle("onTouchMove",a)},onTouchEnd:function(a){var b=this,j=a.type;if(!h(j)||!b.isEventSimulatedFromTouch(a)){b.callEventHandle("onTouchEnd",a);if(c(j)){b.dupMouse(a);e.makeArray(a.changedTouches).forEach(function(a){b.removePrimaryTouch(a)})}else if(h(j))b.touches=[];else if(g(j)){b.removeTouch(a.originalEvent);b.touches.length||d.detach(b.doc,p,b.onTouchMove,
b)}}},callEventHandle:function(a,b){var c=this.eventHandle,d,e,b=this.normalize(b);if(b.changedTouches.length){for(d in c){e=c[d].handle;if(!e.processed){e.processed=1;if(e.isActive&&e[a]&&e[a](b)===false)e.isActive=0}}for(d in c){e=c[d].handle;e.processed=0}}},addEventHandle:function(a){var b=this.eventHandle,c=k[a].handle;b[a]?b[a].count++:b[a]={count:1,handle:c}},removeEventHandle:function(a){var b=this.eventHandle;if(b[a]){b[a].count--;b[a].count||delete b[a]}},destroy:function(){var a=this.doc;
d.detach(a,n,this.onTouchStart,this);d.detach(a,p,this.onTouchMove,this);d.detach(a,o,this.onTouchEnd,this)}};return{addDocumentHandle:function(a,b){var c=f.getDocument(a),d=f.data(c,l);d||f.data(c,l,d=new i(c));b&&d.addEventHandle(b)},removeDocumentHandle:function(a,b){var c=f.getDocument(a),d=f.data(c,l);if(d){b&&d.removeEventHandle(b);if(e.isEmptyObject(d.eventHandle)){d.destroy();f.removeData(c,l)}}}}});
KISSY.add("event/dom/touch",["event/dom/base","./touch/handle-map","./touch/handle"],function(e,a){function c(a){d.addDocumentHandle(this,a);k[a].setup.apply(this,arguments)}function h(a){d.removeDocumentHandle(this,a);k[a].tearDown.apply(this,arguments)}function g(a){d.addDocumentHandle(this,a)}function i(a){d.removeDocumentHandle(this,a)}var f=a("event/dom/base"),k=a("./touch/handle-map"),d=a("./touch/handle"),l=f.Gesture,b=l.start="KSPointerDown",n=l.move="KSPointerMove",p=l.end="KSPointerUp";
l.tap="tap";l.doubleTap="doubleTap";k[b]={handle:{isActive:1,onTouchStart:function(a){f.fire(a.target,b,a)}}};k[n]={handle:{isActive:1,onTouchMove:function(a){f.fire(a.target,n,a)}}};k[p]={handle:{isActive:1,onTouchEnd:function(a){f.fire(a.target,p,a)}}};var l=f.Special,o,q,m;for(q in k)o={},m=k[q],o.setup=m.setup?c:g,o.tearDown=m.tearDown?h:i,m.add&&(o.add=m.add),m.remove&&(o.remove=m.remove),l[q]=o});
KISSY.add("cookie",[],function(b){function f(c){return"string"===typeof c&&""!==c}var h=b.Env.host.document,j=encodeURIComponent,g=b.urlDecode;b.Cookie={get:function(c){var a,d;if(f(c)&&(d=(""+h.cookie).match(RegExp("(?:^| )"+c+"(?:(?:=([^;]*))|;|$)"))))a=d[1]?g(d[1]):"";return a},set:function(c,a,d,b,i,g){var a=""+j(a),e=d;"number"===typeof e&&(e=new Date,e.setTime(e.getTime()+864E5*d));e instanceof Date&&(a+="; expires="+e.toUTCString());f(b)&&(a+="; domain="+b);f(i)&&(a+="; path="+i);g&&(a+="; secure");
h.cookie=c+"="+a},remove:function(c,a,d,b){this.set(c,"",-1,a,d,b)}};return b.Cookie});
KISSY.add("json/quote",[],function(o){var h={"":"\\b","":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},j={},k=/["\b\f\n\r\t\x00-\x1f]/g,m=/\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;o.each(h,function(f,b){j[b]=f});j["\\/"]="/";return{quote:function(f){return'"'+f.replace(k,function(b){var a;if(!(a=h[b]))a="\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4);return a})+'"'},unQuote:function(f){return f.slice(1,f.length-1).replace(m,function(b){var a;if(!(a=j[b]))a=String.fromCharCode(parseInt(b.slice(2),
16));return a})}}});
KISSY.add("json/stringify",["./quote"],function(o,h){function j(f){return 10>f?"0"+f:f}function k(f,b,a,c,e,s,g){var d=b[f];if(d&&"object"===typeof d)if("function"===typeof d.toJSON)d=d.toJSON(f);else if(d instanceof Date)d=isFinite(d.valueOf())?d.getUTCFullYear()+"-"+j(d.getUTCMonth()+1)+"-"+j(d.getUTCDate())+"T"+j(d.getUTCHours())+":"+j(d.getUTCMinutes())+":"+j(d.getUTCSeconds())+"Z":null;else if(d instanceof String||d instanceof Number||d instanceof Boolean)d=d.valueOf();void 0!==a&&(d=a.call(b,
f,d));switch(typeof d){case "number":return isFinite(d)?""+d:"null";case "string":return m.quote(d);case "boolean":return""+d;case "object":if(d)if(o.isArray(d)){for(var f=d,b=g,g=g+e,d=[],h=f.length,p=0;p<h;){var l=k(""+p,f,a,c,e,s,g);d[d.length]=void 0===l?"null":l;++p}d.length?e?(a=d.join("\n,"+g),a="[\n"+g+a+"\n"+b+"]"):a="["+d.join(",")+"]":a="[]"}else{for(var f=d,b=g,g=g+e,i,d=void 0!==c?c:o.keys(f),l=[],p=0,h=d.length;p<h;p++){i=d[p];var t=k(i,f,a,c,e,s,g);void 0!==t&&(i=m.quote(i),i+=":",
e&&(i+=" "),i+=t,l[l.length]=i)}l.length?e?(a=l.join(",\n"+g),a="{\n"+g+a+"\n"+b+"}"):a="{"+l.join(",")+"}":a="{}"}else a="null";return a}}var m=h("./quote");return function(f,b,a){var c="",e,h;b&&("function"===typeof b?h=b:o.isArray(b)&&(e=b));"number"===typeof a?(a=Math.min(10,a),c=Array(a+1).join(" ")):"string"===typeof a&&(c=a.slice(0,10));return k("",{"":f},h,e,c,[],"")}});
KISSY.add("json/parser",[],function(o,h){var j={},k=KISSY,m=function(b){this.rules=[];k.mix(this,b);this.resetInput(this.input)};m.prototype={constructor:function(b){this.rules=[];k.mix(this,b);this.resetInput(this.input)},resetInput:function(b){k.mix(this,{input:b,matched:"",stateStack:[m.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var b=this.stateStack[this.stateStack.length-1],a=[],b=this.mapState(b);k.each(this.rules,
function(c){var e=c.state||c[3];e?k.inArray(b,e)&&a.push(c):b==m.STATIC.INITIAL&&a.push(c)});return a},pushState:function(b){this.stateStack.push(b)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var b=m.STATIC.DEBUG_CONTEXT_LIMIT,a=this.matched,c=this.match,e=this.input,a=a.slice(0,a.length-c.length),a=(a.length>b?"...":"")+a.slice(-b).replace(/\n/," "),c=c+e,c=c.slice(0,b)+(c.length>b?"...":"");return a+c+"\n"+Array(a.length+
1).join("-")+"^"},mapSymbol:function(b){var a=this.symbolMap;return!a?b:a[b]||(a[b]=++this.symbolId)},mapReverseSymbol:function(b){var a=this.symbolMap,c,e=this.reverseSymbolMap;if(!e&&a)for(c in e=this.reverseSymbolMap={},a)e[a[c]]=c;return e?e[b]:b},mapState:function(b){var a=this.stateMap;return!a?b:a[b]||(a[b]=++this.stateId)},lex:function(){var b=this.input,a,c,e,f=this.getCurrentRules();this.match=this.text="";if(!b)return this.mapSymbol(m.STATIC.END_TAG);for(a=0;a<f.length;a++){c=f[a];var g=
c.token||c[0];e=c.action||c[2]||h;if(c=b.match(c.regexp||c[1])){if(a=c[0].match(/\n.*/g))this.lineNumber+=a.length;k.mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:a?a[a.length-1].length-1:this.lastColumn+c[0].length});a=this.match=c[0];this.matches=c;this.text=a;this.matched+=a;e=e&&e.call(this);e=e===h?g:this.mapSymbol(e);this.input=b=b.slice(a.length);return e?e:this.lex()}}"lex error at line "+this.lineNumber+":\n"+this.showDebugInfo();return h}};
m.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var f=new m({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});j.lexer=f;f.symbolMap={$EOF:1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,$START:13,
json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};j.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return"true"===this.$1}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],
[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var b={};b[this.$1.key]=this.$1.value;return b}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];j.table={gotos:{"0":{14:7,15:8,16:9,17:10},2:{15:12,16:9,17:10,18:13},3:{19:16,20:17},18:{15:23,16:9,17:10},20:{15:24,16:9,17:10},21:{19:25}},
action:{"0":{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},1:{1:[2,2,0],3:[2,2,0],6:[2,2,0],8:[2,2,0]},2:{2:[1,0,1],5:[1,0,2],6:[1,0,11],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},3:{2:[1,0,14],8:[1,0,15]},4:{1:[2,3,0],3:[2,3,0],6:[2,3,0],8:[2,3,0]},5:{1:[2,6,0],3:[2,6,0],6:[2,6,0],8:[2,6,0]},6:{1:[2,7,0],3:[2,7,0],6:[2,7,0],8:[2,7,0]},7:{1:[0,0,0]},8:{1:[2,1,0]},9:{1:[2,4,0],3:[2,4,0],6:[2,4,0],8:[2,4,0]},10:{1:[2,5,0],3:[2,5,0],6:[2,5,0],8:[2,5,0]},11:{1:[2,10,0],3:[2,10,0],6:[2,
10,0],8:[2,10,0]},12:{3:[2,8,0],6:[2,8,0]},13:{3:[1,0,18],6:[1,0,19]},14:{4:[1,0,20]},15:{1:[2,15,0],3:[2,15,0],6:[2,15,0],8:[2,15,0]},16:{3:[2,13,0],8:[2,13,0]},17:{3:[1,0,21],8:[1,0,22]},18:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},19:{1:[2,11,0],3:[2,11,0],6:[2,11,0],8:[2,11,0]},20:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},21:{2:[1,0,14]},22:{1:[2,16,0],3:[2,16,0],6:[2,16,0],8:[2,16,0]},23:{3:[2,9,0],6:[2,9,0]},24:{3:[2,12,0],8:[2,12,0]},25:{3:[2,14,
0],8:[2,14,0]}}};j.parse=function(b){var a=this,c=a.lexer,e,f,g,d=a.table,j=d.gotos,d=d.action,m=a.productions,l=[null],i=[0];for(c.resetInput(b);;){e=i[i.length-1];f||(f=c.lex());if(!f)return"it is not a valid input: "+b,"error",!1;g=d[e]&&d[e][f];if(!g){var o=[];d[e]&&k.each(d[e],function(b,c){o.push(a.lexer.mapReverseSymbol(c))});b="Syntax error at line "+c.lineNumber+":\n"+c.showDebugInfo()+"\nexpect "+o.join(", ");b;return!1}switch(g[0]){case 1:i.push(f);l.push(c.text);i.push(g[2]);f=null;break;
case 2:var n=m[g[1]];e=n.symbol||n[0];g=n.action||n[2];var q=(n.rhs||n[1]).length,r=0,n=l[l.length-q];a.$$=n;for(n=h;r<q;r++)a["$"+(q-r)]=l[l.length-1-r];g&&(n=g.call(a));n=n!==h?n:a.$$;q&&(i=i.slice(0,-2*q),l=l.slice(0,-1*q));i.push(e);l.push(n);i.push(j[i[i.length-2]][i[i.length-1]]);break;case 0:return n}}return h};return j});
KISSY.add("json/parse",["./parser","./quote"],function(o,h){function j(f,b,a){var c=f[b],e,h,g;if("object"===typeof c)if(o.isArray(c)){e=0;h=c.length;for(var d=[];e<h;)g=j(c,""+e,a),void 0!==g&&(d[d.length]=g);c=d}else{d=o.keys(c);e=0;for(h=d.length;e<h;e++){var k=d[e];g=j(c,k,a);void 0===g?delete c[k]:c[k]=g}}return a.call(f,b,c)}var k=h("./parser"),m=h("./quote");k.yy={unQuote:m.unQuote};return function(f,b){var a=k.parse(""+f);return b?j({"":a},"",b):a}});
KISSY.add("json",["./json/stringify","./json/parse"],function(o,h){var j=h("./json/stringify"),k=h("./json/parse");return o.JSON={stringify:j,parse:k}});
KISSY.add("dom/class-list",["dom/base"],function(g,i){var j=i("dom/base"),h=/[\n\t\r]/g;return g.mix(j,{_hasClass:function(f,d){var a=f.className,e,b;if(a){a=(" "+a+" ").replace(h," ");b=0;for(e=d.length;b<e;b++)if(0>a.indexOf(" "+d[b]+" "))return!1;return!0}return!1},_addClass:function(f,d){var a=f.className,e,b=d.length,c;if(a){e=(" "+a+" ").replace(h," ");for(c=0;c<b;c++)0>e.indexOf(" "+d[c]+" ")&&(a+=" "+d[c]);a=g.trim(a)}else a=d.join(" ");f.className=a},_removeClass:function(f,d){var a=f.className,
e=d.length,b,c;if(a&&e){a=(" "+a+" ").replace(h," ");for(b=0;b<e;b++)for(c=" "+d[b]+" ";0<=a.indexOf(c);)a=a.replace(c," ");f.className=g.trim(a)}},_toggleClass:function(f,d,a){var e,b,c,g=[],h=[],i=d.length;for(e=0;e<i;e++)b=d[e],c=(c=this._hasClass(f,[b]))?!0!==a&&"remove":!1!==a&&"add","remove"===c?g.push(b):"add"===c&&h.push(b);h.length&&this._addClass(f,h);g.length&&this._removeClass(f,g)}})});
KISSY.add("dom/selector/parser",[],function(D,x){var v={},s=KISSY,k=function(d){this.rules=[];s.mix(this,d);this.resetInput(this.input)};k.prototype={constructor:function(d){this.rules=[];s.mix(this,d);this.resetInput(this.input)},resetInput:function(d){s.mix(this,{input:d,matched:"",stateStack:[k.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var d=this.stateStack[this.stateStack.length-1],f=[],d=this.mapState(d);s.each(this.rules,
function(e){var g=e.state||e[3];g?s.inArray(d,g)&&f.push(e):d===k.STATIC.INITIAL&&f.push(e)});return f},pushState:function(d){this.stateStack.push(d)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var d=k.STATIC.DEBUG_CONTEXT_LIMIT,f=this.matched,e=this.match,g=this.input,f=f.slice(0,f.length-e.length),f=(f.length>d?"...":"")+f.slice(-d).replace(/\n/," "),e=e+g,e=e.slice(0,d)+(e.length>d?"...":"");return f+e+"\n"+Array(f.length+
1).join("-")+"^"},mapSymbol:function(d){var f=this.symbolMap;return!f?d:f[d]||(f[d]=++this.symbolId)},mapReverseSymbol:function(d){var f=this.symbolMap,e,g=this.reverseSymbolMap;if(!g&&f)for(e in g=this.reverseSymbolMap={},f)g[f[e]]=e;return g?g[d]:d},mapState:function(d){var f=this.stateMap;return!f?d:f[d]||(f[d]=++this.stateId)},lex:function(){var d=this.input,f,e,g,E=this.getCurrentRules();this.match=this.text="";if(!d)return this.mapSymbol(k.STATIC.END_TAG);for(f=0;f<E.length;f++){e=E[f];var n=
e.token||e[0];g=e.action||e[2]||x;if(e=d.match(e.regexp||e[1])){if(f=e[0].match(/\n.*/g))this.lineNumber+=f.length;s.mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:f?f[f.length-1].length-1:this.lastColumn+e[0].length});f=this.match=e[0];this.matches=e;this.text=f;this.matched+=f;g=g&&g.call(this);g=g===x?n:this.mapSymbol(g);this.input=d=d.slice(f.length);return g?g:this.lex()}}"lex error at line "+this.lineNumber+":\n"+this.showDebugInfo();return x}};
k.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var o=new k({rules:[[2,/^\[(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[3,/^(?:[\t\r\n\f\x20]*)\]/,function(){this.text=KISSY.trim(this.text)}],[4,/^(?:[\t\r\n\f\x20]*)~=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[5,/^(?:[\t\r\n\f\x20]*)\|=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[6,/^(?:[\t\r\n\f\x20]*)\^=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],
[7,/^(?:[\t\r\n\f\x20]*)\$=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[8,/^(?:[\t\r\n\f\x20]*)\*=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[9,/^(?:[\t\r\n\f\x20]*)\=(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[10,/^(?:(?:[\w]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))(?:[\w\d-]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))*)\(/,function(){this.text=KISSY.trim(this.text).slice(0,-1);this.pushState("fn")}],[11,/^[^\)]*/,function(){this.popState()},
["fn"]],[12,/^(?:[\t\r\n\f\x20]*)\)/,function(){this.text=KISSY.trim(this.text)}],[13,/^:not\((?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[14,/^(?:(?:[\w]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))(?:[\w\d-]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))*)/,function(){this.text=this.yy.unEscape(this.text)}],[15,/^"(\\"|[^"])*"/,function(){this.text=this.yy.unEscapeStr(this.text)}],[15,/^'(\\'|[^'])*'/,function(){this.text=this.yy.unEscapeStr(this.text)}],[16,/^#(?:(?:[\w\d-]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))+)/,
function(){this.text=this.yy.unEscape(this.text.slice(1))}],[17,/^\.(?:(?:[\w]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))(?:[\w\d-]|[^\x00-\xa0]|(?:\\[^\n\r\f0-9a-f]))*)/,function(){this.text=this.yy.unEscape(this.text.slice(1))}],[18,/^(?:[\t\r\n\f\x20]*),(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[19,/^::?/,0],[20,/^(?:[\t\r\n\f\x20]*)\+(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[21,/^(?:[\t\r\n\f\x20]*)>(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],
[22,/^(?:[\t\r\n\f\x20]*)~(?:[\t\r\n\f\x20]*)/,function(){this.text=KISSY.trim(this.text)}],[23,/^\*/,0],[24,/^(?:[\t\r\n\f\x20]+)/,0],[25,/^./,0]]});v.lexer=o;o.symbolMap={$EOF:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,INCLUDES:4,DASH_MATCH:5,PREFIX_MATCH:6,SUFFIX_MATCH:7,SUBSTRING_MATCH:8,ALL_MATCH:9,FUNCTION:10,PARAMETER:11,RIGHT_PARENTHESES:12,NOT:13,IDENT:14,STRING:15,HASH:16,CLASS:17,COMMA:18,COLON:19,PLUS:20,GREATER:21,TILDE:22,UNIVERSAL:23,S:24,INVALID:25,$START:26,selectors_group:27,selector:28,simple_selector_sequence:29,
combinator:30,type_selector:31,id_selector:32,class_selector:33,attrib_match:34,attrib:35,attrib_val:36,pseudo:37,negation:38,negation_arg:39,suffix_selector:40,suffix_selectors:41};v.productions=[[26,[27]],[27,[28],function(){return[this.$1]}],[27,[27,18,28],function(){this.$1.push(this.$3)}],[28,[29]],[28,[28,30,29],function(){this.$1.nextCombinator=this.$3.prevCombinator=this.$2;this.$3.order=(this.$1.order=this.$1.order||0)+1;this.$3.prev=this.$1;return this.$1.next=this.$3}],[30,[20]],[30,[21]],
[30,[22]],[30,[24],function(){return" "}],[31,[14],function(){return{t:"tag",value:this.$1}}],[31,[23],function(){return{t:"tag",value:this.$1}}],[32,[16],function(){return{t:"id",value:this.$1}}],[33,[17],function(){return{t:"cls",value:this.$1}}],[34,[6]],[34,[7]],[34,[8]],[34,[9]],[34,[4]],[34,[5]],[35,[2,14,3],function(){return{t:"attrib",value:{ident:this.$2}}}],[36,[14]],[36,[15]],[35,[2,14,34,36,3],function(){return{t:"attrib",value:{ident:this.$2,match:this.$3,value:this.$4}}}],[37,[19,10,
11,12],function(){return{t:"pseudo",value:{fn:this.$2.toLowerCase(),param:this.$3}}}],[37,[19,14],function(){return{t:"pseudo",value:{ident:this.$2.toLowerCase()}}}],[38,[13,39,12],function(){return{t:"pseudo",value:{fn:"not",param:this.$2}}}],[39,[31]],[39,[32]],[39,[33]],[39,[35]],[39,[37]],[40,[32]],[40,[33]],[40,[35]],[40,[37]],[40,[38]],[41,[40],function(){return[this.$1]}],[41,[41,40],function(){this.$1.push(this.$2)}],[29,[31]],[29,[41],function(){return{suffix:this.$1}}],[29,[31,41],function(){return{t:"tag",
value:this.$1.value,suffix:this.$2}}]];v.table={gotos:{"0":{27:8,28:9,29:10,31:11,32:12,33:13,35:14,37:15,38:16,40:17,41:18},2:{31:20,32:21,33:22,35:23,37:24,39:25},9:{30:33},11:{32:12,33:13,35:14,37:15,38:16,40:17,41:34},18:{32:12,33:13,35:14,37:15,38:16,40:35},19:{34:43},28:{28:46,29:10,31:11,32:12,33:13,35:14,37:15,38:16,40:17,41:18},33:{29:47,31:11,32:12,33:13,35:14,37:15,38:16,40:17,41:18},34:{32:12,33:13,35:14,37:15,38:16,40:35},43:{36:50},46:{30:33}},action:{"0":{2:[1,0,1],13:[1,0,2],14:[1,
0,3],16:[1,0,4],17:[1,0,5],19:[1,0,6],23:[1,0,7]},1:{14:[1,0,19]},2:{2:[1,0,1],14:[1,0,3],16:[1,0,4],17:[1,0,5],19:[1,0,6],23:[1,0,7]},3:{1:[2,9,0],2:[2,9,0],12:[2,9,0],13:[2,9,0],16:[2,9,0],17:[2,9,0],18:[2,9,0],19:[2,9,0],20:[2,9,0],21:[2,9,0],22:[2,9,0],24:[2,9,0]},4:{1:[2,11,0],2:[2,11,0],12:[2,11,0],13:[2,11,0],16:[2,11,0],17:[2,11,0],18:[2,11,0],19:[2,11,0],20:[2,11,0],21:[2,11,0],22:[2,11,0],24:[2,11,0]},5:{1:[2,12,0],2:[2,12,0],12:[2,12,0],13:[2,12,0],16:[2,12,0],17:[2,12,0],18:[2,12,0],19:[2,
12,0],20:[2,12,0],21:[2,12,0],22:[2,12,0],24:[2,12,0]},6:{10:[1,0,26],14:[1,0,27]},7:{1:[2,10,0],2:[2,10,0],12:[2,10,0],13:[2,10,0],16:[2,10,0],17:[2,10,0],18:[2,10,0],19:[2,10,0],20:[2,10,0],21:[2,10,0],22:[2,10,0],24:[2,10,0]},8:{1:[0,0,0],18:[1,0,28]},9:{1:[2,1,0],18:[2,1,0],20:[1,0,29],21:[1,0,30],22:[1,0,31],24:[1,0,32]},10:{1:[2,3,0],18:[2,3,0],20:[2,3,0],21:[2,3,0],22:[2,3,0],24:[2,3,0]},11:{1:[2,38,0],2:[1,0,1],13:[1,0,2],16:[1,0,4],17:[1,0,5],18:[2,38,0],19:[1,0,6],20:[2,38,0],21:[2,38,0],
22:[2,38,0],24:[2,38,0]},12:{1:[2,31,0],2:[2,31,0],13:[2,31,0],16:[2,31,0],17:[2,31,0],18:[2,31,0],19:[2,31,0],20:[2,31,0],21:[2,31,0],22:[2,31,0],24:[2,31,0]},13:{1:[2,32,0],2:[2,32,0],13:[2,32,0],16:[2,32,0],17:[2,32,0],18:[2,32,0],19:[2,32,0],20:[2,32,0],21:[2,32,0],22:[2,32,0],24:[2,32,0]},14:{1:[2,33,0],2:[2,33,0],13:[2,33,0],16:[2,33,0],17:[2,33,0],18:[2,33,0],19:[2,33,0],20:[2,33,0],21:[2,33,0],22:[2,33,0],24:[2,33,0]},15:{1:[2,34,0],2:[2,34,0],13:[2,34,0],16:[2,34,0],17:[2,34,0],18:[2,34,
0],19:[2,34,0],20:[2,34,0],21:[2,34,0],22:[2,34,0],24:[2,34,0]},16:{1:[2,35,0],2:[2,35,0],13:[2,35,0],16:[2,35,0],17:[2,35,0],18:[2,35,0],19:[2,35,0],20:[2,35,0],21:[2,35,0],22:[2,35,0],24:[2,35,0]},17:{1:[2,36,0],2:[2,36,0],13:[2,36,0],16:[2,36,0],17:[2,36,0],18:[2,36,0],19:[2,36,0],20:[2,36,0],21:[2,36,0],22:[2,36,0],24:[2,36,0]},18:{1:[2,39,0],2:[1,0,1],13:[1,0,2],16:[1,0,4],17:[1,0,5],18:[2,39,0],19:[1,0,6],20:[2,39,0],21:[2,39,0],22:[2,39,0],24:[2,39,0]},19:{3:[1,0,36],4:[1,0,37],5:[1,0,38],
6:[1,0,39],7:[1,0,40],8:[1,0,41],9:[1,0,42]},20:{12:[2,26,0]},21:{12:[2,27,0]},22:{12:[2,28,0]},23:{12:[2,29,0]},24:{12:[2,30,0]},25:{12:[1,0,44]},26:{11:[1,0,45]},27:{1:[2,24,0],2:[2,24,0],12:[2,24,0],13:[2,24,0],16:[2,24,0],17:[2,24,0],18:[2,24,0],19:[2,24,0],20:[2,24,0],21:[2,24,0],22:[2,24,0],24:[2,24,0]},28:{2:[1,0,1],13:[1,0,2],14:[1,0,3],16:[1,0,4],17:[1,0,5],19:[1,0,6],23:[1,0,7]},29:{2:[2,5,0],13:[2,5,0],14:[2,5,0],16:[2,5,0],17:[2,5,0],19:[2,5,0],23:[2,5,0]},30:{2:[2,6,0],13:[2,6,0],14:[2,
6,0],16:[2,6,0],17:[2,6,0],19:[2,6,0],23:[2,6,0]},31:{2:[2,7,0],13:[2,7,0],14:[2,7,0],16:[2,7,0],17:[2,7,0],19:[2,7,0],23:[2,7,0]},32:{2:[2,8,0],13:[2,8,0],14:[2,8,0],16:[2,8,0],17:[2,8,0],19:[2,8,0],23:[2,8,0]},33:{2:[1,0,1],13:[1,0,2],14:[1,0,3],16:[1,0,4],17:[1,0,5],19:[1,0,6],23:[1,0,7]},34:{1:[2,40,0],2:[1,0,1],13:[1,0,2],16:[1,0,4],17:[1,0,5],18:[2,40,0],19:[1,0,6],20:[2,40,0],21:[2,40,0],22:[2,40,0],24:[2,40,0]},35:{1:[2,37,0],2:[2,37,0],13:[2,37,0],16:[2,37,0],17:[2,37,0],18:[2,37,0],19:[2,
37,0],20:[2,37,0],21:[2,37,0],22:[2,37,0],24:[2,37,0]},36:{1:[2,19,0],2:[2,19,0],12:[2,19,0],13:[2,19,0],16:[2,19,0],17:[2,19,0],18:[2,19,0],19:[2,19,0],20:[2,19,0],21:[2,19,0],22:[2,19,0],24:[2,19,0]},37:{14:[2,17,0],15:[2,17,0]},38:{14:[2,18,0],15:[2,18,0]},39:{14:[2,13,0],15:[2,13,0]},40:{14:[2,14,0],15:[2,14,0]},41:{14:[2,15,0],15:[2,15,0]},42:{14:[2,16,0],15:[2,16,0]},43:{14:[1,0,48],15:[1,0,49]},44:{1:[2,25,0],2:[2,25,0],13:[2,25,0],16:[2,25,0],17:[2,25,0],18:[2,25,0],19:[2,25,0],20:[2,25,0],
21:[2,25,0],22:[2,25,0],24:[2,25,0]},45:{12:[1,0,51]},46:{1:[2,2,0],18:[2,2,0],20:[1,0,29],21:[1,0,30],22:[1,0,31],24:[1,0,32]},47:{1:[2,4,0],18:[2,4,0],20:[2,4,0],21:[2,4,0],22:[2,4,0],24:[2,4,0]},48:{3:[2,20,0]},49:{3:[2,21,0]},50:{3:[1,0,52]},51:{1:[2,23,0],2:[2,23,0],12:[2,23,0],13:[2,23,0],16:[2,23,0],17:[2,23,0],18:[2,23,0],19:[2,23,0],20:[2,23,0],21:[2,23,0],22:[2,23,0],24:[2,23,0]},52:{1:[2,22,0],2:[2,22,0],12:[2,22,0],13:[2,22,0],16:[2,22,0],17:[2,22,0],18:[2,22,0],19:[2,22,0],20:[2,22,0],
21:[2,22,0],22:[2,22,0],24:[2,22,0]}}};v.parse=function(d){var f=this,e=f.lexer,g,k,n,u=f.table,q=u.gotos,u=u.action,v=f.productions,l=[null],p=[0];for(e.resetInput(d);;){g=p[p.length-1];k||(k=e.lex());if(!k)return"it is not a valid input: "+d,"error",!1;n=u[g]&&u[g][k];if(!n){var y=[];u[g]&&s.each(u[g],function(d,e){y.push(f.lexer.mapReverseSymbol(e))});d="Syntax error at line "+e.lineNumber+":\n"+e.showDebugInfo()+"\nexpect "+y.join(", ");d;return!1}switch(n[0]){case 1:p.push(k);l.push(e.text);
p.push(n[2]);k=null;break;case 2:var j=v[n[1]];g=j.symbol||j[0];n=j.action||j[2];var t=(j.rhs||j[1]).length,w=0,o,j=l[l.length-t];o=x;for(f.$$=j;w<t;w++)f["$"+(t-w)]=l[l.length-1-w];n&&(o=n.call(f));j=o!==x?o:f.$$;t&&(p=p.slice(0,-2*t),l=l.slice(0,-1*t));p.push(g);l.push(j);p.push(q[p[p.length-2]][p[p.length-1]]);break;case 0:return j}}return x};return v});
KISSY.add("dom/selector",["./selector/parser","dom/basic"],function(D,x){function v(a){return a.replace(K,L)}function s(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function k(a){var b=0,c=0;if("number"===typeof a)c=a;else if("odd"===a)b=2,c=1;else if("even"===a)b=2,c=0;else if(a=a.replace(/\s/g,"").match(I))a[1]?(b=parseInt(a[2]),isNaN(b)&&(b="-"===a[2]?-1:1)):b=0,c=parseInt(a[3])||0;return{a:b,b:c}}function o(a,b,c,f){if(0===b){if(a===c)return f}else if(0<=(a-c)/b&&0===(a-c)%b&&f)return 1}function d(a,
b){return q._selectInternal(a,null,b)}function f(a,b){if(!b)return!0;if(!a||9===a.nodeType)return!1;var c=1,f=b.suffix,d,e;"tag"===b.t&&(c&=F.tag(a,b.value));if(c&&f){d=f.length;for(e=0;c&&e<d;e++){var g=f[e],i=g.t;F[i]&&(c&=F[i](a,g.value))}}return c}function e(a,b){var c=1,d=a,e,g=b;do if(c&=f(a,b)){b=b&&b.prev;if(!b)return!0;e=B[b.nextCombinator];a=s(a,e.dir);if(!e.immediate)return{el:a,match:b}}else if(e=B[b.nextCombinator],e.immediate)break;else return{el:a&&s(a,e.dir),match:b};while(a);return{el:s(d,
B[g.nextCombinator].dir),match:g}}function g(a,b){var c;if(y){if(!(c=a.getAttribute(l)))a.setAttribute(l,c=+new Date+"_"+ ++j)}else if(!(c=a[l]))c=a[l]=+new Date+"_"+ ++j;c=c+"_"+(b.order||0);if(c in t)return t[c];t[c]=E(a,b);return t[c]}function E(a,b){var c=e(a,b);if(!0===c)return!0;a=c.el;for(b=c.match;a;){if(g(a,b))return!0;a=s(a,B[b.nextCombinator].dir)}return!1}function n(a,b,c){p[a]||(p[a]=u.parse(a));var a=p[a],e=0,d=a.length,A,k,i=[];c&&(b=b||c[0].ownerDocument);A=b&&b.ownerDocument||G;for(y=
(k=(b=b||A)&&(b.ownerDocument||b).documentElement)?"html"!==k.nodeName.toLowerCase():!1;e<d;e++){t={};k=a[e];var h=k.suffix,r,m,j,n=c;j=null;if(!n){if(h&&!y){r=0;for(m=h.length;r<m;r++){var l=h[r];if("id"===l.t){j=l.value;break}}}if(j)if(r=!b.getElementById,m=q._contains(A,b),h=r?m?A.getElementById(j):null:b.getElementById(j),!h&&r||h&&w(h,"id")!==j){r=q._getElementsByTagName("*",b);m=r.length;for(l=0;l<m;l++)if(h=r[l],w(h,"id")===j){n=[h];break}l===m&&(n=[])}else m&&h&&b!==A&&(h=q._contains(b,h)?
h:null),n=h?[h]:[];else n=q._getElementsByTagName(k.value||"*",b)}j=0;if(h=n.length)for(;j<h;j++){r=n[j];a:{m=r;var l=void 0,o=k;do{if(!f(m,o)){m=null;break a}o=o.prev;if(!o){m=!0;break a}l=B[o.nextCombinator];m=s(m,l.dir)}while(m&&l.immediate);m=!m?null:{el:m,match:o}}!0===m?i.push(r):m&&g(m.el,m.match)&&i.push(r)}}1<d&&(i=q.unique(i));return i}var u=x("./selector/parser"),q=x("dom/basic");"use KISSY css3 selector";var G=D.Env.host.document,l="_ks_data_selector_id_",p={},y,j=0,t={},w=function(a,
b){return y?q._getSimpleAttr(a,b):q.attr(a,b)},J=q._hasSingleClass,H=q._isTag,I=/^(([+-]?(?:\d+)?)?n)?([+-]?\d+)?$/,K=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,L=function(a,b){var c="0x"+b-65536;return isNaN(c)?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,c&1023|56320)};u.lexer.yy={unEscape:v,unEscapeStr:function(a){return this.unEscape(a.slice(1,-1))}};var C={"nth-child":function(a,b){var c=k(b),f=c.a,c=c.b;if(0===f&&0===c)return 0;var e=0,d=a.parentNode;if(d)for(var d=d.childNodes,
g=0,i,h=d.length;g<h;g++)if(i=d[g],1===i.nodeType&&(e++,i=o(e,f,c,i===a),void 0!==i))return i;return 0},"nth-last-child":function(a,b){var c=k(b),f=c.a,c=c.b;if(0===f&&0===c)return 0;var e=0,d=a.parentNode;if(d)for(var d=d.childNodes,g=d.length-1,i;0<=g;g--)if(i=d[g],1===i.nodeType&&(e++,i=o(e,f,c,i===a),void 0!==i))return i;return 0},"nth-of-type":function(a,b){var c=k(b),f=c.a,c=c.b;if(0===f&&0===c)return 0;var d=0,e=a.parentNode;if(e)for(var e=e.childNodes,g=a.tagName,i=0,h,j=e.length;i<j;i++)if(h=
e[i],h.tagName===g&&(d++,h=o(d,f,c,h===a),void 0!==h))return h;return 0},"nth-last-of-type":function(a,b){var c=k(b),e=c.a,c=c.b;if(0===e&&0===c)return 0;var f=0,d=a.parentNode;if(d)for(var d=d.childNodes,g=a.tagName,i=d.length-1,h;0<=i;i--)if(h=d[i],h.tagName===g&&(f++,h=o(f,e,c,h===a),void 0!==h))return h;return 0},lang:function(a,b){var c,b=v(b.toLowerCase());do if(c=y?a.getAttribute("xml:lang")||a.getAttribute("lang"):a.lang)return c=c.toLowerCase(),c===b||0===c.indexOf(b+"-");while((a=a.parentNode)&&
1===a.nodeType);return!1},not:function(a,b){return!F[b.t](a,b.value)}},z={empty:function(a){for(var a=a.childNodes,b=0,c=a.length-1,d;b<c;b++)if(d=a[b],d=d.nodeType,1===d||3===d||4===d||5===d)return 0;return 1},root:function(a){return a.ownerDocument&&a===a.ownerDocument.documentElement},"first-child":function(a){return C["nth-child"](a,1)},"last-child":function(a){return C["nth-last-child"](a,1)},"first-of-type":function(a){return C["nth-of-type"](a,1)},"last-of-type":function(a){return C["nth-last-of-type"](a,
1)},"only-child":function(a){return z["first-child"](a)&&z["last-child"](a)},"only-of-type":function(a){return z["first-of-type"](a)&&z["last-of-type"](a)},focus:function(a){var b=a.ownerDocument;return b&&a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!(!a.type&&!(a.href||0<=a.tabIndex))},target:function(a){var b=location.hash;return b&&b.slice(1)===w(a,"id")},enabled:function(a){return!a.disabled},disabled:function(a){return a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&a.checked||"option"===b&&a.selected}},M={"~=":function(a,b){return!b||-1<b.indexOf(" ")?0:-1!==(" "+a+" ").indexOf(" "+b+" ")},"|=":function(a,b){return-1!==(" "+a).indexOf(" "+b+"-")},"^=":function(a,b){return b&&D.startsWith(a,b)},"$=":function(a,b){return b&&D.endsWith(a,b)},"*=":function(a,b){return b&&-1!==a.indexOf(b)},"=":function(a,b){return a===b}},F={tag:H,cls:J,id:function(a,b){return w(a,"id")===b},attrib:function(a,b){var c=b.ident;y||(c=c.toLowerCase());var c=w(a,c),d=b.match;if(!d&&
void 0!==c)return 1;if(d){if(void 0===c)return 0;if(d=M[d])return d(c+"",b.value+"")}return 0},pseudo:function(a,b){var c,d;if(d=b.fn){if(!(c=C[d]))throw new SyntaxError("Syntax error: not support pseudo: "+d);return c(a,b.param)}if(c=b.ident){if(!z[c])throw new SyntaxError("Syntax error: not support pseudo: "+c);return z[c](a)}return 0}},B={">":{dir:"parentNode",immediate:1}," ":{dir:"parentNode"},"+":{dir:"previousSibling",immediate:1},"~":{dir:"previousSibling"}};"sourceIndex"in G.documentElement&&
(q._compareNodeOrder=function(a,b){return a.sourceIndex-b.sourceIndex});q._matchesInternal=d;q._selectInternal=n;return{parse:function(a){return u.parse(a)},select:n,matches:d}});
KISSY.add("dom/ie/create",["dom/base"],function(l,k){var e=k("dom/base");e._fixCloneAttributes=function(c,a){a.clearAttributes&&a.clearAttributes();a.mergeAttributes&&a.mergeAttributes(c);var b=a.nodeName.toLowerCase(),d=c.childNodes;if("object"===b&&!a.childNodes.length)for(b=0;b<d.length;b++)a.appendChild(d[b].cloneNode(!0));else if("input"===b&&("checkbox"===c.type||"radio"===c.type)){if(c.checked&&(a.defaultChecked=a.checked=c.checked),a.value!==c.value)a.value=c.value}else if("option"===b)a.selected=
c.defaultSelected;else if("input"===b||"textarea"===b)a.defaultValue=c.defaultValue,a.value=c.value;a.removeAttribute(e.__EXPANDO)};var m=e._creators,g=e._defaultCreator,i=/<tbody/i;8>l.UA.ieMode&&(m.table=function(c,a){var b=g(c,a);if(i.test(c))return b;var d=b.firstChild,h=l.makeArray(d.childNodes);l.each(h,function(a){"tbody"===e.nodeName(a)&&!a.childNodes.length&&d.removeChild(a)});return b})});
KISSY.add("dom/ie/insertion",["dom/base"],function(l,k){var e=k("dom/base");8>l.UA.ieMode&&(e._fixInsertionChecked=function g(i){for(var c=0;c<i.length;c++){var a=i[c];if(a.nodeType===e.NodeType.DOCUMENT_FRAGMENT_NODE)g(a.childNodes);else if("input"===e.nodeName(a)){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}else if(a.nodeType===e.NodeType.ELEMENT_NODE)for(var a=a.getElementsByTagName("input"),b=0;b<a.length;b++)g(a[b])}})});
KISSY.add("dom/ie/style",["dom/base"],function(l,k){var e=k("dom/base"),m=e._cssProps,g=l.UA,i=l.Env.host.document,i=i&&i.documentElement,c=/^(top|right|bottom|left)$/,a=e._cssHooks,b=/opacity\s*=\s*([^)]*)/,d=/alpha\([^)]*\)/i;m["float"]="styleFloat";a.backgroundPosition={get:function(a,d){return d?a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY:a.style.backgroundPosition}};try{null==i.style.opacity&&(a.opacity={get:function(a,d){return b.test((d&&a.currentStyle?a.currentStyle.filter:
a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":d?"1":""},set:function(a,b){var b=parseFloat(b),c=a.style,h=a.currentStyle,j=isNaN(b)?"":"alpha(opacity="+100*b+")",f=l.trim(h&&h.filter||c.filter||"");c.zoom=1;if((1<=b||!j)&&!l.trim(f.replace(d,"")))if(c.removeAttribute("filter"),!j||h&&!h.filter)return;c.filter=d.test(f)?f.replace(d,j):f+(f?", ":"")+j}})}catch(h){"IE filters ActiveX is disabled. ex = "+h}var g=8===g.ie,j={};j.thin=g?"1px":"2px";j.medium=g?"3px":"4px";j.thick=g?"5px":"6px";l.each(["",
"Top","Left","Right","Bottom"],function(d){var b="border"+d+"Width",c="border"+d+"Style";a[b]={get:function(a,d){var h=d?a.currentStyle:0,o=h&&""+h[b]||void 0;o&&0>o.indexOf("px")&&(o=j[o]&&"none"!==h[c]?j[o]:0);return o}}});e._getComputedStyle=function(a,d){var d=m[d]||d,b=a.currentStyle&&a.currentStyle[d];if(e._RE_NUM_NO_PX.test(b)&&!c.test(d)){var h=a.style,j=h.left,f=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;h.left="fontSize"===d?"1em":b||0;b=h.pixelLeft+"px";h.left=j;a.runtimeStyle.left=
f}return""===b?"auto":b}});
KISSY.add("dom/ie/traversal",["dom/base"],function(l,k){var e=k("dom/base");e._contains=function(c,a){c.nodeType===e.NodeType.DOCUMENT_NODE&&(c=c.documentElement);a=a.parentNode;return c===a?!0:a&&a.nodeType===e.NodeType.ELEMENT_NODE?c.contains&&c.contains(a):!1};var m=document.createElement("div");m.appendChild(document.createComment(""));var g;g=m.getElementsByTagName("*").length?function(c,a){var b=a.getElementsByTagName(c),d="*"===c;if(d||"number"!==typeof b.length){for(var h=[],j=0,o;o=b[j++];)(!d||
1===o.nodeType)&&h.push(o);return h}return b}:function(c,a){return a.getElementsByTagName(c)};e._getElementsByTagName=g;var i=e._getSimpleAttr;e._getElementById=function(c,a){var b=a.getElementById(c);if(b&&i(b,"id")!==c)for(var d=g("*",a),h=0,j=d.length;h<j;h++)if(i(d[h],"id")===c)return d[h];return b}});
KISSY.add("dom/ie/transform",["dom/base"],function(l,k){function e(c){return[[c[0],c[2],c[4]],[c[1],c[3],c[5]],[0,0,1]]}function m(c,a){var b;if(2<arguments.length){var d=c;for(b=1;b<arguments.length;b++)d=m(d,arguments[b]);return d}var d=[],h=c.length,j=a.length,o=a[0].length;for(b=0;b<h;b++)for(var e=0;e<o;e++){for(var g=0,i=0;i<j;i++)g+=c[b][i]*a[i][e];var i=d,l=b,f=e;i[l]||(i[l]=[]);i[l][f]=g}return d}function g(c){return-1<c.indexOf("deg")?parseInt(c,10)*(2*Math.PI/360):parseFloat(c)}var i=/progid:DXImageTransform.Microsoft.Matrix\(([^)]*)\)/;
k("dom/base")._cssHooks.transform={get:function(c,a){var b=c[a?"currentStyle":"style"];if(b&&i.test(b.filter)){var b=RegExp.$1.split(","),d=0,h=0,j=b[4]&&b[4].split("="),e=b[5]&&b[5].split("=");j&&"dx"===j[0].toLowerCase()&&(d=parseFloat(j[1]));e&&"dy"===e[0].toLowerCase()&&(h=parseFloat(e[1]));b=[b[0].split("=")[1],b[2].split("=")[1],b[1].split("=")[1],b[3].split("=")[1],d,h]}else return a?"none":"";return"matrix("+b.join(",")+")"},set:function(c,a){var b=c.style,d,h=c.currentStyle,j,o={width:c.clientWidth,
height:c.clientHeight};j=o.width/2;var k=o.height/2,p=c.style.transformOrigin,p=(p||"50% 50%").split(/\s+/);1===p.length&&(p[1]=p[0]);for(var q=0;q<p.length;q++){var r=parseFloat(p[q]);p[q]=l.endsWith(p[q],"%")?r*o[q?"height":"width"]/100:r}o=p;b.zoom=1;if(a){d=a.split(")");for(var p=l.trim,q=-1,r=d.length-1,f,t,s=e([1,0,0,1,0,0]),n;++q<r;){f=d[q].split("(");t=p(f[0]);f=f[1];n=[1,0,0,1,0,0];switch(t){case "translateX":n[4]=parseInt(f,10);break;case "translateY":n[5]=parseInt(f,10);break;case "translate":f=
f.split(",");n[4]=parseInt(f[0],10);n[5]=parseInt(f[1]||0,10);break;case "rotate":f=g(f);n[0]=Math.cos(f);n[1]=Math.sin(f);n[2]=-Math.sin(f);n[3]=Math.cos(f);break;case "scaleX":n[0]=+f;break;case "scaleY":n[3]=+f;break;case "scale":f=f.split(",");n[0]=+f[0];n[3]=1<f.length?+f[1]:+f[0];break;case "skewX":n[2]=Math.tan(g(f));break;case "skewY":n[1]=Math.tan(g(f));break;case "skew":f=f.split(",");n[2]=Math.tan(g(f[0]));1<f.length&&(n[1]=Math.tan(g(f[1])));break;case "matrix":f=f.split(","),n[0]=+f[0],
n[1]=+f[1],n[2]=+f[2],n[3]=+f[3],n[4]=parseInt(f[4],10),n[5]=parseInt(f[5],10)}s=m(s,e(n))}a=s;d=o[0];o=o[1];d=m([[1,0,d],[0,1,o],[0,0,1]],a,[[1,0,-d],[0,1,-o],[0,0,1]],[[j],[k],[1]]);d.x=d[0][0];d.y=d[1][0];j=["progid:DXImageTransform.Microsoft.Matrix(M11="+a[0][0],"M12="+a[0][1],"M21="+a[1][0],"M22="+a[1][1],"Dx="+a[0][2],"Dy="+a[1][2],'SizingMethod="auto expand"'].join()+")"}else j="";k=h&&h.filter||b.filter||"";if(!j&&!l.trim(k.replace(i,""))&&(b.removeAttribute("filter"),!j||h&&!h.filter))return;
b.filter=i.test(k)?k.replace(i,j):k+(k?", ":"")+j;j?(h=c.offsetHeight/2,b.marginLeft=d.x-c.offsetWidth/2+"px",b.marginTop=d.y-h+"px"):b.marginLeft=b.marginTop=0}}});
KISSY.add("dom/ie/input-selection",["dom/base"],function(l,k){function e(a,b){var d=0,h=0,c=a.ownerDocument.selection.createRange(),e=m(a);e.inRange(c)&&(e.setEndPoint("EndToStart",c),d=i(a,e).length,b&&(h=d+i(a,c).length));return[d,h]}function m(a){if("textarea"===a.type){var b=a.document.body.createTextRange();b.moveToElementText(a);return b}return a.createTextRange()}function g(a,b,d){var h=Math.min(b,d),c=Math.max(b,d);return h===c?0:"textarea"===a.type?(a=a.value.substring(h,c).replace(/\r\n/g,
"\n").length,b>d&&(a=-a),a):d-b}function i(a,b){if("textarea"===a.type){var d=b.text,c=b.duplicate();if(0===c.compareEndPoints("StartToEnd",c))return d;c.moveEnd("character",-1);c.text===d&&(d+="\r\n");return d}return b.text}var c=k("dom/base")._propHooks;c.selectionStart={set:function(a,b){var d=a.ownerDocument.selection.createRange();if(m(a).inRange(d)){var c=e(a,1)[1],j=g(a,b,c);d.collapse(!1);d.moveStart("character",-j);b>c&&d.collapse(!0);d.select()}},get:function(a){return e(a)[0]}};c.selectionEnd=
{set:function(a,b){var d=a.ownerDocument.selection.createRange();if(m(a).inRange(d)){var c=e(a)[0],j=g(a,c,b);d.collapse(!0);d.moveEnd("character",j);c>b&&d.collapse(!1);d.select()}},get:function(a){return e(a,1)[1]}}});
KISSY.add("dom/ie/attr",["dom/base"],function(l,k){function e(a){var b="",j=a.nodeType;if(j===m.NodeType.ELEMENT_NODE)for(a=a.firstChild;a;a=a.nextSibling)b+=e(a);else if(j===c.TEXT_NODE||j===c.CDATA_SECTION_NODE)b+=a.nodeValue;return b}var m=k("dom/base"),g=m._attrHooks,i=m._attrNodeHook,c=m.NodeType,a=m._valHooks,b=m._propFix;8>l.UA.ieMode&&(g.style.set=function(a,b){a.style.cssText=b},l.mix(i,{get:function(a,b){var c=a.getAttributeNode(b);return c&&(c.specified||c.nodeValue)?c.nodeValue:void 0},
set:function(a,b,c){var e=a.getAttributeNode(c),g;if(e)e.nodeValue=b;else try{g=a.ownerDocument.createAttribute(c),g.value=b,a.setAttributeNode(g)}catch(i){return a.setAttribute(c,b,0)}}}),l.mix(m._attrFix,b),g.tabIndex=g.tabindex,l.each("href,src,width,height,colSpan,rowSpan".split(","),function(a){g[a]={get:function(b){b=b.getAttribute(a,2);return b===null?void 0:b}}}),a.button=g.value=i,g.placeholder={get:function(a,b){return a[b]||i.get(a,b)}},a.option={get:function(a){var b=a.attributes.value;
return!b||b.specified?a.value:a.text}});(g.href=g.href||{}).set=function(a,b,e){for(var g=a.childNodes,i,k=g.length,l=k>0,k=k-1;k>=0;k--)g[k].nodeType!==c.TEXT_NODE&&(l=0);if(l){i=a.ownerDocument.createElement("b");i.style.display="none";a.appendChild(i)}a.setAttribute(e,""+b);i&&a.removeChild(i)};m._getText=e;return m});
KISSY.add("dom/ie","./ie/create,./ie/insertion,./ie/style,./ie/traversal,./ie/transform,./ie/input-selection,./ie/attr".split(","),function(l,k){k("./ie/create");k("./ie/insertion");k("./ie/style");k("./ie/traversal");k("./ie/transform");k("./ie/input-selection");return k("./ie/attr")});
KISSY.add("event/dom/shake",["event/dom/base"],function(d,m){function j(a){var b=a.accelerationIncludingGravity,a=b.x,d=b.y,b=b.z,f;void 0!==c&&(f=n(g(a-c),g(d-h),g(b-i)),f>o&&k(),f>p&&(e=1));c=a;h=d;i=b}var l=m("event/dom/base"),q=l.Special,o=5,p=20,e=0,c,h,i,n=Math.max,g=Math.abs,a=d.Env.host,k=d.buffer(function(){e&&(l.fireHandler(a,"shake",{accelerationIncludingGravity:{x:c,y:h,z:i}}),c=void 0,e=0)},250);q.shake={setup:function(){this===a&&a.addEventListener("devicemotion",j,!1)},tearDown:function(){this===
a&&(k.stop(),c=void 0,e=0,a.removeEventListener("devicemotion",j,!1))}}});
KISSY.add("event/dom/ie/change",["event/dom/base","dom"],function(i,d){function e(a){a=a.type;return"checkbox"===a||"radio"===a}function g(a){"checked"===a.originalEvent.propertyName&&(this.__changed=1)}function c(b){this.__changed&&(this.__changed=0,a.fire(this,"change",b))}function h(b){b=b.target;j.test(b.nodeName)&&!b.__changeHandler&&(b.__changeHandler=1,a.on(b,"change",{fn:f,last:1}))}function f(b){if(!b.isPropagationStopped()&&!e(this)){var c;(c=this.parentNode)&&a.fire(c,"change",b)}}var a=
d("event/dom/base"),k=d("dom"),j=/^(?:textarea|input|select)$/i;a.Special.change={setup:function(){if(j.test(this.nodeName))if(e(this))a.on(this,"propertychange",g),a.on(this,"click",c);else return!1;else a.on(this,"beforeactivate",h)},tearDown:function(){if(j.test(this.nodeName))if(e(this))a.remove(this,"propertychange",g),a.remove(this,"click",c);else return!1;else a.remove(this,"beforeactivate",h),i.each(k.query("textarea,input,select",this),function(b){b.__changeHandler&&(b.__changeHandler=0,
a.remove(b,"change",{fn:f,last:1}))})}}});
KISSY.add("event/dom/ie/submit",["event/dom/base","dom"],function(i,d){function e(a){var a=a.target,d=f(a);if((a="input"===d||"button"===d?a.form:null)&&!a.__submitFix)a.__submitFix=1,c.on(a,"submit",{fn:g,last:1})}function g(a){this.parentNode&&!a.isPropagationStopped()&&!a.synthetic&&c.fire(this.parentNode,"submit",a)}var c=d("event/dom/base"),h=d("dom"),f=h.nodeName;c.Special.submit={setup:function(){if("form"===f(this))return!1;c.on(this,"click keypress",e)},tearDown:function(){if("form"===f(this))return!1;
c.remove(this,"click keypress",e);i.each(h.query("form",this),function(a){a.__submitFix&&(a.__submitFix=0,c.remove(a,"submit",{fn:g,last:1}))})}}});KISSY.add("event/dom/ie",["./ie/change","./ie/submit"],function(i,d){d("./ie/change");d("./ie/submit")});
KISSY.add("event/dom/hashchange",["event/dom/base","dom"],function(e,n){var c=n("event/dom/base"),h=n("dom"),d=e.UA,r=c.Special,f=e.Env.host,g=f.document,s=d.ieMode,l="__replace_history_"+e.now(),d=s||d.ie;c.REPLACE_HISTORY=l;var t="<html><head><title>"+(g&&g.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>",i=function(){return"#"+(new e.Uri(location.href)).getFragment()},b,j,m=function(){var a=i(),c;if(c=e.endsWith(a,l))a=a.slice(0,-l.length),location.hash=a;a!==j&&(j=a,o(a,c));
b=setTimeout(m,50)},o=d&&8>d?function(c,b){var d=e.substitute(t,{hash:e.escapeHtml(c),head:h.isCustomDomain()?'<script>document.domain = "'+g.domain+'";<\/script>':""}),k=a.contentWindow.document;try{b?k.open("text/html","replace"):k.open(),k.write(d),k.close()}catch(f){}}:function(){c.fireHandler(f,"hashchange")},p=function(){b||m()},q=function(){b&&clearTimeout(b);b=0},a;d&&8>d&&(p=function(){if(!a){var b=h.getEmptyIframeSrc();a=h.create("<iframe "+(b?'src="'+b+'"':"")+' style="display: none" height="0" width="0" tabindex="-1" title="empty"/>');
h.prepend(a,g.documentElement);c.add(a,"load",function(){c.remove(a,"load");o(i());c.add(a,"load",d);m()});g.onpropertychange=function(){try{"title"===event.propertyName&&(a.contentWindow.document.title=g.title+" - "+i())}catch(c){}};var d=function(){var b=e.trim(a.contentWindow.document.body.innerText),d=i();b!==d&&(j=location.hash=b);c.fireHandler(f,"hashchange")}}},q=function(){b&&clearTimeout(b);b=0;c.detach(a);h.remove(a);a=0});r.hashchange={setup:function(){if(this===f){j=i();p()}},tearDown:function(){this===
f&&q()}}});
KISSY.add("event/dom/focusin",["event/dom/base"],function(d,g){var e=g("event/dom/base"),h=e.Special;d.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(c){function f(a){return e.fire(a.target,c.name)}var b=d.guid("attaches_"+d.now()+"_");h[c.name]={setup:function(){var a=this.ownerDocument||this;b in a||(a[b]=0);a[b]+=1;1===a[b]&&a.addEventListener(c.fix,f,!0)},tearDown:function(){var a=this.ownerDocument||this;a[b]-=1;0===a[b]&&a.removeEventListener(c.fix,f,!0)}}});return e});
KISSY.add("event/dom/touch/handle-map",[],function(){return{}});KISSY.add("event/dom/touch/single-touch",[],function(e){function a(){}a.prototype={constructor:a,requiredTouchCount:1,onTouchStart:function(a){if(a.touches.length!==this.requiredTouchCount)return!1;a=this.lastTouches=a.touches;this.lastXY={pageX:a[0].pageX,pageY:a[0].pageY}},onTouchMove:e.noop,onTouchEnd:e.noop};return a});
KISSY.add("event/dom/touch/tap",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(d){d.preventDefault()}function h(){h.superclass.constructor.apply(this,arguments)}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./single-touch"),k=i.Object;e.extend(h,f,{onTouchMove:function(d){var a=this.lastXY,d=d.changedTouches[0];if(!d||5<Math.abs(d.pageX-a.pageX)||5<Math.abs(d.pageY-a.pageY))return!1},onTouchEnd:function(d){var a=d.changedTouches[0],b=d.target,n=new k({type:"tap",
target:b,currentTarget:b});e.mix(n,{pageX:a.pageX,pageY:a.pageY,originalEvent:d.originalEvent,which:1,touch:a});i.fire(b,"tap",n);if(n.isDefaultPrevented())i.on(b,"click",{fn:c,once:1})}});g.tap={handle:new h};return h});
KISSY.add("event/dom/touch/swipe",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(b,a,f){var g=a.changedTouches[0],q=g.pageX-b.startX,m=g.pageY-b.startY,j=Math.abs(q),r=Math.abs(m);if(f){if(b.isVertical&&b.isHorizontal){if(5>Math.max(j,r))return;r>j?b.isHorizontal=0:b.isVertical=0}}else if(b.isVertical&&r<l&&(b.isVertical=0),b.isHorizontal&&j<l)b.isHorizontal=0;if(b.isHorizontal)q=0>q?"left":"right";else if(b.isVertical)q=0>m?"up":"down",j=r;else return!1;i.fire(a.target,
f?d:k,{originalEvent:a.originalEvent,pageX:g.pageX,pageY:g.pageY,which:1,touch:g,direction:q,distance:j,duration:(a.timeStamp-b.startTime)/1E3})}function h(){}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./single-touch"),k="swipe",d="swiping",l=50;e.extend(h,f,{onTouchStart:function(b){if(!1===h.superclass.onTouchStart.apply(this,arguments))return!1;var a=b.touches[0];this.startTime=b.timeStamp;this.isVertical=this.isHorizontal=1;this.startX=a.pageX;this.startY=a.pageY;-1!==b.type.indexOf("mouse")&&
b.preventDefault()},onTouchMove:function(b){var a=b.changedTouches[0],d=a.pageY-this.startY,a=Math.abs(a.pageX-this.startX),d=Math.abs(d);if(1E3<b.timeStamp-this.startTime)return!1;this.isVertical&&35<a&&(this.isVertical=0);this.isHorizontal&&35<d&&(this.isHorizontal=0);return c(this,b,1)},onTouchEnd:function(a){return!1===this.onTouchMove(a)?!1:c(this,a,0)}});g[k]=g[d]={handle:new h};return h});
KISSY.add("event/dom/touch/double-tap",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(){}var h=a("./handle-map"),g=a("event/dom/base"),i=a("./single-touch");e.extend(c,i,{onTouchStart:function(a){if(!1===c.superclass.onTouchStart.apply(this,arguments))return!1;this.startTime=a.timeStamp;this.singleTapTimer&&(clearTimeout(this.singleTapTimer),this.singleTapTimer=0)},onTouchMove:function(){return!1},onTouchEnd:function(a){var i=this.lastEndTime,d=a.timeStamp,e=a.target,
b=a.changedTouches[0],c=d-this.startTime;this.lastEndTime=d;if(i&&(c=d-i,300>c)){this.lastEndTime=0;g.fire(e,"doubleTap",{touch:b,duration:c/1E3});return}c=d-this.startTime;300<c?g.fire(e,"singleTap",{touch:b,pageX:b.pageX,which:1,pageY:b.pageY,duration:c/1E3}):this.singleTapTimer=setTimeout(function(){g.fire(e,"singleTap",{touch:b,pageX:b.pageX,which:1,pageY:b.pageY,duration:c/1E3})},300)}});h.singleTap=h.doubleTap={handle:new c};return c});
KISSY.add("event/dom/touch/multi-touch",["dom"],function(e,a){function c(){}var h=a("dom");c.prototype={constructor:c,requiredTouchCount:2,onTouchStart:function(a){var i=this.requiredTouchCount,c=a.touches.length;c===i?this.start():c>i&&this.end(a)},onTouchEnd:function(a){this.end(a)},start:function(){this.isTracking||(this.isTracking=!0,this.isStarted=!1)},fireEnd:e.noop,getCommonTarget:function(a){var c=a.touches,a=c[0].target,c=c[1].target;if(a===c||h.contains(a,c))return a;for(;;){if(h.contains(c,
a))return c;c=c.parentNode}"getCommonTarget error!"},end:function(a){this.isTracking&&(this.isTracking=!1,this.isStarted&&(this.isStarted=!1,this.fireEnd(a)))}};return c});
KISSY.add("event/dom/touch/pinch",["./handle-map","event/dom/base","./multi-touch"],function(e,a){function c(){}function h(a){2===a.touches.length&&a.preventDefault()}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./multi-touch");e.extend(c,f,{onTouchMove:function(a){if(this.isTracking){var d=a.touches;if(0<d[0].pageX&&0<d[0].pageY&&0<d[1].pageX&&0<d[1].pageY){var c,b=d[0],f=d[1];c=b.pageX-f.pageX;b=b.pageY-f.pageY;c=Math.sqrt(c*c+b*b);this.lastTouches=d;this.isStarted?i.fire(this.target,"pinch",
e.mix(a,{distance:c,scale:c/this.startDistance})):(this.isStarted=!0,this.startDistance=c,d=this.target=this.getCommonTarget(a),i.fire(d,"pinchStart",e.mix(a,{distance:c,scale:1})))}}},fireEnd:function(a){i.fire(this.target,"pinchEnd",e.mix(a,{touches:this.lastTouches}))}});f=new c;g.pinchStart=g.pinchEnd={handle:f};g.pinch={handle:f,setup:function(){i.on(this,"touchmove",h)},tearDown:function(){i.detach(this,"touchmove",h)}};return c});
KISSY.add("event/dom/touch/tap-hold",["./handle-map","event/dom/base","./single-touch"],function(e,a){function c(){}var h=a("./handle-map"),g=a("event/dom/base"),i=a("./single-touch");e.extend(c,i,{onTouchStart:function(a){if(!1===c.superclass.onTouchStart.call(this,a))return!1;this.timer=setTimeout(function(){var c=a.touches[0];g.fire(a.target,"tapHold",{touch:c,pageX:c.pageX,pageY:c.pageY,which:1,duration:(e.now()-a.timeStamp)/1E3})},1E3)},onTouchMove:function(){clearTimeout(this.timer);return!1},
onTouchEnd:function(){clearTimeout(this.timer)}});h.tapHold={handle:new c};return c});
KISSY.add("event/dom/touch/rotate",["./handle-map","event/dom/base","./multi-touch"],function(e,a){function c(){}function h(a){2===a.touches.length&&a.preventDefault()}var g=a("./handle-map"),i=a("event/dom/base"),f=a("./multi-touch"),k=180/Math.PI;e.extend(c,f,{onTouchMove:function(a){if(this.isTracking){var c=a.touches,b=c[0],f=c[1],g=this.lastAngle,b=Math.atan2(f.pageY-b.pageY,f.pageX-b.pageX)*k;if(void 0!==g){var f=Math.abs(b-g),h=(b+360)%360,q=(b-360)%360;Math.abs(h-g)<f?b=h:Math.abs(q-g)<f&&
(b=q)}this.lastTouches=c;this.lastAngle=b;this.isStarted?i.fire(this.target,"rotate",e.mix(a,{angle:b,rotation:b-this.startAngle})):(this.isStarted=!0,this.startAngle=b,this.target=this.getCommonTarget(a),i.fire(this.target,"rotateStart",e.mix(a,{angle:b,rotation:0})))}},end:function(){this.lastAngle=void 0;c.superclass.end.apply(this,arguments)},fireEnd:function(a){i.fire(this.target,"rotateEnd",e.mix(a,{touches:this.lastTouches}))}});f=new c;g.rotateEnd=g.rotateStart={handle:f};g.rotate={handle:f,
setup:function(){i.on(this,"touchmove",h)},tearDown:function(){i.detach(this,"touchmove",h)}};return c});
KISSY.add("event/dom/touch/handle","dom,./handle-map,event/dom/base,./tap,./swipe,./double-tap,./pinch,./tap-hold,./rotate".split(","),function(e,a){function c(a){return e.startsWith(a,"touch")}function h(a){return e.startsWith(a,"mouse")}function g(a){return e.startsWith(a,"MSPointer")||e.startsWith(a,"pointer")}function i(a){this.doc=a;this.eventHandle={};this.init();this.touches=[];this.inTouch=0}var f=a("dom"),k=a("./handle-map"),d=a("event/dom/base");a("./tap");a("./swipe");a("./double-tap");
a("./pinch");a("./tap-hold");a("./rotate");var l=e.guid("touch-handle"),b=e.Features,n,p,o;if(b.isTouchEventSupported())if(e.UA.ios){o="touchend touchcancel";n="touchstart";p="touchmove"}else{o="touchend touchcancel mouseup";n="touchstart mousedown";p="touchmove mousemove"}else if(b.isPointerSupported()){n="pointerdown";p="pointermove";o="pointerup pointercancel"}else if(b.isMsPointerSupported()){n="MSPointerDown";p="MSPointerMove";o="MSPointerUp MSPointerCancel"}else{n="mousedown";p="mousemove";
o="mouseup"}i.prototype={constructor:i,lastTouches:[],firstTouch:null,init:function(){var a=this.doc;d.on(a,n,this.onTouchStart,this);if(!g(p))d.on(a,p,this.onTouchMove,this);d.on(a,o,this.onTouchEnd,this)},addTouch:function(a){a.identifier=a.pointerId;this.touches.push(a)},removeTouch:function(a){for(var m=0,c=a.pointerId,b=this.touches,d=b.length;m<d;m++){a=b[m];if(a.pointerId===c){b.splice(m,1);break}}},updateTouch:function(a){for(var c=0,j,b=a.pointerId,d=this.touches,e=d.length;c<e;c++){j=d[c];
j.pointerId===b&&(d[c]=a)}},isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(this.firstTouch===null)this.firstTouch=a.identifier},removePrimaryTouch:function(a){if(this.isPrimaryTouch(a))this.firstTouch=null},dupMouse:function(a){var c=this.lastTouches,a=a.changedTouches[0];if(this.isPrimaryTouch(a)){var b={x:a.clientX,y:a.clientY};c.push(b);setTimeout(function(){var a=c.indexOf(b);a>-1&&c.splice(a,1)},2500)}},isEventSimulatedFromTouch:function(a){for(var c=
this.lastTouches,b=a.clientX,a=a.clientY,d=0,e=c.length,f;d<e&&(f=c[d]);d++){var g=Math.abs(b-f.x),h=Math.abs(a-f.y);if(g<=25&&h<=25)return true}return 0},normalize:function(a){var b=a.type,j;if(c(b)){j=b==="touchend"||b==="touchcancel"?a.changedTouches:a.touches;if(j.length===1){a.which=1;a.pageX=j[0].pageX;a.pageY=j[0].pageY}return a}j=this.touches;b=!b.match(/(up|cancel)$/i);a.touches=b?j:[];a.targetTouches=b?j:[];a.changedTouches=j;return a},onTouchStart:function(a){var b,j;j=a.type;var e=this.eventHandle;
if(c(j)){this.setPrimaryTouch(a.changedTouches[0]);this.dupMouse(a)}else if(h(j)){if(this.isEventSimulatedFromTouch(a))return;this.touches=[a.originalEvent]}else if(g(j)){this.addTouch(a.originalEvent);if(this.touches.length===1)d.on(this.doc,p,this.onTouchMove,this)}else throw Error("unrecognized touch event: "+a.type);for(b in e){j=e[b].handle;j.isActive=1}this.callEventHandle("onTouchStart",a)},onTouchMove:function(a){var b=a.type;if(h(b)){if(this.isEventSimulatedFromTouch(b))return;this.touches=
[a.originalEvent]}else if(g(b))this.updateTouch(a.originalEvent);else if(!c(b))throw Error("unrecognized touch event: "+a.type);this.callEventHandle("onTouchMove",a)},onTouchEnd:function(a){var b=this,j=a.type;if(!h(j)||!b.isEventSimulatedFromTouch(a)){b.callEventHandle("onTouchEnd",a);if(c(j)){b.dupMouse(a);e.makeArray(a.changedTouches).forEach(function(a){b.removePrimaryTouch(a)})}else if(h(j))b.touches=[];else if(g(j)){b.removeTouch(a.originalEvent);b.touches.length||d.detach(b.doc,p,b.onTouchMove,
b)}}},callEventHandle:function(a,b){var c=this.eventHandle,d,e,b=this.normalize(b);if(b.changedTouches.length){for(d in c){e=c[d].handle;if(!e.processed){e.processed=1;if(e.isActive&&e[a]&&e[a](b)===false)e.isActive=0}}for(d in c){e=c[d].handle;e.processed=0}}},addEventHandle:function(a){var b=this.eventHandle,c=k[a].handle;b[a]?b[a].count++:b[a]={count:1,handle:c}},removeEventHandle:function(a){var b=this.eventHandle;if(b[a]){b[a].count--;b[a].count||delete b[a]}},destroy:function(){var a=this.doc;
d.detach(a,n,this.onTouchStart,this);d.detach(a,p,this.onTouchMove,this);d.detach(a,o,this.onTouchEnd,this)}};return{addDocumentHandle:function(a,b){var c=f.getDocument(a),d=f.data(c,l);d||f.data(c,l,d=new i(c));b&&d.addEventHandle(b)},removeDocumentHandle:function(a,b){var c=f.getDocument(a),d=f.data(c,l);if(d){b&&d.removeEventHandle(b);if(e.isEmptyObject(d.eventHandle)){d.destroy();f.removeData(c,l)}}}}});
KISSY.add("event/dom/touch",["event/dom/base","./touch/handle-map","./touch/handle"],function(e,a){function c(a){d.addDocumentHandle(this,a);k[a].setup.apply(this,arguments)}function h(a){d.removeDocumentHandle(this,a);k[a].tearDown.apply(this,arguments)}function g(a){d.addDocumentHandle(this,a)}function i(a){d.removeDocumentHandle(this,a)}var f=a("event/dom/base"),k=a("./touch/handle-map"),d=a("./touch/handle"),l=f.Gesture,b=l.start="KSPointerDown",n=l.move="KSPointerMove",p=l.end="KSPointerUp";
l.tap="tap";l.doubleTap="doubleTap";k[b]={handle:{isActive:1,onTouchStart:function(a){f.fire(a.target,b,a)}}};k[n]={handle:{isActive:1,onTouchMove:function(a){f.fire(a.target,n,a)}}};k[p]={handle:{isActive:1,onTouchEnd:function(a){f.fire(a.target,p,a)}}};var l=f.Special,o,q,m;for(q in k)o={},m=k[q],o.setup=m.setup?c:g,o.tearDown=m.tearDown?h:i,m.add&&(o.add=m.add),m.remove&&(o.remove=m.remove),l[q]=o});

var DynamLib=(function(){var A=navigator.userAgent.toLowerCase(),e=navigator.platform.toLowerCase(),x=(e=="win32")||(e=="win64")||(e=="windows"),w=(e=="mac68k")||(e=="macppc")||(e=="macintosh")||(e=="macintel"),h=A.indexOf("msie"),j=A.indexOf("trident"),b=A.indexOf("rv:"),B=A.indexOf("chrome"),t=B!=-1,p=A.indexOf("firefox"),q=p!=-1,y=x&&!q&&!t&&(h!=-1||j!=-1||b!=-1),o="",r="",m="",n=false,z=document.location.protocol,C=(z!=="https:"&&z!=="http:"),s=(z==="https:")?true:false,f=location.hostname,i=location.pathname,l="Resources",d,g=0,v={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]},D=window.document,k=D.getElementsByTagName("head")[0]||D.documentElement,u=D.createElement("script").readyState?function(F,G){var E=F.onreadystatechange;F.onreadystatechange=function(){var H=F.readyState;if(H==="loaded"||H==="complete"){F.onreadystatechange=null;E&&E();G.call(this)}}}:function(E,F){E.addEventListener("load",F,false)},c,a;if(w){}else{if(t||q){if(t){a=A.slice(B+7);a=a.slice(0,a.indexOf(" "));o=a;a=a.slice(0,a.indexOf("."));if(a>=27&&x){n=true}}else{a=A.slice(p+8);a=a.slice(0,a.indexOf(" "));r=a;a=a.slice(0,a.indexOf("."));if(a>=27&&x){n=true}}}else{if(y){if(h!=-1){a=A.slice(h+4);a=a.slice(0,a.indexOf(";"));m=a}else{if(b!=-1){a=A.slice(b+3);a=a.slice(0,a.indexOf(";"));a=a.slice(0,a.indexOf(")"));m=a}else{if(j!=-1){a=A.slice(j+7);a=a.slice(0,a.indexOf(";"));m=a}}}}}}if(f===""){if(x&&i.lastIndexOf("\\")>1){i=i.substring(1,i.lastIndexOf("\\")).replace(/%20/g," ")}else{g=1;i=i.substring(1,i.lastIndexOf("/")).replace(/%20/g," ")}}else{g=1;i=i.substring(0,i.lastIndexOf("/"))}if(C){d=l}else{d=[i,"/",l].join("")}c={product:{name:"Dynamic Web TWAIN",version:"10,0,1,1010",IEVersion:"10,0,0,820",trial:true,ProductKey:"",bChromeEdition:n,ip:"localhost",wsProtocol:"dwt_command",_iImageCaptureDriverType:3,_iBrokerProcessType:1,_strChromeEditionPath:d+"/DynamicWebTWAINHTML5Edition.exe",_strLPKPath:d+"/DynamicWebTwain.lpk",_strPKGPath:d+"/DynamicWebTWAINMacEdition.pkg",_strMSIPath:d+"/DynamicWebTWAINPlugIn.msi",_strCABX86Path:d+"/DynamicWebTWAIN.cab",_strCABX64Path:d+"/DynamicWebTWAINx64.cab",_strMIMETYPE:"Application/DynamicWebTwain-Plugin",_strPROCLASSID:"5220cb21-c88d-11cf-b347-00aa00a28331",_strFULLCLASSID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",_strTRIALCLASSID:"FFC6F181-A5CF-4ec4-A441-093D7134FBF2"},env:{bIE:y,bChrome:t,bFirefox:q,bWin:x,bWin64:(A.indexOf("win64")!=-1||A.indexOf("x64")!=-1),bMac:w,iPluginLength:y?0:navigator.plugins.length,strChromeVersion:t?o:"",strFirefoxVersion:q?r:"",strIEVersion:y?m:"",bFileSystem:C,basePath:i,resourcesPath:d,pathType:g},config:{debug:false,bDiscardBlankImage:false,msg:[],msgPrefix:'<span style="color:#cE5E04"><b>',msgSuffix:"</b></span><br />"},detect:{ssl:s,cTwainIndex:0,arySTwains:[],bFirst:true,bOK:false,bNoControlEvent:false,__dialog:false,detectType:s?1:(z==="http:")?0:-1,tryTimes:0,ports:[{port:18619,ssl:true},{port:5492,ssl:true},{port:6679,ssl:true},{port:8992,ssl:true},{port:18618,ssl:false},{port:5491,ssl:false},{port:6678,ssl:false},{port:8991,ssl:false}],cUrlIndex:0,urls:[],onNotAllowedForChrome:false,onNoControl:false,OnReady:false,OnDetectNext:false,OnCreatWS:false}};c.get=function(E){return document.getElementById(E)};c.log=function(E){if(c.config.debug){console.log(E)}};c.hide=function(F){var E;if(typeof(F)==="string"){E=c.get(F)}else{if(F){E=F}}if(E){E.style.display="none"}};c.show=function(F){var E;if(typeof(F)==="string"){E=c.get(F)}else{if(F){E=F}}if(E){E.style.display=""}};c.toggle=function(F){var E;if(typeof(F)==="string"){E=c.get(F)}else{if(F){E=F}}if(E){if(E.style.display==="none"){E.style.display=""}else{E.style.display="none"}}};c.appendMessage=function(F){if(typeof(F)==="string"){c.config.msg.push(F)}else{if(Object.prototype.toString.call(F)==="[object Array]"){for(var E in F){c.appendMessage(F[E])}}}};c.appendRichMessage=function(E){c.appendMessage([c.config.msgPrefix,E,c.config.msgSuffix])};c.clearMessage=function(){c.config.msg.splice(0)};c.getRealPath=function(E){if(c.env.pathType==1){return c.env.basePath+E}return c.env.basePath+E.replace(new RegExp("/","g"),"\\\\")};c.initGlobalConfig=function(E){var G=c,F=E||{};if(F.basePath){G.env.basePath=F.basePath}if(F.resourcesPath){G.env.resourcesPath=F.resourcesPath;G.product._strChromeEditionPath=F.resourcesPath+"/DynamicWebTWAINHTML5Edition.exe";G.product._strLPKPath=F.resourcesPath+"/DynamicWebTwain.lpk";G.product._strPKGPath=F.resourcesPath+"/DynamicWebTWAINMacEdition.pkg";G.product._strMSIPath=F.resourcesPath+"/DynamicWebTWAINPlugIn.msi";G.product._strCABX86Path=F.resourcesPath+"/DynamicWebTWAIN.cab";G.product._strCABX64Path=F.resourcesPath+"/DynamicWebTWAINx64.cab"}if(F.pathType){G.env.pathType=F.pathType}if(typeof(F.trial)!="undefined"){G.product.trial=F.trial}if(F.productKey){G.product.ProductKey=F.productKey}if(typeof(F.debug)!="undefined"){G.config.debug=F.debug}if(typeof(F.bDiscardBlankImage)!="undefined"){G.config.bDiscardBlankImage=F.bDiscardBlankImage}if(F.msgPrefix){G.config.msgPrefix=F.msgPrefix}if(F.msgSuffix){G.config.msgSuffix=F.msgSuffix}if(F.detectType){G.detect.detectType=F.detectType}if(F.tryTimes){G.detect.tryTimes=F.tryTimes}if(F.onReady){G.detect.OnReady=F.onReady}if(F.onDetectNext){G.detect.OnDetectNext=F.onDetectNext}if(F.onNotAllowedForChrome){G.detect.onNotAllowedForChrome=F.onNotAllowedForChrome}if(F.onNoControl){G.detect.onNoControl=F.onNoControl}if(F.onCreatWS){G.detect.OnCreatWS=F.onCreatWS}};c.getScript=function(F,H){var G=D.createElement("script"),E=[DynamLib.env.resourcesPath,"/",F].join("");G.src=E;G.async=true;G.charset="utf-8";if(typeof(H)=="undefined"){H=function(){}}u(G,H);k.insertBefore(G,k.firstChild);return G},c.getCss=function(F){var G=D.createElement("link"),E=[DynamLib.env.resourcesPath,"/",F].join("");G.href=E;G.rel="stylesheet";k.insertBefore(G,k.firstChild);return G},c.base64={encode:function(K){var G=[],I=0,E=K.length,J,H,F;while(I<E){J=K.charCodeAt(I++)&255;if(I==E){G.push(v.encodeChars.charAt(J>>2));G.push(v.encodeChars.charAt((J&3)<<4));G.push("==");break}H=K.charCodeAt(I++);if(I==E){G.push(v.encodeChars.charAt(J>>2));G.push(v.encodeChars.charAt(((J&3)<<4)|((H&240)>>4)));G.push(v.encodeChars.charAt((H&15)<<2));G.push("=");break}F=K.charCodeAt(I++);G.push(v.encodeChars.charAt(J>>2));G.push(v.encodeChars.charAt(((J&3)<<4)|((H&240)>>4)));G.push(v.encodeChars.charAt(((H&15)<<2)|((F&192)>>6)));G.push(v.encodeChars.charAt(F&63))}return G.join("")},decode:function(L){var H=[],J=0,E=L.length,K,I,G,F;while(J<E){do{K=v.decodeChars[L.charCodeAt(J++)&255]}while(J<E&&K==-1);if(K==-1){break}do{I=v.decodeChars[L.charCodeAt(J++)&255]}while(J<E&&I==-1);if(I==-1){break}H.push(String.fromCharCode((K<<2)|((I&48)>>4)));do{G=L.charCodeAt(J++)&255;if(G==61){return H.join("")}G=v.decodeChars[G]}while(J<E&&G==-1);if(G==-1){break}H.push(String.fromCharCode(((I&15)<<4)|((G&60)>>2)));do{F=L.charCodeAt(J++)&255;if(F==61){return H.join("")}F=v.decodeChars[F]}while(J<E&&F==-1);if(F==-1){break}H.push(String.fromCharCode(((G&3)<<6)|F))}return H.join("")}};c.utf8={fromUTF16:function(H){var F=[],G=0,E=H.length,I;while(G<E){I=H.charCodeAt(G);if((I>=1)&&(I<=127)){F.push(H.charAt(G))}else{if(I>2047){F.push(String.fromCharCode(224|((I>>12)&15)));F.push(String.fromCharCode(128|((I>>6)&63)));F.push(String.fromCharCode(128|((I>>0)&63)))}else{F.push(String.fromCharCode(192|((I>>6)&31)));F.push(String.fromCharCode(128|((I>>0)&63)))}}G++}return F.join("")},toUTF16:function(J){var F=[],H=0,E=J.length,K,I,G;while(H<E){K=J.charCodeAt(H++);switch(K>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:F.push(J.charAt(H-1));break;case 12:case 13:I=J.charCodeAt(H++);F.push(String.fromCharCode(((K&31)<<6)|(I&63)));break;case 14:I=J.charCodeAt(H++);G=J.charCodeAt(H++);F.push(String.fromCharCode(((K&15)<<12)|((I&63)<<6)|((G&63)<<0)));break}}return F.join("")}};c.main=function(F,E){c.initGlobalConfig(E);if(c.product.bChromeEdition){c.getCss("reference/slide.css")}if(c.product.bChromeEdition){c.__chromeEditionMain(F)}else{c.__dwtEditionMain(F)}};return c})();DynamLib.__dwtEditionMain=function(d){var b,c=DynamLib.env.strIEVersion,e,a;if(c===""||c>8){e=true}else{if(c==8){a=true}else{return}}KISSY.use(["io","json","node","overlay","dom","event"],function(i,f,m,h,l,k,j){DynamLib.detect.showMask=function(){if(DynamLib.detect.__dialog){return}var o=[DynamLib.env.resourcesPath,"/reference/loading.gif"].join(""),n=['<img src="',o,'" />'].join("");DynamLib.detect.__dialog=new i.Overlay({width:400,content:n,mask:true,align:{points:["cc","cc"]}});DynamLib.detect.__dialog.show()};DynamLib.detect.hideMask=function(){if(DynamLib.detect.__dialog){DynamLib.detect.__dialog.destroy();DynamLib.detect.__dialog=false}};var g=function(){if(i.isFunction(d)){d()}};if(e){DynamLib.getScript("reference/dynamsoft.nonie.js",g)}else{if(a){DynamLib.getScript("reference/dynamsoft.ie.js",g)}}})};DynamLib.__chromeEditionMain=function(a){DynamLib.log("Run DynamLib.__chromeEditionMain() ...");KISSY.use(["io","json","node","overlay","dom","kg/slide/2.0.2/index","kg/bio/1.1/index"],function(e,c,i,d,h,g,f,b){KISSY.BIO=b;KISSY.Slide=f;DynamLib.detect.showMask=function(){if(DynamLib.detect.__dialog){return}var k=[DynamLib.env.resourcesPath,"/reference/loading.gif"].join(""),j=['<img src="',k,'" />'].join("");DynamLib.detect.__dialog=new e.Overlay({width:400,content:j,mask:true,align:{points:["cc","cc"]}});DynamLib.detect.__dialog.show()};DynamLib.detect.hideMask=function(){if(DynamLib.detect.__dialog){DynamLib.detect.__dialog.destroy();DynamLib.detect.__dialog=false}};DynamLib.getCss("reference/dialog-polyfill.css");DynamLib.getScript("reference/dynamsoft.html5.js",function(){if(e.isFunction(a)){a()}})})};DynamLib.__innerInitEvents=function(b,c){var a=c||{};b.__OnAfterOperate=a.onAfterOperate||"";b.__OnBeforeOperate=a.onBeforeOperate||"";b.__OnOperateStatus=a.onOperateStatus||"";b.__OnBitmapChanged=a.onBitmapChanged||"";b.__OnGetFilePath=a.onGetFilePath||"";b.__OnImageAreaDeSelected=a.onImageAreaDeSelected||"";b.__OnImageAreaSelected=a.onImageAreaSelected||"";b.__OnMouseClick=a.onMouseClick||"";b.__OnMouseDoubleClick=a.onMouseDoubleClick||"";b.__OnMouseMove=a.onMouseMove||"";b.__OnMouseRightClick=a.onMouseRightClick||"";b.__OnPreAllTransfers=a.onPreAllTransfers||"";b.__OnPreTransfer=a.onPreTransfer||"";b.__OnPostLoad=a.onPostLoad||"";b.__OnPostTransfer=a.onPostTransfer||"";b.__OnPostAllTransfers=a.onPostAllTransfers||"";b.__OnSourceUIClose=a.onSourceUIClose||"";b.__OnTopImageInTheViewChanged=a.onTopImageInTheViewChanged||"";b.__OnTransferCancelled=a.onTransferCancelled||"";b.__OnTransferError=a.onTransferError||"";b.__OnInternetTransferPercentage=a.onInternetTransferPercentage||"";b.__OnInternetTransferPercentageEx=a.onInternetTransferPercentageEx||""};
KISSY.add("kg/bio/1.1/type/base",function(c,b){var d="";function a(f){var e=this;a.superclass.constructor.call(e,f)}c.mix(a,{event:{START:"start",STOP:"stop",SUCCESS:"success",ERROR:"error"}});c.extend(a,b,{upload:function(){},stop:function(){},_processResponse:function(h){var f=this,e,g=f.get("filter");c.log("Server output:"+h);if(c.isUndefined(h)||h===""){e={status:1,msg:""}}else{if(c.isString(h)){e={status:0,msg:h}}else{if(c.isObject(h)){if(g!=d){e=g.call(f,h)}e=f._fromUnicode(h)}else{e={status:1,msg:""}}}}return e},_fromUnicode:function(f){if(!c.isObject(f)){return f}e(f);function e(g){c.each(g,function(i,h){if(c.isObject(g[h])){e(g[h])}else{g[h]=c.isString(i)&&c.fromUnicode(i)||i}})}return f}},{ATTRS:{action:{value:d},data:{value:{}},filter:{value:d}}});return a},{requires:["base"]});KISSY.add("kg/bio/1.1/type/ajax",function(c,b,f){var d="",a="[bio-AjaxType]:";function e(h){var g=this;e.superclass.constructor.call(g,h);g._setWithCredentials()}c.mix(e,{event:c.merge(b.event,{PROGRESS:"progress"})});c.extend(e,b,{upload:function(i){var h=this;if(!i){c.log(a+"upload(), fileData parameter invalid! ");return h}var g=h.get("blobSize");if(g>0){h._chunkedUpload(i)}else{h._fullUpload(i)}return h},stop:function(){var g=this,h=g.get("ajax");if(!c.isObject(h)){c.log(a+"stop(), the value of io invalid!");return g}h.abort();g.fire(e.event.STOP);return g},_getFormData:function(h){if(c.isArray(h)){return h}if(c.isObject(h)){var g=[];c.each(h,function(j,i){g.push({name:i,value:j})});return g}return h},_setWithCredentials:function(){var g=this;var i=g.get("CORS");var h=g.get("ajaxConfig");c.mix(h,{xhrFields:{withCredentials:false}});return h},_setFormData:function(){var g=this;try{g.set("formData",new FormData());g._processData()}catch(h){c.log(a+"something error when reset FormData.")}},_resetFormData:function(){var g=this;g.set("formData",new FormData())},_processData:function(){var g=this,h=g.get("data"),i=g.get("formData");c.each(h,function(l,j){i.append(j,l)});g.set("formData",i)},_addFileData:function(i){if(!c.isObject(i)){c.log(a+"_addFileData(), file parameter invalid!");return false}var h=this;var j=h.get("formData");var k=i.name,g=i.remoteFilename;if(!g){g="RemoteFile"}j.append(g,i,k);h.set("formData",j);return j},_chunkedUpload:function(h){if(!c.isObject(h)){return false}var m=this;var l=m.get("ajaxConfig");var i=m.get("action");c.mix(l,{url:i});var o=h.size;var j=0;var g=m.get("blobSize")||o;var k=h.slice||h.webkitSlice||h.mozSlice;function n(){var p=k.call(h,j,j+g,h.type);var r=p.size;m._setContentDisposition(h.name);m._setContentRange(j,r,o);m._setFormData();m._addFileData(p);c.mix(l,{data:m.get("formData")});var q=f(l);q.then(function(t){var s=t[0];j=m._getUploadedBytes(q)||j+r;m.fire(e.event.PROGRESS,{loaded:j,total:o});if(j<o){n()}else{m.fire(e.event.SUCCESS,{result:s})}},function(s){m._errorHandler(s,h)})}n()},_fullUpload:function(i){var g=this;var h=g.get("ajaxConfig");g._setFormData();g._addFileData(i);c.mix(h,{data:g.get("formData"),url:g.get("action"),beforeSend:function(k,m,l){var n=k.getNativeXhr();n.upload.addEventListener("progress",function(o){g.fire(e.event.PROGRESS,o)},false)}});var j=new KISSY.IO(h);j.then(function(l){var k=l[0];k=g._processResponse(k);g.fire(e.event.SUCCESS,{result:k})},function(k){g._errorHandler(k,i)});g.set("ajax",j);return j},_errorHandler:function(k,j){var i=this;var g={};var h=k[1];if(h=="timeout"){g.msg="timeout!";g.status="timeout"}i.fire(e.event.ERROR,{status:h,result:g,file:j})},_getUploadedBytes:function(i){var g=i.getResponseHeader("Range");var j=g&&g.split("-");var h=j&&j.length>1&&parseInt(j[1],10);return h&&h+1},_setContentRange:function(j,m,i){var l="bytes "+j+"-"+(j+m-1)+"/"+i;var g=this;var h=g.get("ajaxConfig");var k=h.headers;k["Content-Range"]=l;return l},_setContentDisposition:function(g){return this._setRequestHeader("Content-Disposition",'attachment; filename="'+encodeURI(g)+'"')},_setRequestHeader:function(i,j){var g=this;var h=g.get("ajaxConfig");h.headers[i]=j;g.set("ajaxConfig",h);return j}},{ATTRS:{formData:{value:d},ajaxConfig:{value:{type:"post",processData:false,cache:false,dataType:"text",async:true,contentType:false,headers:{"X-Requested-With":false}}},ajax:{value:d},fileDataName:{value:d},form:{value:{}},fileInput:{value:d},blobSize:{value:0},CORS:{value:false},isUsePostMessage:{value:false}}});return e},{requires:["./base","io"]});KISSY.add("kg/bio/1.1/queue",function(c,b){var e="",a="[bio-queue]:";function f(g){var h=-1;do{g=g/1024;h++}while(g>99);return Math.max(g,0.1).toFixed(1)+["KB","MB","GB","TB","PB","EB"][h]}function d(h){var g=this;d.superclass.constructor.call(g,h)}c.mix(d,{event:{ADD:"add",ADD_FILES:"addFiles",REMOVE:"remove",CLEAR:"clear",FILE_STATUS:"statusChange",UPDATE_FILE:"updateFile"},status:{WAITING:"waiting",START:"start",PROGRESS:"progress",SUCCESS:"success",CANCEL:"cancel",ERROR:"error",RESTORE:"restore"},FILE_ID_PREFIX:"file-"});c.extend(d,b,{add:function(i,j){var g=this,h={};if(i.length>0){h=[];c.each(i,function(l,k){h.push(g._addFile(l))})}else{h=g._addFile(i)}j&&j.call(g);return h},_addFile:function(k,l){if(!c.isObject(k)){c.log(a+'_addFile() the parameter "file" invalid!');return false}var h=this,j=h._setAddFileData(k),i=h.getFileIndex(j.id),g=h.get("fnAdd");if(c.isFunction(g)){j=g(i,j)}h.fire(d.event.ADD,{index:i,file:j,bio:h.get("bio")});l&&l.call(h,i,j);return j},remove:function(h,k){var g=this,j=g.get("files"),i;if(c.isString(h)){h=g.getFileIndex(h)}i=j[h];if(!c.isObject(i)){c.log(a+'remove() index "'+h+'" exceeds number of files');return false}j=c.filter(j,function(m,l){return l!==h});g.set("files",j);g.fire(d.event.REMOVE,{index:h,file:i});k&&k.call(g,h,i);return i},clear:function(){var g=this,i;function h(){i=g.get("files");if(!i.length){g.fire(d.event.CLEAR);return false}g.remove(0,function(){h()})}h()},fileStatus:function(k,h,j){if(!c.isNumber(k)){return false}var i=this,m=i.getFile(k),n=i.get("theme"),g,l;if(!m){return false}g=m.status;if(!h){return g}if(g==h){return i}i.updateFile(k,{status:h});i.fire(d.event.FILE_STATUS,{index:k,status:h,args:j,file:m});return i},getFile:function(j){var g=this;var h;var i=g.get("files");if(c.isNumber(j)){h=i[j]}else{c.each(i,function(k){if(k.id===j){h=k;return true}})}return h},getFileIndex:function(g){var h=this,j=h.get("files"),i=-1;c.each(j,function(l,k){if(l.id===g){i=k;return true}});return i},updateFile:function(h,k){if(!c.isNumber(h)){return false}if(!c.isObject(k)){c.log(a+'updateFile() the parameter "data" invalid!');return false}var g=this,j=g.get("files"),i=g.getFile(h);if(!i){return false}c.mix(i,k);j[h]=i;g.set("files",j);g.fire(d.event.UPDATE_FILE,{index:h,file:i});return i},getIndexs:function(i){var h=this,j=h.get("files"),g,k=[];if(!j.length){return k}c.each(j,function(m,l){if(c.isObject(m)){g=m.status;if(g==i){k.push(l)}}});return k},getFiles:function(g){var h=this,j=h.get("files"),i=[];if(!j.length){return[]}c.each(j,function(k){if(k&&k.status===g){i.push(k)}});return i},_setAddFileData:function(h){var g=this,i=g.get("files");if(!c.isObject(h)){c.log(a+'_updateFileData() the parameter "file" invalid!');return false}if(!h.id){h.id=c.guid(d.FILE_ID_PREFIX)}if(h.size){h.textSize=f(h.size)}if(!h.status){h.status="waiting"}i.push(h);return h}},{ATTRS:{fnAdd:{value:e},files:{value:[]},bio:{value:e}}});return d},{requires:["base"]});KISSY.add("kg/bio/1.1/base",["base","json","./type/ajax","./queue"],function(e,d){var c="";var b=d("base"),i=d("json"),a=d("./type/ajax");Queue=d("./queue");var g=e.Env.host,h=Array.prototype.slice,j=g.FormData;var f=b.extend({constructor:function(l){var k=this;f.superclass.constructor.call(k,l);k._init()},addBlob:function(m){var l=this;var k=l.get("queue");if(!m.size){m.size=0}if(!m.name){m.name=m.fileName||c}k.add(m);return l},uploadFiles:function(k){var l=this;if(!e.isString(k)){k=f.status.WAITING}l.set("uploadFilesStatus",k);l._uploaderStatusFile(k);return l},upload:function(m){if(!e.isNumber(m)){return false}var l=this,o=l.get("uploadType"),k=l.get("queue"),n=k.get("files")[m];if(!e.isObject(n)){e.log(LOG_PREFIX+" the file index in queue: "+m+"");return false}if(l.get("curUploadIndex")!=c){e.log("uploading index ..."+l.get("curUploadIndex")+", cannot operate before upload complete!");return false}if(n.status==="error"){return false}if(!l.get("isAllowUpload")){return false}l.set("curUploadIndex",m);l.fire(f.event.START,{index:m,file:n});k.fileStatus(m,f.status.START);o.upload(n)},abort:function(){var l=this,m=l.get("uploadType"),k=l.get("queue");m.stop();return true},isSupportAjax:function(){var k=false;try{if(j){k=true}}catch(l){k=false}return k},_init:function(){var k=this;k._renderQueue();k._renderUploaderCore();return k},_renderQueue:function(){var l=this,k=new Queue();k.set("bio",l);k.on("add",function(m){l.fire(f.event.ADD,m)});k.on("remove",function(m){l.fire(f.event.REMOVE,m)});l.set("queue",k);return k},_renderUploaderCore:function(){var l=this,k=l._getUploadType();if(!k){return false}var n={action:l.get("action"),data:l.get("data"),dataType:"json"};n.CORS=l.get("CORS");var m=new k(n);var o=k.event;m.on(o.SUCCESS,l._uploadCompleteHandler,l);m.on(o.ERROR,l._uploadCompleteHandler,l);if(o.PROGRESS){m.on(o.PROGRESS,l._uploadProgressHandler,l)}m.on(o.STOP,l._uploadStopHanlder,l);l.set("uploadType",m);return m},_uploadProgressHandler:function(o){var l=this,k=l.get("queue"),m=l.get("curUploadIndex"),n=k.getFile(m);e.mix(o,{file:n});k.fileStatus(m,f.status.PROGRESS,o);l.fire(f.event.PROGRESS,o)},_uploadStopHanlder:function(){var l=this,k=l.get("queue"),m=l.get("curUploadIndex");k.fileStatus(m,f.status.CANCEL);l.set("curUploadIndex",c);l.fire(f.event.CANCEL,{index:m})},_getUploadType:function(){var k=this;return k.isSupportAjax()&&a||false},_uploadCompleteHandler:function(q){var n=this,l=q.result,m,p=f.event,k=n.get("queue"),o=n.get("curUploadIndex");if(!e.isObject(l)){return false}k.updateFile(o,{result:l});m=Number(l.status);if(m===1){k.fileStatus(o,f.status.SUCCESS);n.fire(p.SUCCESS,{index:o,file:k.getFile(o),result:l})}else{var r=l.msg||c;if(q.status==="abort"){r="Canceled"}l.msg=r;k.fileStatus(o,f.status.ERROR,{msg:r,result:l});n.fire(p.ERROR,{msg:r,status:m,result:l,index:o,file:k.getFile(o)})}n.set("curUploadIndex",c);n.fire(p.COMPLETE,{index:o,file:k.getFile(o),result:l});n._continueUpload()},_continueUpload:function(){var k=this,l=k.get("uploadFilesStatus");if(l!=c){k._uploaderStatusFile(l)}},_uploaderStatusFile:function(m){var n=this,l=n.get("queue"),k=l.getIndexs(m);if(!k.length){n.set("uploadFilesStatus",c);n.fire(f.event.UPLOAD_FILES);return false}n.upload(k[0]);return n}},{ATTRS:{action:{value:c},timeout:{value:0},CORS:{value:false},filesStatus:{value:c},curUploadIndex:{value:c},curFile:{value:c},uploadType:{value:{}},data:{value:{}},queue:{value:{}},isAllowUpload:{value:true}}},"bio");e.mix(f,{event:{ADD:"add",START:"start",PROGRESS:"progress",COMPLETE:"complete",SUCCESS:"success",UPLOAD_FILES:"uploadFiles",CANCEL:"cancel",ERROR:"error",REMOVE:"remove"},status:{WAITING:"waiting",START:"start",PROGRESS:"progress",SUCCESS:"success",CANCEL:"cancel",ERROR:"error"}});return f});KISSY.add("kg/bio/1.1/index",function(b,a){return a},{requires:["./base"]});KISSY.add("kg/slide/2.0.2/lib/slide-util",function(a){a.mix(a,{setHash:function(d,e){var b;var c;if(typeof d=="object"){b=window.location.href;e=d}else{b=d}if(b.indexOf("#")<0){b+="#"}var f=this.getHash(b);for(c in e){f[c]=e[c]}b=b.split("#")[0]+"#";for(c in f){b+=c+"="+f[c]+"&"}b=b.substr(0,b.length-1);return b},getHash:function(c){var b=c||window.location.href;if(b.indexOf("#")<0){return{}}else{var d=b.split("#")[1];if(d===""){return{}}if(d[d.length-1]=="&"){d=d.substr(0,d.length-1)}d=d.replace(/"/ig,"'");d=d.replace(/=/ig,'":"');d=d.replace(/&/ig,'","');d+='"';d='{"'+d+"}";var e=a.JSON.parse(d);return e}},_globalEval:function(d){if(d&&/\S/.test(d)){var c=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],b=document.createElement("script");b.text=d;c.insertBefore(b,c.firstChild);setTimeout(function(){c.removeChild(b)},1)}},execScript:function(e){var m=this;var c=new RegExp(/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/ig);var d=a.one("head")[0],f,j,i,g,l,n,k,h=/\ssrc=(['"])(.*?)\1/i,b=/\scharset=(['"])(.*?)\1/i;c.lastIndex=0;while((f=c.exec(e))){j=f[1];i=j?j.match(h):false;if(i&&i[2]){n=document.createElement("script");n.src=i[2];if((g=j.match(b))&&g[2]){n.charset=g[2]}n.async=true;d.appendChild(n)}else{if((k=f[2])&&k.length>0){m._globalEval(k)}}}},isDaily:function(){var b=this;if(/daily\.taobao\.net/.test(window.location.hostname)){return true}else{return false}},getHiddenProp:function(){if("hidden" in document){return"hidden"}var c=["webkit","moz","ms","o"];for(var b=0;b<c.length;b++){if((c[b]+"Hidden") in document){return c[b]+"Hidden"}}return null},isHidden:function(){var b=this.getHiddenProp();if(!b){return false}return document[b]}})},{requires:["node","json","event"]});KISSY.add("kg/slide/2.0.2/lib/kissy2yui",function(b){var a=b.config("mini")?b.Node.node:b.Node;b.augment(a,{_delegate:function(){var c=this;if(b.isFunction(arguments[1])){c.delegate(arguments[0],arguments[2],arguments[1])}else{c.delegate.apply(c,arguments)}return c},indexOf:function(e){var c=this;if(b.isUndefined(e)){return null}if(e[0]){e=e[0]}var d=0;c.each(function(g,f){if(g[0]===e){d=f}});return d},size:function(){return this.length},set:function(d,c){if(d==="innerHTML"){this.html(c)}else{this.attr(d,c)}return this},get:function(d){var c=this;var e={innerHTML:function(){return c.html()},region:function(){return{height:c.height(),width:c.width()}}};if(d in e){return e[d]()}},appendChild:function(){this.append.apply(this,arguments);return this},setStyle:function(d,c){this.css.apply(this,arguments);return this},setStyles:function(c){this.css.apply(this,arguments);return this},cloneNode:function(){return this.clone.apply(this,arguments)}});b.Node.create=function(c){return b.Node(c)}},{requires:["node","event"]});KISSY.add("kg/slide/2.0.2/lib/base",function(a){var c=a.Node.all;var b=function(){if(!(this instanceof b)){throw new Error('please use "new Slide()"')}this.init.apply(this,arguments)};b.plug=function(e){var d=this};a.augment(b,a.Event.Target,{init:function(d,f){var e=this;if(a.isObject(d)){e.con=d}else{if(/^#/i.test(d)){e.con=a.one(d)}else{if(a.one("#"+d)){e.con=a.one("#"+d)}else{if(a.one(d)){e.con=a.one(d)}else{throw new Error("Slide Container Hooker not found")}}}}e.buildParam(f);e.buildHTML();e.bindEvent();e.fire("ready",{index:0,navnode:e.tabs.item(0),pannelnode:e.pannels.item(0)});if(e.reverse){var h;h=e.previous;e.previous=e.next;e.next=h}if(e.carousel){for(var g=0;g<e.colspan;g++){e.fix_for_transition_when_carousel(g*2)}}e.fixSlideSize();if(e.layerSlide){e.initLayer()}e.stoped=null;e.renderPannelTextarea(e.currentTab);return this},setWrapperSize:function(f){var e=this;if(a.isUndefined(f)){f=0}e.pannels=e.con.all("."+e.contentClass+" ."+e.pannelClass);e.length=e.pannels.length;var d={none:function(){},vSlide:function(){var g=e.animcon.get("region");e.animwrap.setStyles({height:(e.length+f)*g.height/(e.colspan*e.vCount)+"px",width:g.width/(e.vCount)+"px"})},hSlide:function(){var g=e.animcon.get("region");e.animwrap.setStyles({width:(e.length+f)*g.width/(e.colspan*e.vCount)+"px",height:g.height/(e.vCount)+"px"})},fade:function(){}};d[e.effect]();if(!a.isUndefined(f)){e.relocateCurrentTab()}return this},add:function(f,e){var d=this;if(a.isUndefined(e)||e>d.length){e=d.length}if(a.isString(f)){f=a.one(f)}if(d.transitions){f.css({visibility:"hidden"})}if(d.length===0){d.animwrap.append(f);d.currentTab=-1}else{if(e==d.length){setTimeout(function(){d.setWrapperSize(1)},0);f.insertAfter(d.pannels[e-1])}else{f.insertBefore(d.pannels[e])}}d.setWrapperSize();d.fixSlideSize(d.currentTab);if(d.transitions){f.css({visibility:""})}return this},getPannel:function(e){var d=this;if(e<d.length&&e>=0){return a.one(d.pannels[e])}return false},getPannelById:function(f){var d=this,e=d.getIndexById(f);return d.getPannel(e)},getIndexById:function(g){var d=this,f,e=-1;for(f=0;f<d.length;f++){if(d.pannels[f].data===g){e=f;break}}return e},removeById:function(f){var d=this,e=d.getIndexById(f);return d.remove(e)},remove:function(e){var d=this;if(e<0||d.length===0){return d}if(d.length===1){return clear()}if(e<=d.currentTab){d.currentTab--;d.length--}if(d.transitions){d.con.css({display:"none"})}a.one(d.pannels[e]).remove();d.setWrapperSize();if(d.transitions){d.con.css({display:"block"})}if(d.currentTab>=0){d.fixSlideSize(d.currentTab)}return d},clear:function(){var d=this;if(d.length===0){return d}if(d.transitions){d.con.css({display:"none"})}for(var e=d.length-1;e>=0;e--){a.one(d.pannels[e]).remove()}d.currentTab=-1;d.length=0;d.setWrapperSize();if(d.transitions){d.con.css({display:"block"})}if(d.currentTab>=0){d.fixSlideSize(d.currentTab)}return d},refresh:function(){var d=this,e=d.currentTab,f;if(d.length===0||a.isUndefined(e)){return d}if(e>=d.length||e<0){d.currentTab=e=0}f=d.getPannel(e);if(!f){return d}if(d.transitions){d.con.css({visibility:"hidden"})}d.fire("switch",{index:e,navnode:d.tabs.item(e),pannelnode:d.pannels.item(e)});d.relocateCurrentTab(e);d.setWrapperSize();d.fixSlideSize(e);if(d.transitions){d.con.css({visibility:""})}return d},removeLast:function(){var d=this;d.remove(d.length-1);return d},renderLazyData:function(d){var e=this;d.setStyle("display","none");if(d.attr("lazy-data")=="1"){return}d.attr("lazy-data","1");if(a.isUndefined(g)){var h=String(a.now())}else{var h=a.stamp(g)}var f=d.get("innerHTML").replace(/&lt;/ig,"<").replace(/&gt;/ig,">"),g=a.Node.create("<div>"+f+"</div>");a.one(g).insertBefore(d);a.execScript(f)},renderPannelTextarea:function(f){var e=this;if(!e.pannels.item(f)){return}var d=function(i){var h=a.one(e.pannels.item(i));var j=e.pannels.item(i).all(".data-lazyload");if(j){j.each(function(l,k){e.renderLazyData(l)})}};for(var g=0;g<e.colspan;g++){d(f+g)}},buildWrap:function(){var d=this;d.animwrap=a.Node.create('<div style="position:absolute;"></div>');d.animcon.children().appendTo(d.animwrap);d.animcon.empty().appendChild(d.animwrap);d.pannels=d.con.all("."+d.contentClass+" ."+d.pannelClass);return d},doEffectInit:function(){var d=this;var e={none:function(){d.pannels=d.con.all("."+d.contentClass+" ."+d.pannelClass);d.pannels.setStyles({display:"none"});d.pannels.item(d.defaultTab).setStyles({display:"block"})},vSlide:function(){d.buildWrap();var f=d.animcon.get("region");d.pannels.setStyles({"float":"none",overflow:"hidden"});d.animwrap.setStyles({height:d.length*f.height/d.colspan+"px",overflow:"hidden",top:-1*d.defaultTab*f.height+"px"})},hSlide:function(){d.buildWrap();var f=d.animcon.get("region");d.pannels.setStyles({"float":"left",overflow:"hidden"});if(d.transitions){d.animwrap.setStyles({overflow:"hidden",width:d.length*f.width/d.colspan+"px",height:"100%","-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+(-1*d.defaultTab*f.width)+"px,0,0)"})}else{d.animwrap.setStyles({width:d.length*f.width/d.colspan+"px",overflow:"hidden",left:-1*d.defaultTab*f.width+"px"})}},fade:function(){d.pannels=d.con.all("."+d.contentClass+" ."+d.pannelClass);d.pannels.setStyles({position:"absolute",zIndex:0});d.pannels.each(function(g,f){if(f==d.defaultTab){g.setStyles({opacity:1,display:"block"})}else{g.setStyles({opacity:0,display:"none"})}})}};e[d.effect]();return this},buildHTML:function(){var f=this;var d=f.con;f.tabs=d.all("."+f.navClass+" "+f.triggerSelector);var j=d.all("."+f.contentClass+" ."+f.pannelClass);f.length=j.size();if(!d.one("."+f.navClass)){a.Node('<ul class="'+f.navClass+'" style="display:none"></ul>').appendTo(f.con)}if(f.tabs.size()===0){var h=d.all("."+f.navClass);var e="";for(var g=0;g<f.length;g++){var k="";if(g===0){k=f.selectedClass}e+='<li class="'+k+'"><a href="javascript:void(0);">'+(g+1)+"</a></li>"}h.set("innerHTML",e)}f.tabs=d.all("."+f.navClass+" "+f.triggerSelector);f.animcon=d.one("."+f.contentClass);f.animwrap=null;f.doEffectInit();if(f.carousel){f.fixSlideSize(f.currentTab-f.colspan);f.highlightNav(f.currentTab-f.colspan)}else{f.fixSlideSize(f.currentTab);f.highlightNav(f.getWrappedIndex(f.currentTab))}if(f.autoSlide===true){if((f.invisibleStop&&f.isSlideVisible())||!f.invisibleStop){f.play()}}return this},getCurrentPannel:function(){var d=this;return a.one(d.pannels[d.currentTab])},renderWidth:function(){var d=this;var e=d.animcon.get("region").width;if(d.effect=="hSlide"){e/=d.colspan}d.pannels.setStyles({width:e+"px"});return this},renderHeight:function(){var e=this;var d=e.animcon.get("region").height;if(e.effect=="vSlide"){d/=e.colspan}e.pannels.setStyles({height:d+"px"});return this},relocateCurrentTab:function(e){var d=this;if(a.isUndefined(e)){e=d.currentTab}if(d.effect!="hSlide"){return}if(d.transitions){d.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+(-1*e*d.animcon.get("region").width/d.colspan)+"px,0,0)","-webkit-backface-visibility":"hidden"})}else{d.animwrap.setStyles({left:-1*e*d.animcon.get("region").width/d.colspan})}d.currentTab=e;return this},fixSlideSize:function(e){var d=this;if(d.adaptive_fixed_width){d.renderWidth()}if(d.adaptive_fixed_height){d.renderHeight()}if(d.adaptive_fixed_size){d.renderHeight().renderWidth()}if(e>=0){d.resetSlideSize(e)}return this},removeHeightTimmer:function(){var d=this;if(!a.isNull(d.heightTimmer)){clearInterval(d.heightTimmer);d.heightTimmer=null}},addHeightTimmer:function(){var e=this;if(!a.isNull(e.heightTimmer)){clearInterval(e.heightTimmer);e.heightTimmer=null}var d=function(){if(e.effect=="hSlide"){e.animcon.setStyles({height:e.pannels.item(e.currentTab).get("region").height+"px"})}};e.heightTimmer=setInterval(d,100);d()},resetSlideSize:function(f){var e=this;var g,d;if(typeof f=="undefined"||f===null){f=e.currentTab}if(e.effect!="hSlide"&&e.effect!="vSlide"){return}if(e.effect=="hSlide"){g=e.adaptive_width?e.adaptive_width():e.animcon.get("region").width;d=e.pannels.item(f).get("region").height;e.animwrap.setStyles({width:e.pannels.size()*g+"px"});g/=e.colspan;e.pannels.setStyles({width:g+"px",display:"block"});e.animcon.setStyles({width:g*e.colspan+"px",overflow:"hidden"});if(e.animWrapperAutoHeightSetting){e.animcon.setStyles({height:d+"px"})}}if(e.effect=="vSlide"){g=e.pannels.item(f).get("region").width;d=e.adaptive_height?e.adaptive_height():e.animcon.get("region").height;e.animwrap.setStyles({height:e.pannels.size()*d+"px"});d/=e.colspan;e.pannels.setStyles({height:d*e.colspan+"px",display:"block"});e.animcon.setStyles({height:d*e.colspan+"px",overflow:"hidden"});if(e.animWrapperAutoHeightSetting){e.animcon.setStyles({width:g+"px"})}}return this},getWrappedIndex:function(f){var d=this,e=0;if(f===0){}if(d.carousel){if(f<d.colspan){e=d.length-d.colspan*3+f}else{if(f>=d.length-d.colspan){e=f-(d.length-d.colspan)}else{e=f-d.colspan}}}else{e=f}return e},getMousePosition:function(){var d=this;var e=function(f){d._t_mouseX=f.clientX;d._t_mouseY=f.clientY};a.one(document).on("mousemove",e);setTimeout(function(){a.one(window).detach("mouseover",e)},d.triggerDelay)},massTrigger:function(d,f){var e=this;if(!a.inArray(e.eventType,["mouseover","mouseenter"])){d(a.one(f));return}e.getMousePosition();if(a.isUndefined(e._fired)||a.isNull(e._fired)){e._fired=setTimeout(function(){if(e.inRegion([e._t_mouseX+a.one(window).scrollLeft(),e._t_mouseY+a.one(window).scrollTop()],a.one(f))){d(a.one(f))}e._fired=null},e.triggerDelay)}else{clearTimeout(e._fired);e._fired=setTimeout(function(){if(e.inRegion([e._t_mouseX+a.one(window).scrollLeft(),e._t_mouseY+a.one(window).scrollTop()],a.one(f))){d(a.one(f))}e._fired=null},e.triggerDelay)}},getMaxAnimDelay:function(f){var e=this,d=0;if(!e.sublayers){return}a.each(e.sublayers[f],function(g){if(g.durationout+g.delayout>d){d=g.durationout+g.delayout}});return d},inRegion:function(d,e){var g=e.offset();var f={width:e.width(),height:e.height()};if(d[0]>=g.left&&d[0]<=g.left+f.width){if(d[1]>=g.top&&d[1]<=g.top+f.height){return true}}return false},bindEvent:function(){var f=this;if(a.inArray(f.eventType,["click","mouseover","mouseenter"])){f.con._delegate(f.eventType,function(h){h.preventDefault();f.massTrigger(function(j){var i=Number(f.tabs.indexOf(j));if(f.carousel){i=(i+1)%f.length}f.go(i);if(f.autoSlide&&f.stoped===false){f.stop().play()}},h.currentTarget)},"."+f.navClass+" "+f.triggerSelector)}if(f.hoverStop){f.con._delegate("mouseover",function(i){f.isMouseover=true;if(f.autoSlide){var h=f.stoped;f.stop();f.stoped=h}},"."+f.contentClass+" ."+f.pannelClass);f.con._delegate("mouseout",function(h){f.isMouseover=false;if(f.autoSlide&&f.stoped===false){f.play()}},"."+f.contentClass+" ."+f.pannelClass)}a.one(window).on("resize",function(h){f.fixSlideSize(f.currentTab);f.relocateCurrentTab()});f.on("beforeSwitch",function(h){if(typeof f.before_switch=="function"){f._executeSwitch=f.before_switch();return f._executeSwitch}else{if(typeof f.before_switch=="boolean"){f._executeSwitch=f.before_switch;return f.before_switch}else{f._executeSwitch=true;return true}}});if(true){if(!f.touchmove){return this}f.con._delegate("touchstart",function(h){f.stop();f.touching=true;if(f.is_last()&&f.carousel){f.fix_next_carousel()}if(f.is_first()&&f.carousel){f.fix_pre_carousel()}f.startX=h.changedTouches[0].clientX;f.startY=h.changedTouches[0].clientY;f.animwrap.setStyles({"-webkit-transition-duration":"0s"});f.startT=Number(new Date())},"."+f.contentClass);f.con._delegate("touchend",function(n){f.touching=false;var l=n.changedTouches[0].clientX;var i=Number(f.animcon.get("region").width);f.deltaX=Math.abs(l-f.startX);var k=(Math.abs(l)<Math.abs(f.startX));var m=!k;var h=f.carousel?false:(f.is_last()&&k||f.is_first()&&m);var j=function(){f.animwrap.setStyles({"-webkit-transition-duration":(Number(f.speed)/2)+"s","-webkit-transform":"translate3d("+(-1*f.currentTab*f.animcon.get("region").width/f.colspan)+"px,0,0)"})};var o=function(){var q=f.animcon.get("region").width/f.colspan;var p=parseInt((f.deltaX-q/2)/q,10);if(k){if(p>=1&&f.length>2){f.currentTab+=p+1;if(f.currentTab>=(f.length-f.colspan)){f.currentTab=f.length-f.colspan-1}}f.next()}else{if(p>=1&&f.length>2){f.currentTab+=-1*p-1;if(f.currentTab<=0){f.currentTab=1}}f.previous()}};if(f.touchmove&&f.deltaX<30){j();return}if(!h&&((f.touchmove&&(f.deltaX>i/3))||(!f.touchmove&&f.carousel)||(!f.carousel&&f.touchmove&&f.effect=="hSlide")||(!f.touchmove&&!f.carousel)||(Number(new Date())-f.startT<550))){o()}else{j()}if(f.autoSlide&&f.stoped===false){f.play()}},"."+f.contentClass);if(f.touchmove){f.con._delegate("touchmove",function(k){if(k.touches.length>1){return}f.deltaX=k.touches[0].clientX-f.startX;var h=(f.is_last()&&f.deltaX<0||f.is_first()&&f.deltaX>0);if(!f.carousel&&f.effect=="hSlide"&&h){f.deltaX=f.deltaX/3}f.isScrolling=(Math.abs(f.deltaX)<Math.abs(k.touches[0].clientY-f.startY))?true:false;if(!f.isScrolling){k.preventDefault();f.stop();var i=Number(f.animcon.get("region").width/f.colspan);var j=f.deltaX-f.currentTab*i;f.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+j+"px,0,0)"})}},"."+f.contentClass);if(f.animwrap){f.animwrap.on("webkitTransitionEnd",function(){})}}}if(f.invisibleStop){var g=a.getHiddenProp();if(g){var e=g.replace(/[H|h]idden/,"")+"visibilitychange",d;a.one(document).on(e,function(h){if(a.isHidden()){if(f.timer){d=true;f.stop()}else{d=false}}else{if(f.isSlideVisible()&&d){f.play()}}})}a.one(window).on("scroll resize",function(h){if(f.isSlideVisible()){if(!f.timer&&(!f.hoverStop||(f.hoverStop&&!f.isMouseover))){f.play()}}else{if(f.timer){f.stop()}}})}return this},isSlideVisible:function(){var d=this,g=d.animcon.offset().left,i=d.animcon.offset().top,j=d.animcon.width(),e=d.animcon.height(),f=a.one(window).scrollTop(),h=a.one(window).scrollLeft();if(f>i+e||f+a.one(window).height()<i||h>g+j||h+a.one(window).width()<g){return false}else{return true}},initLayer:function(){var d=this;if("ontouchstart" in document.documentElement){return}if(a.UA.ie>0&&a.UA.ie<9){return}var f=["durationin","easingin","durationout","easingout","delayin","delayout","slideindirection","slideoutdirection","offsetin","offsetout","alpha","easeInStrong","easeOutStrong","easeBothStrong","easeNone","easeIn","easeOut","easeBoth","elasticIn","elasticOut","elasticBoth","backIn","backOut","backBoth","bounceIn","bounceOut","bounceBoth","left","top","right","bottom"];var e={durationin:1000,easingin:"easeIn",durationout:1000,easingout:"easeOut",delayin:300,delayout:300,slideindirection:"right",slideoutdirection:"left",alpha:true,offsetin:50,offsetout:50};var g=function(j){var k=this;var l=[];var i=j.attr("rel").replace(/"'/ig,"").replace(new RegExp("("+f.join("|")+")","ig"),'"$1"');var m=a.JSON.parse("{"+i+"}");function h(p,o){var n=m[o];k[o]=(n===undefined||n===null)?p:n}a.each(e,h);this.el=j;this.left=Number(j.css("left").replace("px",""));this.top=Number(j.css("top").replace("px",""));this.animIn=function(){var o=this;var n=o.offsetin;var q=o.slideindirection;var p={left:function(){o.el.css({left:o.left-n})},top:function(){o.el.css({top:o.top-n})},right:function(){o.el.css({left:o.left+n})},bottom:function(){o.el.css({top:o.top+n})}};p[q]();setTimeout(function(){var r={left:{left:o.left},top:{top:o.top},bottom:{top:o.top},right:{left:o.left}};var s={};a.mix(s,r[q]);if(o.alpha){a.mix(s,{opacity:1})}a.one(o.el).animate(s,o.durationout/1000,o.easingin,function(){})},o.delayin);if(o.alpha){o.el.css({opacity:0})}};this.animOut=function(){var p=this;var n=p.offsetout;var o=p.slideoutdirection;var q={left:function(){p.el.css({left:p.left})},top:function(){p.el.css({top:p.top})},right:function(){p.el.css({left:p.left})},bottom:function(){p.el.css({top:p.top})}};q[o]();setTimeout(function(){var r={left:{left:p.left+n},top:{top:p.top+n},bottom:{top:p.top-n},right:{left:p.left-n}};var s={};a.mix(s,r[o]);if(p.alpha){a.mix(s,{opacity:0})}a.one(p.el).animate(s,p.durationout/1000,p.easingout,function(){})},p.delayout);if(p.alpha){p.el.css({opacity:1})}}};d.sublayers=[];d.pannels.each(function(i,h){if(d.effect=="vSlide"||d.effect=="hSlide"){i.css({position:"relative"})}if(i.all('[alt="sublayer"]').length===0){d.sublayers[h]=[];return}if(d.sublayers[h]===undefined){d.sublayers[h]=[]}i.all('[alt="sublayer"]').each(function(l,k){d.sublayers[h].push(new g(l))})});d.on("beforeSwitch",function(h){if(h.index===d.currentTab){return false}d.subLayerRunin(h.index)});d.on("beforeTailSwitch",function(h){d.subLayerRunout(h.index);return d.getMaxAnimDelay(h.index)})},subLayerRunin:function(f){var e=this;var d=e.sublayers[f];a.each(d,function(h,g){h.animIn()})},subLayerRunout:function(f){var e=this;var d=e.sublayers[f];a.each(d,function(h,g){h.animOut()})},buildParam:function(f){var e=this;if(f===undefined||f===null){f={}}function d(i,h){var g=f[h];e[h]=(g===undefined||g===null)?i:g}a.each({autoSlide:false,speed:50,timeout:3000,effect:"none",eventType:"click",easing:"easeBoth",hoverStop:false,invisibleStop:false,selectedClass:"selected",conClass:"t-slide",navClass:"tab-nav",triggerSelector:"li",contentClass:"tab-content",pannelClass:"tab-pannel",before_switch:false,carousel:false,reverse:false,touchmove:true,adaptive_fixed_width:false,adaptive_fixed_height:false,adaptive_fixed_size:false,adaptive_width:false,adaptive_height:false,defaultTab:0,layerSlide:false,layerClass:"tab-animlayer",colspan:1,animWrapperAutoHeightSetting:true,webkitOptimize:true,triggerDelay:300,autoActived:true,hCount:1,vCount:1},d);a.mix(e,{tabs:[],animcon:null,pannels:[],timmer:null,touching:false});e.speed=e.speed/1000;if(e.defaultTab!==0){e.defaultTab=Number(e.defaultTab)-1}if(e.carousel){e.defaultTab=0;e.defaultTab=e.colspan+(e.defaultTab);e.effect="hSlide"}e.currentTab=-1;e.transitions=("webkitTransition" in document.body.style&&e.webkitOptimize);return e},fix_for_transition_when_carousel:function(h){var g=this;if(typeof h=="undefined"){h=0}var e=g.con;g.animcon=g.con.one("."+g.contentClass);g.animwrap=g.animcon.one("div");g.pannels=e.all("."+g.contentClass+" ."+g.pannelClass);if(g.effect=="hSlide"){var i=Number(g.animcon.get("region").width/g.colspan);var d=Number(g.animcon.get("region").height);g.animwrap.setStyle("width",g.pannels.size()*i+2*i);var k=g.pannels.item(h).cloneNode(true);var j=g.pannels.item(g.pannels.size()-1-h).cloneNode(true);g.animwrap.append(k);g.animwrap.prepend(j);if(g.defaultTab===0){var f=-1*i*(h/2+1+g.defaultTab-1)}else{var f=-1*i*(h/2+1)}if(g.transitions){g.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+f+"px,0,0)","-webkit-backface-visibility":"hidden",left:"0"})}else{g.animwrap.setStyle("left",f)}}g.pannels=e.all("."+g.contentClass+" ."+g.pannelClass);g.length=g.pannels.size();return this},isAming:function(){var d=this;return false},previous:function(f){var d=this;if(d.currentTab==-1){return d}var e=d.currentTab+d.length-1-(d.colspan-1);if(e>=(d.length-d.colspan+1)){e=e%(d.length-d.colspan+1)}if(d.carousel){if(d.is_first()){d.fix_pre_carousel();d.previous.call(d);return this}}d.go(e,f);return this},is_last:function(){var d=this;if(d.currentTab==-1){return false}if(d.currentTab==(d.length-(d.colspan-1)-1)){return true}else{return false}},is_first:function(){var d=this;if(d.currentTab==-1){return false}if(d.currentTab===0){return true}else{return false}},next:function(f){var d=this;if(d.currentTab==-1){return d}var e=d.currentTab+1;if(e>=(d.length-d.colspan+1)){e=e%(d.length-d.colspan+1)}if(d.carousel){if(d.is_last()){d.fix_next_carousel();d.next.call(d);return this}}d.go(e,f);return this},fix_next_carousel:function(){var e=this;e.currentTab=e.colspan;var d=e.con;if(e.effect!="none"){e.pannels=d.all("."+e.contentClass+" ."+e.pannelClass)}var f="-"+Number(e.animcon.get("region").width).toString()+"px";if(e.effect=="hSlide"){if(e.transitions){e.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+f+",0,0)"})}else{e.animwrap.setStyle("left",f)}}else{if(e.effect=="vSlide"){}}return},fix_pre_carousel:function(){var e=this;e.currentTab=e.length-1-e.colspan*2+1;var d=e.con;if(e.effect!="none"){e.pannels=d.all("."+e.contentClass+" ."+e.pannelClass)}var f="-"+(Number(e.animcon.get("region").width/e.colspan)*(e.currentTab)).toString()+"px";if(e.effect=="hSlide"){if(e.transitions){e.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+f+",0,0)"})}else{e.animwrap.setStyle("left",f)}}else{if(e.effect=="vSlide"){}}return},highlightNav:function(e){var d=this;if(d.carousel&&d.colspan>1){return this}if(d.tabs.item(e)){d.tabs.removeClass(d.selectedClass);d.tabs.item(e).addClass(d.selectedClass)}return this},hightlightNav:function(){var d=this;d.highlightNav.apply(d,arguments);return this},unhighlightNav:function(e){var d=this;if(d.carousel&&d.colspan>1){return this}if(d.tabs.item(e)){d.tabs.removeClass(d.selectedClass)}return this},unhighlightNavAll:function(){var d=this;d.tabs.removeClass(d.selectedClass);return this},switch_to:function(j,l){var m=this;if(l===false){var f=false}else{var f=true}var i=function(){if(a.isFunction(l)){l.call(m,m)}m.fire("afterSwitch",{index:m.currentTab,navnode:m.tabs.item(m.getWrappedIndex(m.currentTab)),pannelnode:m.pannels.item(m.currentTab)})};var d=m.fire("beforeTailSwitch",{index:m.currentTab,navnode:m.tabs.item(m.getWrappedIndex(m.currentTab)),pannelnode:m.pannels.item(m.currentTab)});m.fixSlideSize(j);if(m.autoSlide&&m.stoped===false){m.stop().play()}if(j>=m.length){j=j%m.length}if(j==m.currentTab){return this}if(m.anim){try{m.anim.stop();m.anim=null}catch(k){}}var h={none:function(e){m.pannels.setStyles({display:"none"});m.pannels.item(e).setStyles({display:"block"});i()},vSlide:function(e){if(m.transitions){m.animwrap.setStyles({"-webkit-transition-duration":(f?m.speed:"0")+"s","-webkit-transform":"translate3d(0,"+(-1*e*m.animcon.get("region").height/m.colspan)+"px,0)","-webkit-backface-visibility":"hidden"});if(f){m.anim=a.one(m.animwrap).animate({"-webkit-transition-duration":(m.speed)+"s","-webkit-transform":"translate3d(0,"+(-1*e*m.animcon.get("region").height/m.colspan)+"px,0)","-webkit-backface-visibility":"hidden",opacity:1},a.config("mini")?m.speed:0.001,m.easing,function(){});setTimeout(function(){i()},m.speed*1000)}else{i()}}else{if(f){m.anim=a.one(m.animwrap).animate({top:-1*e*m.animcon.get("region").height/m.colspan},m.speed,m.easing,function(){i()})}else{m.animwrap.css({top:-1*e*m.animcon.get("region").height/m.colspan});i()}}},hSlide:function(e){if(m.transitions){if(f){m.anim=a.one(m.animwrap).animate({"-webkit-transition-duration":m.speed+"s","-webkit-transform":"translate3d("+(-1*e*m.animcon.get("region").width/m.colspan)+"px,0,0)","-webkit-backface-visibility":"hidden",opacity:1},a.config("mini")?m.speed:0.001,m.easing,function(){});setTimeout(function(){i()},m.speed*1000)}else{i()}}else{if(f){m.anim=a.one(m.animwrap).animate({left:-1*e*m.animcon.get("region").width/m.colspan},m.speed,m.easing,function(){i()})}else{m.animwrap.css({left:-1*e*m.animcon.get("region").width/m.colspan});i()}}},fade:function(e){var n=m.currentTab;m.pannels.item(e).setStyle({display:"block"});m.pannels.item(e).setStyle("opacity",0);m.pannels.item(n).setStyle("zIndex",1);m.pannels.item(e).setStyle("zIndex",2);m.anim=a.one(m.pannels.item(e)).animate({opacity:1},m.speed,m.easing,function(){m.pannels.item(n).setStyle("zIndex",0);m.pannels.item(e).setStyle("zIndex",1);m.pannels.item(n).setStyle("opacity",0);m.pannels.item(n).setStyles({display:"none"});i();m.fire("afterSwitch",{index:e,navnode:m.tabs.item(m.getWrappedIndex(e)),pannelnode:m.pannels.item(e)})})}};var g=function(){var e=m.fire("beforeSwitch",{index:j,navnode:m.tabs.item(j),pannelnode:m.pannels.item(j)});if(e._executeSwitch!==false){if(j+m.colspan>m.pannels.size()){j=m.pannels.size()-m.colspan}h[m.effect](j);m.currentTab=j;m.highlightNav(m.getWrappedIndex(j));m.fire("switch",{index:j,navnode:m.tabs.item(m.getWrappedIndex(j)),pannelnode:m.pannels.item(j)});m.renderPannelTextarea(j)}};if(a.isNumber(d)){setTimeout(function(){g()},d)}else{g()}},go:function(e,f){var d=this;d.switch_to(e,f);return this},play:function(){var d=this;if(d.timer!==null){clearTimeout(d.timer)}d.timer=setTimeout(function(){d.next().play()},Number(d.timeout));d.stoped=false;return this},stop:function(){var d=this;clearTimeout(d.timer);d.timer=null;d.stoped=true;return this}});return b},{requires:["node","json","event","anim","ua","./slide-util","./kissy2yui"]});KISSY.add("kg/slide/2.0.2/index",function(a,b){return b},{requires:["./lib/base"]});
